<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIlury</title>
  <!--<link rel="icon" type="image/ICO" href="templates/Favicon.ICO">-->
  <link id="faviconico" rel="icon" href="AIlurylogo.ico" type="image/x-icon">
  <style>
    :root {
        --primary-color: #000;
        --secondary-color: #fff;
        --chat-background-color: #fff;
        --sidebar-background-color: #fff;
        --sidebarbtn-background-color: #E9E9E9;/*e8eaee*/
        --message-background-color: #E9E9E9;/*e8eaee*/
        --message-text-color: #000;
        --sign-background-color: #000;
        --info-background-color: #E9E9E9;/*e8eaee*/
        --info-text-color: #000;
        --input-field-background-color: #E9E9E9;/*e8eaee*/
        --input-field-text-color: #000;
        --intro-background-color: linear-gradient(to right, #E9E9E9, #fff);/*e8eaee*/
        --blurbc-color: rgba(255, 255, 255, 0.5);
        --blurbc2-color: rgba(120, 120, 120, 0.2);
        --blurs-color: rgba(0, 0, 0, 0.2);
        --bubble-color: #999999;
        --highlight-message-color: transparent;/*linear-gradient(90deg, #ff0077, #7700ff);*/
    }

    .dark-theme {
        --primary-color: #fff;
        --secondary-color: #000;
        --chat-background-color: #000;
        --sidebar-background-color: #000;
        --sidebarbtn-background-color: #232323;
        --message-background-color: #232323;
        --message-text-color: #fff;
        --sign-background-color: #fff;
        --info-background-color: #232323;
        --info-text-color: #fff;
        --input-field-background-color: #232323;
        --input-field-text-color: #fff;
        --intro-background-color: linear-gradient(to right, #232323, #000);
        --blurbc-color: rgba(0, 0, 0, 0.5);
        --blurbc2-color: rgba(70, 70, 70, 0.2);
        --blurs-color: rgba(0, 0, 0, 0.2);
        --bubble-color: #121212;
        --highlight-message-color: transparent;/*linear-gradient(90deg, #ff0077, #7700ff);*/
    }
    input[type=text] {
      background: transparent;
      /*linear-gradient(45deg, #010758, #490d61);*/
      color: var(--primary-color);
      font-weight: bold;
      font-size: 1em;
      text-align: left;
      transition: 1s;
      padding: 0;
    }

    input[type=text]:focus {
      outline: none;
      border: none;
    }

    @keyframes sendAnimation {
      0% {
        margin-top: 0.4em;
        margin-right: 0;
        transform: rotate(0deg);

      }
      50% {
        margin-right: -50px;
        margin-top: -40px;
        transform: rotate(-60deg);
      }
      100%{
        margin-top: 0.4em;
        margin-right: 0;
        transform: rotate(0deg);
      }
    }

    #info-box {
      display: none;
      position: absolute;
      width: 130px;
      padding: 20px;
      background: var(--bubble-color);
      color: var(--primary-color);
      border-radius: 10px;
      text-align: center;
      font-size: 14px;
      margin-left: 3%;
      margin-top: 53px;
      transition: 1s;
      animation: fadeIn 0.2s ease-in;
      z-index: 1;
    }

    #info-box::after {
      content: "";
      position: absolute;
      bottom: -20px;
      /* Position des Pfeils anpassen */
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 20px solid var(--bubble-color);
      transition: 1s;
      z-index: 1;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      0% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    .up-container {
      display: none;
      position: absolute;
      left: 10%;
      bottom: 10%;
      width: 80%;
      background: var(--sidebarbtn-background-color);
      border-radius: 10px;
      color: var(--primary-color);
      font-size: 15px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      transition: 1s;
      /* make the height scrollable */
      max-height: 80%;
      overflow-y: auto;
      /* add a scrollbar */
      scrollbar-width: thin;
      scrollbar-color: var(--sidebarbtn-background-color);
      z-index: 999;
    }

    .up-container h2 {
      margin-top: 55px;
    }

    /* make a cross out of the up cross */
    .up-cross {
      display: block;
      position: absolute;
      width: 10px;
      height: 50px;
      right: 23px;
      top: 5px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg) scale(0.5);
    }

    .up-cross::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 50px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .i-container {
      display: none;
      position: absolute;
      left: 10%;
      bottom: 10%;
      width: 80%;
      background: var(--sidebarbtn-background-color);
      border-radius: 10px;
      color: var(--primary-color);
      font-size: 15px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      transition: 1s;
      /* make the container have a max height with overflow hidden for the user to be able to scroll down*/
      max-height: 80%;
      overflow-y: auto;
      /* add a scrollbar */
      scrollbar-width: thin;
      scrollbar-color: var(--sidebarbtn-background-color);
      z-index: 999;

    }

    .i-container h2 {
      margin-top: 55px;
    }

    /* make a cross out of the up cross */
    .i-cross {
      display: block;
      position: absolute;
      width: 10px;
      height: 50px;
      right: 23px;
      top: 5px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg) scale(0.5);
    }

    .i-cross::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 50px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .hilfe {
      display: none;
      width: 40%;
      position: absolute;
      left: 30%;
      bottom: 40%;
      border-radius: 10px;
      background: var(--sidebarbtn-background-color);
      color: var(--primary-color);
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      font-size: 1.2em;
      transition: 1s;
      z-index: 999;
    }

    .hilfe-cross {
      display: block;
      position: absolute;
      width: 5px;
      height: 30px;
      right: 23px;
      top: 5px;
      background-color: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg);
    }

    .hilfe-cross::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 30px;
      background-color: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .hilfe-option {
      display: flex;
      background: var(--sidebarbtn-background-color);
      box-shadow: none;
      border-radius: 3px;
      margin-top: 10px;
      padding: 3px;
      transition: 1s;
    }

    #hilfe-option1 {
      margin-top: 40px;
    }

    #resetbtn{
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background: var(--blurbc-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        color: var(--primary-color);
        animation: fadeInDown 1s;
        transition: 1s;
    }
    #gamecontainer1 {
        position: fixed;
        top: 0;
        font-family: Arial, sans-serif;
        display: none;/*flex*/
        flex-direction: column;
        align-items: center;
        animation: BodyfadeIn 1s;
        background: var(--blurbc2-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        transition: 1s;
        margin: 0;
        height: 100vh;
        width: 100vw;
        justify-content: center;
        overflow: auto;
        z-index: 900;
    }
    #gamecontainer1 .game-board {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .deck, .player-hand, .computer-hand {
        display: flex;
        margin: 20px;
        overflow: scroll;
    }
    #gamecontainer1 .carde {
        width: 60px;
        height: 90px;
        border: none;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 5px;
        font-size: 24px;
        cursor: pointer;
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        box-shadow: 0px 0px 3px var(--blurs-color);
        opacity: 0.9;
        transition: 1s;
    }
    .gamecontainer .carde.new {
        transition: 1s;
        animation: addcard 1s;
    }
    .discard-pile .carde {
        transition: 1s;
        animation: addcard 1s;
    }
    @keyframes addcard{
        0%{
            transform: scale(1.5);
        }
        100%{
            transform: scale(1);
        }
    }
    #gamecontainer1 #draw-pile{
      color: var(--primary-color);
      background: var(--ngrey-color);
    }
    .carde.red.player { background: red; }
    .carde.blue.player { background: blue; }
    .carde.green.player { background: green; }
    .carde.yellow.player { background: yellow; }
    .carde.black.player { background: black; color: white; }

    .carde.red.computer { background: var(--ngrey-color); }
    .carde.blue.computer { background: var(--ngrey-color); }
    .carde.green.computer { background: var(--ngrey-color); }
    .carde.yellow.computer { background: var(--ngrey-color); }
    .carde.black.computer { background: var(--ngrey-color); color: white; }

    .carde.red.deck { background: red; }
    .carde.blue.deck { background: blue; }
    .carde.green.deck { background: green; }
    .carde.yellow.deck { background: yellow; }
    .carde.black.deck { background: black; color: white; }


    #gamecontainer3 {
        font-family: Arial, sans-serif;
        display: none;/* flex */
        position: fixed;
        top: 0;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100vw;
        margin: 0;
        background: var(--blurbc2-color);
        color: var(--primary-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        animation: BodyfadeIn 1s;
        z-index: 900;
        overflow: auto;
        transition: 1s;
    }
    #gamecontainer3 #game {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-template-rows: repeat(3, 100px);
        animation: fadeInDown 1s;
        gap: 5px;
        transition: 1s;
    }
    #gamecontainer3 .cell {
        width: 100px;
        height: 100px;
        background: var(--blurbc-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2em;
        cursor: pointer;
        border: none;
        color: var(--primary-color);
        border-radius: 20px;
        transition: 1s;
    }
    #gamecontainer3 #message {
        margin-top: 20px;
        font-size: 1.5em;
        transition: 1s;
    }
    #gamecontainer3 button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background: var(--blurbc-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        color: var(--primary-color);
        animation: fadeInDown 1s;
        transition: 1s;
    }
    #gamecontainer3 #mode-select {
        margin-bottom: 20px;
        animation: fadeInDown 1s;
        transition: 1s;
    }
    @keyframes fadeInDown{
      0%{
        opacity: 0;
        transform: translateY(-100px);
      }
      100%{
        opacity: 1;
        transform: translateY(0px);
      }
    }
    @keyframes BodyfadeIn{
      0%{
        opacity: 0;
      }
      100%{
        opacity: 1;
      }
    }
    @keyframes flipAnimation{
        0%{
            transform: rotateY(180deg);
        }
        100%{
            transform: rotateY(0deg);
        }
    }
    #gamecontainer4 {
        display: none;/* flex */
        position: fixed;
        top: 0;
        z-index: 900;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
        text-align: center;
        background: var(--blurbc2-color);
        color: var(--primary-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        animation: BodyfadeIn 1s;
        height: 100vh;
        width: 100vw;
        overflow: auto;
        transition: 1s;
    }
    #tiletumble{
        animation: fadeInDown 1s;
    }

    .tgame-container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #gamecontainer4 canvas {
        background: #000;
        margin-bottom: 20px;
    }

    #gamecontainer4 .controls {
        display: flex;
        justify-content: space-between;
        width: 200px;
        animation: fadeInDown 1s;
        margin-left: -65%;
    }

    #gamecontainer4 #buttons {
        display: flex;
        justify-content: space-between;
        width: 200px;
        animation: fadeInDown 1s;
    }

    #gamecontainer4 #scores {
        display: flex;
        justify-content: space-between;
        width: 100px;
        animation: fadeInDown 1s;
    }

    #gamecontainer4 .button{
        height: 40px;
        width: auto;
        background: var(--blurbc-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        color: var(--primary-color);
        border: none;
        border-radius: 20px;
        font-size: 1em;
        animation: fadeInDown 1s;
        margin: 10px;
    }
    #gamecontainer2 {
        display: none;
        position: fixed;
        top: 0;
        width: 100vw;
        height: 100vh;
        z-index: 900;
        font-family: Arial, sans-serif;
        text-align: center;
        background: var(--blurbc2-color);
        color: var(--primary-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        animation: BodyfadeIn 1s;
        transition: 1s;
        overflow: auto;
    }

    h1 {
        margin-top: 20px;
        animation: fadeInDown 1s;
    }

    #game-board {
        display: flex;
        flex-wrap: wrap;
        width: 80%;
        margin: 20px auto;
        animation: fadeInDown 1s;
    }

    .card {
        width: 10vw;
        height: 10vw;
        max-height: 100px;
        max-width: 100px;
        min-width: 25px;
        min-height: 25px;
        margin: 10px;
        background: var(--blurbc-color);
        backdrop-filter: blur(70px);
        -webkit-backdrop-filter: blur(70px);
        color: var(--primary-color);
        border: none;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(0.5em, 5vw, 2em);
        cursor: pointer;
        position: relative;
        animation: fadeInDown 1s;
        transition: 1s;
    }

    .card.flipped {
        animation: flipAnimation 0.5s;
    }

    .card.matched {
        visibility: hidden;
    }

    #gamecontainer2 p {
        font-size: 1.2em;
        animation: fadeInDown 1s;
    }
    .cross-container {
        position: absolute;
        width: 50px;
        height: 50px;
        z-index: 999; /* Ensures the cross is always on top */
        transform: rotate(45deg) scale(0.5);
        right: 10px;
        top: 30px;
    }

    .tcross {
        position: absolute;
        width: 10px;
        height: 50px;
        background-color: var(--primary-color);
        border: none;
        border-radius: 2px;
    }

    .tcross::before {
        content: '';
        position: absolute;
        top: 20px;
        left: -20px;
        width: 50px;
        height: 10px;
        background-color: var(--primary-color);
        border: none;
        border-radius: 2px;
    }
    .searchinputcontainer{
      display: none;
      justify-content: center;
      align-items: center;
      position: fixed;
      background: var(--message-background-color);
      animation: fadeInDown 1s;
      border-radius: 100px;
      top: 45%;
      left: 30%;
      width: 40%;
      /*padding: 0px 15px;*/
      min-width: 300px;
      transition: 1s;
      z-index: 999;
      overflow: hidden;
      box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.2);
    }
    #chatSearchInput{
      background: transparent;
      color: var(--primary-color);
      border: none;
      border-radius: 100px;
      padding: 10px 30px;
      font-size: 2em;
      text-align: center;
      width: 95%;
    }
    #chatSearchInput:focus{
      outline: none;
    }
    .serachinputcrosscontainer {
        position: absolute;
        width: 30px;
        height: 30px;
        transform: rotate(45deg) scale(0.7);
        left: 88%;
        top: 35%;
        right: 10px;
        bottom: 5px;
        cursor: pointer;
    }

    #chatsearchinputcross {
        position: absolute;
        width: 6px;
        height: 30px;
        background-color: var(--primary-color);
        border: none;
        border-radius: 2px;
    }

    #chatsearchinputcross::before {
        content: '';
        position: absolute;
        top: 13px;
        left: -13px;
        width: 30px;
        height: 6px;
        background-color: var(--primary-color);
        border: none;
        border-radius: 2px;
    }

    body {
        padding: 0;
        margin: 0;
        font-family: 'Roboto', sans-serif;
        transition: 1s;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        cursor: pointer;
        background: var(--chat-background-color);
        position: fixed;
    }

    /* Sidebar Styles */
    #sidebar {
        width: 25vw;
        height: 100vh;
        background: var(--sidebar-background-color);
        overflow-y: scroll;
        transition: 1s;
    }

    #sidebar-header {
        padding: 0.5em;
        background: var(--sidebarbtn-background-color);
        color: var(--primary-color);
        font-size: 1.5em;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        /*height: 10vh;*/
        transition: 1s;
    }
    #sidebar-header h3{
        margin-top: 10px;
    }

    .sidebar-button {
        width: 100%;
        padding: 1.5em;
        background: var(--sidebarbtn-background-color);
        border: none;
        color: var(--primary-color);
        font-size: 1.2em;
        font-weight: bold;
        text-align: left;
        padding-left: 30%;
        margin-top: 0.5em;
        cursor: pointer;
        transition: 1s;
    }

    /* Chat Area Styles */
    .chat {
        height: 100vh;
        width: 100vw;
        background: var(--chat-background-color);
        display: flex;
        justify-content: space-between;
        transition: 1s;
    }

    #chat {
        width: 75vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        padding: 1em;
        background: var(--chat-background-color);
        transition: 1s;
    }

    #chat-top {
        display: flex;
        justify-content: space-between;
        margin-top: 0;
        transition: 1s;
    }

    .timer {
        display: flex;
        font-weight: bold;
        font-size: 1.2em;
        color: var(--primary-color);
        transition: 0.3s;
        transition: 1s;
    }

    #chat-bottom {
        width: 70vw;
        height: 3vh;
        display: flex;
        justify-content: space-between;
        position: absolute;
        bottom: 6vh;
        transition: 1s;
    }

    #user-input {
        width: 100%;
        height: 100%;
        background: var(--input-field-background-color);
        border: none;
        color: var(--input-field-text-color);
        font-size: 1.2em;
        font-weight: bold;
        padding: 1em;
        border-radius: 100px;
        transition: 1s;
    }

    #sendbtn {
        height: 100%;
        background: transparent;
        border: none;
        color: var(--input-field-text-color);
        font-size: 3em;
        font-weight: bold;
        border-radius: 100px;
        transition: 1s;
        margin-top: 0.4em;
        display: flex;
        align-items: center;
        cursor: pointer;
    }

    /* Sidebar Toggle Button */
    #sidebarbtn {
        display: block;
        cursor: pointer;
        transform: scale(0.6);
        transition: 1s;
    }

    #sidebar-part1, #sidebar-part2 {
        display: block;
        position: absolute;
        transition: 1s;
    }

    #sidebar-part1 {
        width: 40px;
        height: 40px;
        background: transparent;
        border-radius: 10px;
        border: 5.5px solid var(--sign-background-color);
        transition: 1s;
    }

    #sidebar-part2 {
        width: 10px;
        height: 40px;
        background: var(--sign-background-color);
        border-radius: 10px 0 0 10px;
        border: 5.5px solid var(--sign-background-color);
        transition: 1s;
    }

    /* Help Button */
    #helpbtn {
        position: relative;
        width: 50px;
        height: 50px;
        cursor: pointer;
        transform: scale(0.7);
        transition: 1s;
        z-index: 1;
    }

    #helpbtn-body {
        position: absolute;
        top: 10px;
        left: 50%;
        width: 30px;
        height: 30px;
        background: var(--sign-background-color);
        border-radius: 50%;
        transform: translateX(-50%);
        border: 2.5px solid var(--sign-background-color);
        border-bottom: none;
        transition: 1s;
    }

    #helpbtn-body::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        width: 13px;
        height: 10px;
        background: var(--sign-background-color);
        border-radius: 2px 2px 5px 5px;
        border: 1.5px solid var(--sign-background-color);
        border-top: none;
        transform: translateX(-50%);
        transition: 1s;
    }

    #helpbtn-bottom {
        position: absolute;
        bottom: -7px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--sign-background-color);
        border-radius: 10px;
        transform: translateX(-50%);
        transition: 1s;
    }

    #helpbtn-bottom::before,
    #helpbtn-bottom::after {
        content: '';
        position: absolute;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--sign-background-color);
        border-radius: 10px;
        transform: translateX(-50%);
        transition: 1s;
    }

    #helpbtn-bottom::before {
        bottom: -3px;
        transition: 1s;
    }

    #helpbtn-bottom::after {
        bottom: -6px;
        transition: 1s;
    }

    #chat{
      height: 100vh;
      width: 75vw;
      display: flex;
      /* background image cover */
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: 1s;
      overflow: hidden;
    }
    #searchbtn{
        height: 100%;
        background: transparent;
        border: none;
        color: var(--input-field-text-color);
        font-size: 3em;
        font-weight: bold;
        border-radius: 100px;
        transition: 1s;
        margin-top: 0.4em;
        font-family: 'Roboto', sans-serif;
        display: flex;
        align-items: center;
        cursor: pointer;
        margin-left: -1.2em;
        margin-right: 1.1em;
    }
    .bell{
        position: relative;
        width: 50px;
        height: 50px;
        cursor: pointer;
        transform: scale(0.6);
        transition: 1s;
    }
    .bell-top {
      position: absolute;
      top: 0;
      left: 50%;
      width: 10px;
      height: 6px;
      background: var(--sign-background-color);
      border-radius: 25px 25px 0 0;
      transform: translateX(-50%);
      margin-top: 5px;
      border: 2px solid var(--sign-background-color);
      border-bottom: none;
      transition: 1s;
    }

    .redball {
      display: block;
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: red;
      border-radius: 50%;
      top: 10px;
      right: 2px;
      transition: 1s;
    }

    .bell-body {
      position: absolute;
      top: 10px;
      left: 50%;
      width: 30px;
      height: 28px;
      background: var(--sign-background-color);
      border-radius: 35px 35px 0 0;
      transform: translateX(-50%);
      border: 2.5px solid var(--sign-background-color);
      border-bottom: none;
      transition: 1s;
    }

    .bell-body::after {
      content: '';
      position: absolute;
      bottom: -12px;
      left: 50%;
      width: 40px;
      height: 10px;
      background: var(--sign-background-color);
      border-radius: 14px 14px 5px 5px;
      border: 2.5px solid var(--sign-background-color);
      border-top: none;
      transform: translateX(-50%);
      transition: 1s;
    }

    .bell-clapper {
      position: absolute;
      bottom: -9px;
      left: 50%;
      width: 10px;
      height: 5px;
      background: var(--sign-background-color);
      border-radius: 0 0 10px 10px;
      transform: translateX(-50%);
      transition: 1s;
    }
    #user-avatar{
        height: 50px;
        width: 50px;
        border-radius: 50%;
        background: var(--chat-background-color);
        object-fit: cover;
        transition: 1s;
    }
    .intro {
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: var(--intro-background-color);
        transition: 1s;
    }
    .logo-header {
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--primary-color);
    }

    .logo {
        position: relative;
        display: inline-block;
        bottom: -20px;
        font-size: 1.5em;
        opacity: 0;
    }

    .logo.active {
        bottom: 0;
        opacity: 1;
        transition: ease-in-out 0.5s;
    }

    .logo.fade {
        bottom: 150px;
        opacity: 0;
        transition: ease-in-out 0.5s;
    }

    #nmy{
      font-size: 1.2em;
      font-weight: bold;
      color: var(--primary-color);
      transition: 1s;
    }
    #nmy a{
      background: var(--sidebarbtn-background-color);
      color: var(--primary-color);
      font-size: 0.5em;
      font-weight: bold;
      text-align: center;
      border: none;
      border-radius: 100px;
      padding: 10px;
      margin-left: 10px;
      transition: 1s;
    }
    #nmy a:hover {
      background: var(--primary-color);
      color: var(--sidebarbtn-background-color);
    }
    #alertmessage{
      text-align: left;
      padding: 10px;
      padding-left: 20px;
      width: 78%;
      background: transparent;
      color: var(--primary-color);
      border: none;
      border-radius: 0;
      font-size: 15px;
      display: none;
      transition: 1s;
      border-right: 1px solid #ccc;
    }
    #alertmessagebtn{
      padding: 10px;
      width: 20%;
      background-color: transparent;
      color: var(--primary-color);
      border: none;
      border-radius: 5px;
      font-size: 15px;
      display: none;
      cursor: pointer;
      transition: 1s;
    }
    #alertElement{
      display: none;
      justify-content: space-between;
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      z-index: 999;
      transition: 1s;
      background: var(--sidebarbtn-background-color);
      border-radius: 10px;
      margin-left: 40%;
      margin-top: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      min-height: 50px;
    }
    .chat-messages {
      flex: 1;
      overflow-y: scroll;
      padding: 10px;
      max-height: 75vh;
      /* box shadow inset */
      /*box-shadow: 0 0 10px var(--chat-background-color) inset;*/
      transition: 1s;
    }
    @keyframes blop {
      from {
        width: 0px;
        font-size: 0;
      }

      to {
        width: 100%;
        font-size: 1.5em;
      }
    }

    @keyframes blop2 {
      from {
        margin-left: 100%;
        width: 0px;
        font-size: 0;
      }

      to {
        margin-left: 50%;
        width: 100%;
        font-size: 1.5em;
      }
    }
    #Löschbtn {
      display: none;
    }

    #Editbtn {
      display: none;
    }

    #Breakbtn {
      display: none;
    }
    
    #Copybtn {
      display: none;
    }
    
    button{
      transition: 1s;
    }
    
    @media(min-width: 750px) {
      .sent.border-active{
        transform: scale(1.1) translateX(-10%);
      }
      .received.border-active{
        transform: scale(1.1) translateX(10%);
      }
      .message {
        margin-bottom: 10px;
        padding: 15px 20px;
        max-width: 60%;
        border-radius: 40px;
        word-wrap: break-word;
      }

      .sent {
        background: var(--message-background-color);
        align-self: flex-end;
        text-align: left;
        font-size: 1.5em;
        margin-left: 50%;
        color: var(--primary-color);
        max-width: 50%;
        /*margin-left: 30%;*/
        transition: 0.5s;
        border-bottom-right-radius: 0;
        animation: blop2 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }
      .received {
        background: var(--message-background-color);
        align-self: flex-start;
        text-align: left;
        color: var(--primary-color);
        /*max-width: 50%;*/
        font-size: 1.5em;
        transition: 0.5s;
        border-bottom-left-radius: 0;
        animation: blop 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }
      #sidebar {
          position: relative;
          width: 25vw;
          min-width: 300px;
          height: 100vh;
          background: var(--sidebar-background-color);
          overflow-y: scroll;
          transition: 1s;
      }
      #hidesidebarbtn{
        display: none;
      }
      #chat-bottom {
          width: 70vw;
          height: 3vh;
          display: flex;
          justify-content: space-between;
          position: fixed;
          bottom: 60px;
          transition: 1s;
      }
    }

    @media(max-width: 750px) {
      .sent.border-active{
        transform: scale(1.1);
      }
      .received.border-active{
        transform: scale(1.1);
      }
      @keyframes blop {
        from {
          width: 0px;
          font-size: 0;
        }
        to {
          width: 100%;
          font-size: 1.5em;
        }
      }
      @keyframes blop2 {
        from {
          margin-left: 100%;
          width: 0px;
          font-size: 0;
        }
        to {
          margin-left: 0;
          width: 100%;
          font-size: 1.5em;
        }
      }
      .chat-messages {
        flex: 1;
        /* Füllt den verfügbaren Platz aus */
        overflow-y: auto;
        padding: 10px;
      }

      .message {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 30px;
        max-width: 90%;
        word-wrap: break-word;
      }

      .sent {
        background: var(--message-background-color);
        align-self: flex-end;
        text-align: right;
        font-size: 1.5em;
        color: var(--primary-color);
        transition: 0.5s;
        border-bottom-right-radius: 0;
        animation: blop2 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }

      .received {
        background: var(--message-background-color);
        align-self: flex-start;
        text-align: left;
        font-size: 1.5em;
        color: var(--primary-color);
        /*max-width: 50%;*/
        transition: 0.5s;
        border-bottom-left-radius: 0;
        animation: blop 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }
      #sidebar {
          position: absolute;
          width: 25vw;
          min-width: 300px;
          height: 100vh;
          background: var(--sidebar-background-color);
          overflow-y: scroll;
          z-index: 900;
          transition: 1s;
      }
      #hidesidebarbtn{
        height: 50px;
        width: 50px;
        background: transparent;
        border: none;
        color: var(--primary-color);
        font-size: 2em;
        margin-top: -0.1em;
      }
      #chat-bottom {
        width: 90vw;
        height: 3vh;
        display: flex;
        justify-content: space-between;
        position: fixed;
        bottom: 60px;
        transition: 1s;
      }
      #alertElement{
        margin-left: 23%;
      }
      .searchinputcontainer{
        display: none;
        justify-content: center;
        align-items: center;
        position: fixed;
        background: var(--message-background-color);
        animation: fadeInDown 1s;
        border-radius: 100px;
        top: 45%;
        left: 15%;
        width: 40%;
        min-width: 300px;
        transition: 1s;
        z-index: 999;
        overflow: hidden;
        box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.2);
      }
      .hilfe {
        display: none;
        width: 40%;
        position: absolute;
        left: 30%;
        bottom: 20%;
        border-radius: 10px;
        background: var(--sidebarbtn-background-color);
        color: var(--primary-color);
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        font-size: 0.9em;
        transition: 1s;
        z-index: 999;
      }
    }
    @media(max-width: 600px) {
      .sent.border-active{
        transform: scale(1.1);
      }
      .received.border-active{
        transform: scale(1.1);
      }
      @keyframes fadeInDown{
        0%{
          opacity: 0;
          transform: translateY(-100px) scale(0.7);
        }
        100%{
          opacity: 1;
          transform: translateY(0px) scale(0.7);
        }
      }
      .searchinputcontainer{
        display: none;
        justify-content: center;
        align-items: center;
        position: fixed;
        background: var(--message-background-color);
        animation: fadeInDown 1s;
        border-radius: 100px;
        top: 45%;
        left: 6%;
        width: 40%;
        min-width: 300px;
        transition: 1s;
        z-index: 999;
        overflow: hidden;
        box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.2);
        transform: scale(0.7);
      }
      .hilfe {
        display: none;
        width: 70%;
        position: absolute;
        left: 8%;
        bottom: 20%;
        border-radius: 10px;
        background: var(--sidebarbtn-background-color);
        color: var(--primary-color);
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        font-size: 0.6em;
        transition: 1s;
        z-index: 999;
      }
      #alertElement{
        margin-left: 15%;
      }
      .logo {
        position: relative;
        display: inline-block;
        bottom: -20px;
        font-size: 0.9em;
        opacity: 0;
      }
      .chat-messages {
        flex: 1;
        overflow-y: scroll;
        padding: 10px;
        max-height: 50vh;
        /* box shadow inset */
        /*box-shadow: 0 0 10px var(--chat-background-color) inset;*/
        transition: 1s;
      }
      @keyframes blop {
        from {
          width: 0px;
          font-size: 0;
        }
        to {
          width: 100%;
          font-size: 1em;
        }
      }
      @keyframes blop2 {
        from {
          margin-left: 100%;
          width: 0px;
          font-size: 0;
        }
        to {
          margin-left: 0;
          width: 100%;
          font-size: 1em;
        }
      }
      .sent {
        background: var(--message-background-color);
        align-self: flex-end;
        text-align: right;
        font-size: 1em;
        color: var(--primary-color);
        transition: 0.5s;
        border-bottom-right-radius: 0;
        animation: blop2 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }

      .received {
        background: var(--message-background-color);
        align-self: flex-start;
        text-align: left;
        font-size: 1em;
        color: var(--primary-color);
        /*max-width: 50%;*/
        transition: 0.5s;
        border-bottom-left-radius: 0;
        animation: blop 0.5s;
        border-image: linear-gradient(90deg, #ff0077, #7700ff);
        border-image-slice: 1;
      }
    }

    /*.received.border-active, .sent.border-active{
      border: 2px solid transparent;
      border-image: linear-gradient(90deg, #ff0077, #7700ff);
      border-image-slice: 1;
      border-radius: 2px;
      animation: border-animation 2s linear infinite;
    }*/

    @keyframes border-animation {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
  </style>
</head>

<body>
  <div class="intro">
    <h1 class="logo-header">
      <span class="logo">A</span><span class="logo">I</span><span class="logo">l</span><span class="logo">u</span><span
        class="logo">r</span><span class="logo">y</span><span class="logo">-</span><span class="logo">2</span><span class="logo">.</span><span class="logo">1</span><span class="logo">.</span><span class="logo">2</span>
    </h1>
  </div>
  <script>
    let intro = document.querySelector('.intro');
    let logo = document.querySelector('.logo-header');
    let logoSpan = document.querySelectorAll('.logo');
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        logoSpan.forEach((span, idx) => {
          setTimeout(() => {
            span.classList.add('active');
          }, (idx + 1) * 200)
        })
        setTimeout(() => {
          logoSpan.forEach((span, idx) => {
            setTimeout(() => {
              span.classList.remove('active');
            }, (idx + 1) * 50)
          })
        }, 3000)
        setTimeout(() => {
          intro.style.top = '-100vh';
        }, 3500)
      }, 1000)
    })

  </script>
  <div class="searchinputcontainer"><input id="chatSearchInput" placeholder="search" /><div class="serachinputcrosscontainer"><div id="chatsearchinputcross"></div></div></div>

  <div class="gamecontainer" id="gamecontainer2">
    <div class="cross-container" id="gamecontainercross2">
        <div class="tcross"></div>
    </div>
    <h1 id="memorygameh1">Memory Game</h1>
    <div id="game-board"></div>
    <p><span id="memorygamep">Player Score: </span><span id="player-score">0</span><span id="memorygamepc"> AIlury Score: </span><span id="computer-score">0</span></p>
  </div>

  <div id="alertElement">
    <button id="alertmessage">text</button><button id="alertmessagebtn">ok</button>
  </div>
  <div class="gamecontainer" id="gamecontainer1">
    <div class="cross-container" id="gamecontainercross1">
        <div class="tcross"></div>
    </div>
    <div class="game-board">
        <div class="computer-hand"></div>
        <div class="deck">
            <div id="draw-pile" class="carde back">Draw</div>
            <div id="discard-pile" class="carde"></div>
        </div>
        <div class="player-hand"></div>
    </div>
    <a><button class="cardgameresetbtn" id="resetbtn">reset</button></a>
  </div>

  <div class="gamecontainer" id="gamecontainer3">
    <div class="cross-container" id="gamecontainercross3">
        <div class="tcross"></div>
    </div>
    <div id="mode-select">
        <button id="tuctactoegamesetting1" onclick="setMode('single')">you vs AIlury</button>
        <button id="tuctactoegamesetting2" onclick="setMode('multi')">Two players</button>
    </div>
    <div id="game">
      <div class="cell" data-index="0"></div>
      <div class="cell" data-index="1"></div>
      <div class="cell" data-index="2"></div>
      <div class="cell" data-index="3"></div>
      <div class="cell" data-index="4"></div>
      <div class="cell" data-index="5"></div>
      <div class="cell" data-index="6"></div>
      <div class="cell" data-index="7"></div>
      <div class="cell" data-index="8"></div>
    </div>
    <div id="messagee"></div>
    <button class="tictactoerestartbtn" id="restart">Restart</button>
  </div>
  <div class="gamecontainer" id="gamecontainer4">
    <div class="cross-container" id="gamecontainercross4">
        <div class="tcross"></div>
    </div>
    <div class="tgame-container">
        <canvas id="tiletumble" width="300" height="600"></canvas>
        <div class="controls">
            <button class="button" id="left">Left</button>
            <button class="button" id="rotate">Rotate</button>
            <button class="button" id="right">Right</button>
            <button class="button" id="down">Down</button>
            <button class="button" id="resetbtntwo" class="button">reset</button>
        </div>
        <div id="scores"><div id="tiletumblescorecontainer">score </div><div id="score">0</div></div>
    </div>
  </div>

  <div class="hilfe">
    <div class="hilfe-cross"></div>
    <div class="hilfe-option" id="hilfe-option1">op1</div>
    <div class="hilfe-option" id="hilfe-option2">op2</div>
    <div class="hilfe-option" id="hilfe-option3">op3</div>
    <div class="hilfe-option" id="hilfe-option4">op4</div>
    <h2 id="helptext">whats your problem?</h2>
  </div>
  <div class="info-box" id="info-box">
    Information steht hier
  </div>
  <div class="up-container">
    <div class="up-cross"></div>
    <h2 class="h21">
      <strong>Update 2.1.2: Introducing the 2nd Update in the Heli Update series</strong><br><br>
      We are thrilled to unveil Update 2.1.2, the latest release in the Heli Update series, designed to enhance your user experience with a modern interface.<br><br>

      <strong>Key Features:</strong><br><br>

      1. <strong>New Website Layout</strong>:<br>
      - <em>Streamlined Interface</em>: All editing buttons are now conveniently located on the left sidebar, making navigation easier and more intuitive.<br><br>

      2. <strong>Optimized Button Design</strong>:<br>
      - <em>Sleeker Look</em>: Button icons have been resized to be smaller, creating a cleaner and more organized appearance.<br><br>

      3. <strong>Compact Input Field</strong>:<br>
      - <em>Efficient Space Use</em>: The input field has been reduced in size, allowing for more content to be displayed on the screen.<br><br>

      4. <strong>Smaller Profile Picture</strong>:<br>
      - <em>Refined Aesthetics</em>: The profile picture has been made smaller, contributing to a more minimalist and focused design.<br><br>

      5. <strong>Removed Unnecessary Buttons</strong>:<br>
      - <em>Decluttered Interface</em>: Redundant buttons have been removed, simplifying the user experience.<br><br>

      6. <strong>New Customization Options</strong>:<br>
      - <em>Enhanced Customization</em>: Additional buttons have been added to allow for more personalization of the chat and profile settings.<br><br>

      7. <strong>Improved Response Accuracy</strong>:<br>
      - <em>Smarter Interactions</em>: Responses have been refined to provide more accurate and relevant answers to your queries.<br><br>
      Stay tuned for more exciting updates in the Heli Update Series!
    </h2>
  </div>
  <div class="i-container">
    <div class="i-cross"></div>
    <h2 class="h22">
      <strong>Instructions:</strong><br><br>

      - <strong>Buttons:</strong><br><br>

        - <strong>Notifications:</strong> Clicking the notification button will display information about the latest update.<br><br>

        - <strong>Help:</strong> Clicking the help button opens a small window with up to four buttons. If you have a problem, click the button corresponding to your question. The text under the buttons will change to guide you in solving your issue or inform you about the steps taken to address it.<br><br>

        - <strong>Log Out:</strong> Clicking the log out button will take you to your profile page, where you can upload a profile picture or change your name. To return to the chat, click the "Start" button, which also signifies your agreement to the user guidelines and Privacy Policy.<br><br>

        - <strong>Speak:</strong> Clicking the speak button will cause the chat to be read aloud. Click it again to stop the reading.<br><br>

        - <strong>Theme:</strong> Clicking the light/dark theme button will toggle the website between light and dark modes, depending on the current setting.<br><br>

        - <strong>Messages:</strong> You can delete or edit any message you’ve written by clicking on it.<br><br>

        - <strong>Random:</strong> Clicking the random button will generate a random question or sentence in the input field.<br><br>

        - <strong>Background:</strong> Clicking the Background button allows you to upload a background image for the chat. If a background image is already set, it will be removed.<br><br>

        - <strong>Profile Pic:</strong> Clicking the Profile Pic button allows you to upload a profile picture.<br><br>

        - <strong>German:</strong> Clicking the German button will translate the website into German.<br><br><br>

      - <strong>Functions:</strong><br>
        To play an emoji game, type: "I want to play the emoji game." AIlury will give you a list of emojis. Count the emojis from left to right to find the different one and send AIlury the number, or send the different emoji itself.<br>

        To practice German, type: "I want to practice German," and AIlury will provide words for translation.<br>

        For math practice, type: "I want to practice math," and AIlury will give you math exercises.<br>

        To play a quiz, type: "I want to play a quiz," and AIlury will ask you questions.<br>

        For Tic Tac Toe, type: "I want to play Tic Tac Toe," and AIlury will open the game on the screen.<br>

        To play Memory, type: "I want to play Memory," and AIlury will open the game on the screen.<br>

        For Tile Tumble, type: "I want to play Tile Tumble," and AIlury will open the game on the screen.<br>

        If you don’t know how to answer a text function, simply type: "idk."<br><br>

      - <strong>Text Filters and Keywords:</strong><br>
        AIlury offers many functions. You can use AIlury to replace text, for example, "replace I with you in I eat." You can also check if a text is within another, such as "is hello in hello how are you?" or remove text from another, like "take hello out of hello how are you?" You can ask AIlury to say something by typing, for example, "say: hello." AIlury can also solve basic math problems or compare numbers, such as "is 20 > 21?" or "is 20 = 20?" Additionally, AIlury can provide random names for people or general use, e.g., "what would be a good name for my dog?" or "give me a female name." You can ask AIlury to choose a number between two specified numbers by typing, "choose a number from 10 to 20." AIlury can also count to a desired number by typing, "count till 100." These are just some of the functions AIlury offers and are continually being improved.<br><br>

      I hope this gives you a good overview of what AIlury can do!

    </h2>
  </div>
  <input type="file" id="bimage" accept="image/*" style="display: none;">
  <input type="file" id="avatarinputinput" accept="image/*" style="display: none;">
  <section class="chat">
      <div id="sidebar">
          <div id="sidebar-header">
              <div id="hidesidebarbtn" onclick="hideandshowsidebar()">←</div>
              <img src="" id="user-avatar" class="user-avatar" alt="Profile picture">
              <h3 id="username-display" class="username-display">Guest</h3>
              <div class="bell">
                  <div class="bell-top"></div>
                  <div class="bell-body"></div>
                  <div class="bell-clapper"></div>
                  <div class="redball"></div>
              </div>
          </div>
          <button class="sidebar-button" id="changethemebtn" onclick="change_mood()">☾ Dark Theme</button>
          <button class="sidebar-button" id="logoutbtn" onclick="logout()">← Logout</button>
          <button class="sidebar-button" id="speakbtn">♩ Speak: off</button>
          <button class="sidebar-button" id="randombtn" onclick="setinputvalue()">↔ Random</button>
          <button class="sidebar-button" id="languagebtn" onclick="change_language()">⚑ German</button>
          <button class="sidebar-button" id="instructionbtn" onclick="instructionlinkclick()">? Instruction</button>
          <button class="sidebar-button" id="profilebtn">○ Profile pic</button>
          <button class="sidebar-button" id="backgroundbtn">□ Background</button>
          <button class="sidebar-button" id="Breakbtn">⚠ Stop</button>
          <button class="sidebar-button" id="Löschbtn">⊗ Trash</button>
          <button class="sidebar-button" id="Editbtn">✎ Edit</button>
          <button class="sidebar-button" id="Copybtn">● Copy</button>
          <button class="sidebar-button"></button>
      </div>

      <div id="chat">
          <div id="chat-top">
              <div id="sidebarbtn">
                  <div id="sidebar-part1"></div>
                  <div id="sidebar-part2"></div>
              </div>
              <div class="timer">
                  <div class="timer-num1">00</div>:<div class="timer-num2">00</div>:<div class="timer-num3">00</div>
              </div>
              <div id="helpbtn">
                  <div id="helpbtn-body"></div>
                  <div id="helpbtn-bottom"></div>
              </div>
          </div>
          <div class="chat-messages" id="chat-messages">
            <h2 id="nmy" style="text-align: center;color: var(--primary-color);">no messages yet<a id="inscructionlink" onclick="instructionlinkclick()">instructions</a></h2>
          </div>
          <div id="chat-bottom">
              <input type="text" id="user-input" class="user-input" placeholder="Write AIlury...">
              <div id="searchbtn">⌕</div>
              <div id="sendbtn" onclick="sendMassaga()">➤</div>
          </div>
      </div>
  </section>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const usernameDisplay = document.getElementById("username-display");
      const userAvatar = document.getElementById("user-avatar");


      // Load user profile from localStorage
      loadUserProfile();
      checkvalueoc();

      function loadUserProfile() {
        const savedUsername = localStorage.getItem("username");
        const savedAvatar = localStorage.getItem("avatar");
        const backgroundImage = localStorage.getItem("backgroundImage");

        if (savedUsername) {
          usernameDisplay.textContent = savedUsername;
        }

        if (savedAvatar) {
          userAvatar.src = savedAvatar;
        }

        if (backgroundImage) {
          document.getElementById('chat').style.backgroundImage = `url(${backgroundImage})`;
        }
      }
    });

  </script>

  <h6 style="color: transparent;" id="remember"></h6>
  <h6 style="color: transparent;" id="bot-response"></h6>
  <h6 style="color: transparent;" id="idk">I dont know the answer. Please enter my answer to that question</h6>
  <script>
    let bimageInput = document.getElementById('bimage');

    function saveUserProfile(backgroundimg) {
      localStorage.setItem('backgroundImage', backgroundimg);
      const backgroundImage = localStorage.getItem("backgroundImage");
      if (backgroundImage) {
        console.log('Setting background image to:', backgroundImage);
        document.getElementById('chat').style.backgroundImage = `url(${backgroundImage})`;
      }
    }

    bimageInput.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function () {
          saveUserProfile(reader.result);
        }
        reader.readAsDataURL(file);
      }
    });

    let backgroundbtn = document.getElementById('backgroundbtn');
    backgroundbtn.addEventListener("click", function () {
      bimageInput.click();
      if (localStorage.getItem("backgroundImage")){
        localStorage.removeItem("backgroundImage");
      }
      document.getElementById('chat').style.backgroundImage = `none`;
    });
    let avatarinputinput = document.getElementById('avatarinputinput');
    function saveNewProfilePic(avatarimg) {
      localStorage.setItem('avatar', avatarimg);
      const avatarImage = localStorage.getItem("avatar");
      if (avatarImage) {
        console.log('Setting avatar image to:', avatarImage);
        document.getElementById('user-avatar').src = avatarImage;
      }
    }
    avatarinputinput.addEventListener("change", () => {
      const file = avatarinputinput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function () {
          saveNewProfilePic(reader.result);
        }
        reader.readAsDataURL(file);
      }
    });
    let profilebtn = document.getElementById('profilebtn');
    profilebtn.addEventListener("click", () => {
      avatarinputinput.click();
    });
    let logocontainer = document.getElementById('user-avatar');
    logocontainer.addEventListener("click", () => {
      avatarinputinput.click();
    });
    function logout() {
      window.location.href = "start.html";
    }
    let searchinputcontainer = document.querySelector(".searchinputcontainer");
    let searchchatdivbutton = document.getElementById("searchbtn");
    let chatSearchInput = document.getElementById('chatSearchInput');
    searchchatdivbutton.addEventListener("click", () => {
      if (searchinputcontainer.style.display == "flex"){
        searchinputcontainer.style.animation = "none";
        void searchinputcontainer.offsetWidth; // Trigger reflow
        searchinputcontainer.style.animation = "fadeOut 0.5s ease-out";
        setTimeout(function(){
          searchinputcontainer.style.display = "none";
          chatSearchInput.value = "";
          let amessagequeryselector = document.querySelectorAll('.message');
          if (amessagequeryselector){
            amessagequeryselector.forEach(element => {
              element.style.display = "block";
            });
          }
        }, 500);
      }else {
        searchinputcontainer.style.display = "flex";
        searchinputcontainer.style.animation = "none";
        void searchinputcontainer.offsetWidth; // Trigger reflow
        searchinputcontainer.style.animation = "fadeInDown 0.5s ease-in";
      }
    });
    let serachinputcrosscontainer = document.querySelector(".serachinputcrosscontainer");
    serachinputcrosscontainer.addEventListener("click", () => {
      searchinputcontainer.style.animation = "none";
      void searchinputcontainer.offsetWidth; // Trigger reflow
      searchinputcontainer.style.animation = "fadeOut 0.5s ease-out";
      setTimeout(function(){
        searchinputcontainer.style.display = "none";
        chatSearchInput.value = "";
        let amessagequeryselector = document.querySelectorAll('.message');
        if (amessagequeryselector){
          amessagequeryselector.forEach(element => {
            element.style.display = "block";
          });
        }
      }, 500);
    });
    chatSearchInput.addEventListener('input', () => {
      let amessagequeryselector = document.querySelectorAll('.message');
      if (amessagequeryselector){
        amessagequeryselector.forEach(element => {
          if (element.innerHTML.includes(chatSearchInput.value)){
            element.style.display = "block";
          }else{
            element.style.display = "none";
          }
        });
      }
    });
    const cards = [
        'A', 'A', 'B', 'B', 'C', 'C', 'D', 'D', 'E', 'E', 'F', 'F',
        'G', 'G', 'H', 'H', 'I', 'I', 'J', 'J', 'K', 'K', 'L', 'L', 'M', 'M', 'N', 'N', 'O', 'O'
    ];

    let playerScore = 0;
    let computerScore = 0;
    let flippedCards = [];
    let playerTurn = true;

    const gameBoard = document.getElementById('game-board');
    const playerScoreBoard = document.getElementById('player-score');
    const computerScoreBoard = document.getElementById('computer-score');

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function createBoard() {
        shuffle(cards);
        cards.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.classList.add('card');
            cardElement.dataset.value = card;
            cardElement.addEventListener('click', () => {
                if (playerTurn && flippedCards.length < 2 && !cardElement.classList.contains('flipped')) {
                    flipCard(cardElement);
                    checkMatch();
                }
            });
            gameBoard.appendChild(cardElement);
        });
    }

    function flipCard(card) {
        card.classList.add('flipped');
        card.innerHTML = card.dataset.value;
        flippedCards.push(card);
    }
    let memorygameyouwoncongrats = "Congratulations! You won!";
    let memorygameyoulostbetterlucknexttime = 'You lost! Better luck next time!';

    function checkMatch() {
        if (flippedCards.length === 2) {
            const [card1, card2] = flippedCards;
            if (card1.dataset.value === card2.dataset.value) {
                playerScore += 2;
                playerScoreBoard.textContent = playerScore;
                card1.classList.add('matched');
                card2.classList.add('matched');
                flippedCards = [];
                if (allCardsMatched()) {
                    if (playerScore > computerScore) {
                        showalert(`${memorygameyouwoncongrats}`);
                    } else if (playerScore < computerScore) {
                        showalert(`${memorygameyoulostbetterlucknexttime}`);
                    }
                    resetGame();
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.innerHTML = '';
                    card2.innerHTML = '';
                    flippedCards = [];
                    playerTurn = false;
                    setTimeout(computerMove2, 1000);
                }, 1000);
            }
        }
    }

    function computerMove2() {
        const availableCards = Array.from(document.querySelectorAll('.card:not(.flipped):not(.matched)'));
        if (availableCards.length < 2) return;

        const randomIndex1 = Math.floor(Math.random() * availableCards.length);
        let randomIndex2;
        do {
            randomIndex2 = Math.floor(Math.random() * availableCards.length);
        } while (randomIndex2 === randomIndex1);

        const card1 = availableCards[randomIndex1];
        const card2 = availableCards[randomIndex2];

        flipCard(card1);
        flipCard(card2);

        setTimeout(() => {
            if (card1.dataset.value === card2.dataset.value) {
                computerScore += 2;
                computerScoreBoard.textContent = computerScore;
                card1.classList.add('matched');
                card2.classList.add('matched');
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.innerHTML = '';
                card2.innerHTML = '';
            }
            flippedCards = [];
            playerTurn = true;
            if (allCardsMatched()) {
                if (playerScore > computerScore) {
                    showalert(`${memorygameyouwoncongrats}`);
                } else if (playerScore < computerScore) {
                    showalert(`${memorygameyoulostbetterlucknexttime}`);
                }
                resetGame();
            }
        }, 1000);
    }

    function allCardsMatched() {
        return document.querySelectorAll('.card.matched').length === cards.length;
    }

    function resetGame() {
        gameBoard.innerHTML = '';
        playerScore = 0;
        computerScore = 0;
        playerScoreBoard.textContent = playerScore;
        computerScoreBoard.textContent = computerScore;
        playerTurn = true;
        createBoard();
    }

    function startMemoryGame() {
        let gamecontainer2 = document.getElementById('gamecontainer2');
        gamecontainer2.style.display = 'block';
        gamecontainer2.style.animation = "none";
        void gamecontainer2.offsetWidth; // Trigger reflow
        gamecontainer2.style.animation = "fadeInDown 1s ease-in";
        gameBoard.innerHTML = '';
        resetGame();
    }

    function stopMemoryGame() {
        let gamecontainer2 = document.getElementById('gamecontainer2');
        gamecontainer2.style.animation = "none";
        void gamecontainer2.offsetWidth; // Trigger reflow
        gamecontainer2.style.animation = "fadeOut 1s ease-in";
        setTimeout(() => {
            gamecontainer2.style.display = 'none';
        }, 1000);
    }
    /* card game */
    let numberiw = 1;
    class Card {
        constructor(color, value) {
            this.color = color;
            this.value = value;
        }
    }

    let youwonplayertext = 'you won!';
    let youwoncomputertext = 'AIlury won!';

    class CardGame {
        constructor() {
            this.colors = ['red', 'blue', 'green', 'yellow'];
            this.values = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+2'];
            this.specialValues = ['+4', 'wild'];
            this.deck = [];
            this.playerHand = [];
            this.computerHand = [];
            this.discardPile = [];
            this.currentPlayer = 'player';
            this.initializeGame();
        }

        initializeGame() {
            this.createDeck();
            this.shuffleDeck();
            this.dealCards();
            this.startGame();
            this.render();
        }

        createDeck() {
            this.colors.forEach(color => {
                this.values.forEach(value => {
                    this.deck.push(new Card(color, value));
                    if (value !== '0') {
                        this.deck.push(new Card(color, value));
                    }
                });
            });
            this.specialValues.forEach(value => {
                for (let i = 0; i < 4; i++) {
                    this.deck.push(new Card('black', value));
                }
            });
        }

        shuffleDeck() {
            for (let i = this.deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
            }
        }

        dealCards() {
            for (let i = 0; i < 7; i++) {
                this.playerHand.push(this.deck.pop());
                this.computerHand.push(this.deck.pop());
            }
            this.discardPile.push(this.deck.pop());
        }

        startGame() {
            document.getElementById('draw-pile').addEventListener('click', () => this.drawCard());
        }

        drawCard() {
            if (this.currentPlayer === 'player') {
                this.playerHand.push(this.deck.pop());
                this.currentPlayer = 'computer';
                this.computerTurn();
            }
        }

        playCard(cardIndex) {
            if (this.currentPlayer === 'player') {
                const card = this.playerHand[cardIndex];
                const topCard = this.discardPile[this.discardPile.length - 1];
                if (this.canPlayCard(card, topCard)) {
                    this.discardPile.push(this.playerHand.splice(cardIndex, 1)[0]);
                    this.handleSpecialCard(card, 'player');
                    if (!this.isGameOver()) {
                        this.currentPlayer = 'computer';
                        this.render();
                        this.computerTurn();
                    }else {
                        new CardGame();
                    }
                }
            }
        }

        handleSpecialCard(card, player) {
            if (card.value === '+4') {
                if (player === 'player') {
                    this.drawMultipleCards(4, 'computer');
                } else {
                    this.drawMultipleCards(4, 'player');
                }
            } else if (card.value === '+2') {
                if (player === 'player') {
                    this.drawMultipleCards(2, 'computer');
                } else {
                    this.drawMultipleCards(2, 'player');
                }
            }
        }

        drawMultipleCards(count, player) {
            for (let i = 0; i < count; i++) {
                if (player === 'player') {
                    this.playerHand.push(this.deck.pop());
                } else {
                    this.computerHand.push(this.deck.pop());
                }
            }
        }

        canPlayCard(card, topCard) {
            return card.color === topCard.color || card.value === topCard.value || card.color === 'black' || topCard.color === 'black';
        }

        computerTurn() {
            setTimeout(() => {
                const topCard = this.discardPile[this.discardPile.length - 1];
                const playableCardIndex = this.computerHand.findIndex(card => this.canPlayCard(card, topCard));
                if (playableCardIndex > -1) {
                    const card = this.computerHand[playableCardIndex];
                    this.discardPile.push(this.computerHand.splice(playableCardIndex, 1)[0]);
                    this.handleSpecialCard(card, 'computer');
                    if (!this.isGameOver()) {
                        this.currentPlayer = 'player';
                    }else {
                        new CardGame();
                    }
                } else {
                    this.computerHand.push(this.deck.pop());
                    this.currentPlayer = 'player';
                }
                this.render();
            }, 700);
        }

        render() {
            this.renderHand('player', this.playerHand);
            this.renderHand('computer', this.computerHand, true);
            this.renderDeck();
        }

        renderHand(player, hand, hidden = false) {
            const handDiv = document.querySelector(`.${player}-hand`);
            handDiv.innerHTML = '';
            hand.forEach((card, index) => {
                const cardDiv = document.createElement('div');
                if (player == 'computer'){
                    cardDiv.className = `carde ${card.color} computer`;
                }else {
                    cardDiv.className = `carde ${card.color} player`;
                }
                cardDiv.innerHTML = hidden ? '' : card.value;
                cardDiv.addEventListener('click', () => this.playCard(index));
                handDiv.appendChild(cardDiv);
            });
        }


        renderDeck() {
            const topCard = this.discardPile[this.discardPile.length - 1];
            const discardPileDiv = document.getElementById('discard-pile');
            discardPileDiv.className = `carde ${topCard.color} deck`;
            discardPileDiv.innerHTML = topCard.value;
            discardPileDiv.style.animation = "none";
            void discardPileDiv.offsetWidth; // Trigger reflow
            discardPileDiv.style.animation = "addcard 0.5s ease-in";
        }

        isGameOver() {
            if (this.playerHand.length === 0) {
                showalert(`${youwonplayertext}`);
                return true;
            } else if (this.computerHand.length === 0) {
                showalert(`${youwoncomputertext}`);
                return true;
            }
            return false;
        }
    }

    function startCardGame() {
      let gamecontaiber1 = document.getElementById('gamecontainer1');
      gamecontaiber1.style.display = 'flex';
      gamecontaiber1.style.animation = "none";
      void gamecontaiber1.offsetWidth; // Trigger reflow
      gamecontaiber1.style.animation = "fadeInDown 1s ease-in";
      new CardGame();
    }
    function stopCardGame() {
      let gamecontaiber1 = document.getElementById('gamecontainer1');
      gamecontaiber1.style.animation = "none";
      void gamecontaiber1.offsetWidth; // Trigger reflow
      gamecontaiber1.style.animation = "fadeOut 1s ease-in";
      setTimeout(() => {
        gamecontaiber1.style.display = 'none';
      }, 1000);
    }
    let resetbtn = document.getElementById('resetbtn');
    resetbtn.addEventListener('click', () => {
        new CardGame();
    });
    /* not card game */
    /* tic tac toe game */
    const cells = document.querySelectorAll('.cell');
    const messagee = document.getElementById('messagee');
    const restartButton = document.getElementById('restart');
    let currentPlayer = 'X';
    let gameMode = 'single'; // 'single' for player vs computer, 'multi' for two players
    let board = Array(9).fill(null);
    let isGameOver = false;

    cells.forEach(cell => cell.addEventListener('click', handleCellClick));
    restartButton.addEventListener('click', startGame);

    function setMode(mode) {
        gameMode = mode;
        startGame();
    }

    function startGame() {
        board.fill(null);
        currentPlayer = 'X';
        isGameOver = false;
        messagee.textContent = '';
        cells.forEach(cell => {
            cell.textContent = '';
            cell.style.pointerEvents = 'auto';
        });
    }

    function handleCellClick(e) {
        const index = e.target.getAttribute('data-index');
        if (!isGameOver && !board[index]) {
            makeMove(index, currentPlayer);
            if (gameMode === 'single' && currentPlayer === 'O') {
                disableClicks();
                setTimeout(() => {
                    computerMove();
                    enableClicks();
                }, 500);
            }
        }
    }

    let winstext = 'wins';
    let drawtext = 'Draw';

    function makeMove(index, player) {
        board[index] = player;
        cells[index].textContent = player;
        cells[index].style.pointerEvents = 'none';
        if (checkWin(player)) {
            messagee.textContent = `${player} ${winstext}!`;
            isGameOver = true;
        } else if (board.every(cell => cell)) {
            messagee.textContent = `${drawtext}`;
            isGameOver = true;
        } else {
            currentPlayer = player === 'X' ? 'O' : 'X';
        }
    }

    function computerMove() {
        // Block two consecutive X's if possible
        for (let i = 0; i < board.length; i++) {
            if (board[i] === 'X') {
                const winPatterns = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8],
                    [0, 3, 6], [1, 4, 7], [2, 5, 8],
                    [0, 4, 8], [2, 4, 6]
                ];
                for (const pattern of winPatterns) {
                    if (pattern.includes(i)) {
                        const [a, b, c] = pattern;
                        if (board[a] === 'X' && board[b] === 'X' && !board[c]) {
                            return makeMove(c, 'O');
                        }
                        if (board[a] === 'X' && board[c] === 'X' && !board[b]) {
                            return makeMove(b, 'O');
                        }
                        if (board[b] === 'X' && board[c] === 'X' && !board[a]) {
                            return makeMove(a, 'O');
                        }
                    }
                }
            }
        }

        // Otherwise, make a random move
        let availableCells = [];
        board.forEach((cell, index) => {
            if (!cell) availableCells.push(index);
        });
        const randomIndex = availableCells[Math.floor(Math.random() * availableCells.length)];
        makeMove(randomIndex, 'O');
    }

    function checkWin(player) {
        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];
        return winPatterns.some(pattern => {
            return pattern.every(index => board[index] === player);
        });
    }

    function disableClicks() {
        cells.forEach(cell => cell.style.pointerEvents = 'none');
    }

    function enableClicks() {
        cells.forEach(cell => {
            if (!board[cell.getAttribute('data-index')]) {
                cell.style.pointerEvents = 'auto';
            }
        });
    }

    function startTicTacToeGame() {
      let gamecontaiber3 = document.getElementById('gamecontainer3');
      gamecontaiber3.style.display = 'flex';
      gamecontaiber3.style.animation = "none";
      void gamecontaiber3.offsetWidth; // Trigger reflow
      gamecontaiber3.style.animation = "fadeInDown 1s ease-in";
      startGame();
    }
    function stopTicTacToeGame() {
      let gamecontaiber3 = document.getElementById('gamecontainer3');
      gamecontaiber3.style.animation = "none";
      void gamecontaiber3.offsetWidth; // Trigger reflow
      gamecontaiber3.style.animation = "fadeOut 1s ease-in";
      setTimeout(() => {
        gamecontaiber3.style.display = 'none';
      }, 1000);
    }
    /* not tic tac toe game */
    /* tile tumble game*/
    const canvas = document.getElementById('tiletumble');
    const context = canvas.getContext('2d');

    context.scale(20, 20);

    const arena = createMatrix(15, 30);
    const colors = [
        null,
        '#FF0D72',
        '#0DC2FF',
        '#0DFF72',
        '#F538FF',
        '#FF8E0D',
        '#FFE138',
        '#3877FF',
    ];

    const player = {
        pos: { x: 0, y: 0 },
        matrix: null,
        score: 0,
    };

    function createMatrix(w, h) {
        const matrix = [];
        while (h--) {
            matrix.push(new Array(w).fill(0));
        }
        return matrix;
    }

    function createPiece(type) {
        if (type === 'T') {
            return [
                [0, 0, 0],
                [1, 1, 1],
                [0, 1, 0],
            ];
        } else if (type === 'O') {
            return [
                [2, 2],
                [2, 2],
            ];
        } else if (type === 'L') {
            return [
                [0, 3, 0],
                [0, 3, 0],
                [0, 3, 3],
            ];
        } else if (type === 'J') {
            return [
                [0, 4, 0],
                [0, 4, 0],
                [4, 4, 0],
            ];
        } else if (type === 'I') {
            return [
                [0, 5, 0, 0],
                [0, 5, 0, 0],
                [0, 5, 0, 0],
                [0, 5, 0, 0],
            ];
        } else if (type === 'S') {
            return [
                [0, 6, 6],
                [6, 6, 0],
                [0, 0, 0],
            ];
        } else if (type === 'Z') {
            return [
                [7, 7, 0],
                [0, 7, 7],
                [0, 0, 0],
            ];
        }
    }

    function drawMatrix(matrix, offset) {
        matrix.forEach((row, y) => {
            row.forEach((value, x) => {
                if (value !== 0) {
                    context.fillStyle = colors[value];
                    context.fillRect(x + offset.x, y + offset.y, 1, 1);
                }
            });
        });
    }

    function draw() {
        context.fillStyle = '#000';
        context.fillRect(0, 0, canvas.width, canvas.height);

        drawMatrix(arena, { x: 0, y: 0 });
        drawMatrix(player.matrix, player.pos);
    }

    function merge(arena, player) {
        player.matrix.forEach((row, y) => {
            row.forEach((value, x) => {
                if (value !== 0) {
                    arena[y + player.pos.y][x + player.pos.x] = value;
                }
            });
        });
    }

    function rotate(matrix, dir) {
        for (let y = 0; y < matrix.length; ++y) {
            for (let x = 0; x < y; ++x) {
                [
                    matrix[x][y],
                    matrix[y][x],
                ] = [
                    matrix[y][x],
                    matrix[x][y],
                ];
            }
        }
        if (dir > 0) {
            matrix.forEach(row => row.reverse());
        } else {
            matrix.reverse();
        }
    }

    function playerRotate(dir) {
        const pos = player.pos.x;
        let offset = 1;
        rotate(player.matrix, dir);
        while (collide(arena, player)) {
            player.pos.x += offset;
            offset = -(offset + (offset > 0 ? 1 : -1));
            if (offset > player.matrix[0].length) {
                rotate(player.matrix, -dir);
                player.pos.x = pos;
                return;
            }
        }
    }

    function playerDrop() {
        player.pos.y++;
        if (collide(arena, player)) {
            player.pos.y--;
            merge(arena, player);
            playerReset();
            arenaSweep();
            updateScore();
        }
        dropCounter = 0;
    }

    function playerMove(dir) {
        player.pos.x += dir;
        if (collide(arena, player)) {
            player.pos.x -= dir;
        }
    }

    function collide(arena, player) {
        const [m, o] = [player.matrix, player.pos];
        for (let y = 0; y < m.length; ++y) {
            for (let x = 0; x < m[y].length; ++x) {
                if (m[y][x] !== 0 &&
                    (arena[y + o.y] &&
                    arena[y + o.y][x + o.x]) !== 0) {
                    return true;
                }
            }
        }
        return false;
    }

    highscore = 0;

    function arenaSweep() {
        outer: for (let y = arena.length - 1; y > 0; --y) {
            for (let x = 0; x < arena[y].length; ++x) {
                if (arena[y][x] === 0) {
                    continue outer;
                }
            }
            const row = arena.splice(y, 1)[0].fill(0);
            arena.unshift(row);
            ++y;
            player.score += 10;
        }
    }

    function playerReset() {
        const pieces = 'TJLOSZI';
        player.matrix = createPiece(pieces[pieces.length * Math.random() | 0]);
        player.pos.y = 0;
        player.pos.x = (arena[0].length / 2 | 0) -
                       (player.matrix[0].length / 2 | 0);
        if (collide(arena, player)) {
            arena.forEach(row => row.fill(0));
            player.score = 0;
            updateScore();
        }
    }

    function updateScore() {
        document.getElementById('score').innerText = player.score;
    }

    let dropCounter = 0;
    let dropInterval = 500;

    let lastTime = 0;
    function update(time = 0) {
        const deltaTime = time - lastTime;
        lastTime = time;

        dropCounter += deltaTime;
        if (dropCounter > dropInterval) {
            playerDrop();
        }

        draw();
        requestAnimationFrame(update);
    }

    function resettiletumblegamec(){
      const pieces = 'TJLOSZI';
      player.matrix = createPiece(pieces[pieces.length * Math.random() | 0]);
      player.pos.y = 0;
      player.pos.x = (arena[0].length / 2 | 0) - (player.matrix[0].length / 2 | 0);
      arena.forEach(row => row.fill(0));
      player.score = 0;
      updateScore();
    }
    let resetbtntwo = document.getElementById('resetbtntwo');
    resetbtntwo.addEventListener('click', () => {
        resettiletumblegamec();
    });

    document.getElementById('left').addEventListener('click', () => playerMove(-1));
    document.getElementById('right').addEventListener('click', () => playerMove(1));
    document.getElementById('down').addEventListener('click', () => playerDrop());
    document.getElementById('rotate').addEventListener('click', () => playerRotate(1));

    function startTileTumbleGame() {
      let gamecontaiber4 = document.getElementById('gamecontainer4');
      gamecontaiber4.style.display = 'flex';
      gamecontaiber4.style.animation = "none";
      void gamecontaiber4.offsetWidth; // Trigger reflow
      gamecontaiber4.style.animation = "fadeInDown 1s ease-in";
      resettiletumblegamec();
      update();
    }
    /*playerReset();
    updateScore();
    update();*/
    function stopTileTumbleGame() {
      let gamecontaiber4 = document.getElementById('gamecontainer4');
      gamecontaiber4.style.animation = "none";
      void gamecontaiber4.offsetWidth; // Trigger reflow
      gamecontaiber4.style.animation = "fadeOut 1s ease-out";
      setTimeout(() => {
        gamecontaiber4.style.display = 'none';
      }, 1000);
    }
    /* not tile tumble game */
    let t1 = "do";
    let t2 = "do";
    let t3 = "do";
    let t4 = "do";
    let t5 = "do";
    let t6 = "do";
    let aotink = "0";
    let asktg = "no";
    let leicht1 = "";
    let leicht2 = "";
    let theoldanswer = "";
    let theoldanswer2 = "";
    let thequestion2 = "nothing";
    let theanswer2 = "nothing";
    let theoldmathanswer = "";
    let themathanswer = "";
    let themathquestion = "";
    let chalange = "nothing";
    let thequestion = "nothing";
    let theanswer = "nothing";
    let operator = "";
    let num1 = "";
    let num2 = "";
    let idnum = "0";
    let dark2 = "☾ Dark Theme";
    let light2 = "☼ Light Theme";
    let up_cross = document.querySelector('.up-cross');
    let up_container = document.querySelector('.up-container');
    let bell = document.querySelector('.bell');
    let bell_ball = document.querySelector('.redball');
    let hilfe_knopf = document.getElementById('helpbtn');
    let hilfe = document.querySelector('.hilfe');
    let hilfe_cross = document.querySelector('.hilfe-cross');
    let hilfeop1 = document.getElementById('hilfe-option1');
    let hilfeop2 = document.getElementById('hilfe-option2');
    let hilfeop3 = document.getElementById('hilfe-option3');
    let hilfeop4 = document.getElementById('hilfe-option4');
    let inputvaluefc = document.getElementById('user-input');
    let helptext = document.getElementById('helptext');
    let defaultchalange = "nothing";
    let isguessing = "no";
    let inscructionlink = document.getElementById('inscructionlink');
    let i_container = document.querySelector('.i-container');
    let i_cross = document.querySelector('.i-cross');
    let sidebar = document.getElementById('sidebarbtn');

    /*edit the .side::before*/
    let side_before = document.getElementById('sidebar-part2');
    let user_profile = document.getElementById('sidebar');
    let chat_container = document.getElementById('chat');
    let sideclick = 1;
    let tasks = [];
    let tasks2 = [];
    let EquizV = [];
    let GquizV = [];
    let EquizIndex = [];
    let GquizIndex = [];
    let isaskingitc = "no";
    let currentAnswer = '';
    let afteropening = "no";
    let timer_num1 = document.querySelector(".timer-num1");
    let timer_num2 = document.querySelector(".timer-num2");
    let timer_num3 = document.querySelector(".timer-num3");

    let totalmessages = 0;
    let oldtotalmessages = 0;

    let clickit = "no";

    function countdown(hours, minutes, seconds, mchallenge, number) {
        clickit = "no";
        let timer = hours * 3600 + minutes * 60 + seconds;
        if (mchallenge == "messages"){
          oldtotalmessages = totalmessages;
        }
        let timerInterval = setInterval(function () {
            let hours = Math.floor(timer / 3600);
            let minutes = Math.floor((timer % 3600) / 60);
            let seconds = timer % 60;

            timer_num1.innerHTML = (hours < 10 ? "0" : "") + hours;
            timer_num2.innerHTML = (minutes < 10 ? "0" : "") + minutes;
            timer_num3.innerHTML = (seconds < 10 ? "0" : "") + seconds;

            timer--;
            if (timer < 0) {
                clearInterval(timerInterval);
                timer_num1.innerHTML = "00";
                timer_num2.innerHTML = "00";
                timer_num3.innerHTML = "00";
                updateNumber(mchallenge, number);
            }
        }, 1000);
    }
    function pausecountdownreset() {
      clickit = "no";
      chooseRandomChallangeNow();
    }
    function countdown2(hours, minutes, seconds) {
        clickit = "no";
        let timer = hours * 3600 + minutes * 60 + seconds;
        let timerInterval = setInterval(function () {
            let hours = Math.floor(timer / 3600);
            let minutes = Math.floor((timer % 3600) / 60);
            let seconds = timer % 60;

            timer_num1.innerHTML = (hours < 10 ? "0" : "") + hours;
            timer_num2.innerHTML = (minutes < 10 ? "0" : "") + minutes;
            timer_num3.innerHTML = (seconds < 10 ? "0" : "") + seconds;

            timer--;
            if (timer < 0) {
                clearInterval(timerInterval);
                timer_num1.innerHTML = "00";
                timer_num2.innerHTML = "00";
                timer_num3.innerHTML = "00";
                pausecountdownreset();
            }
        }, 1000);
    }
    let chooseChallange = ["messages", "math", "quiz", "german", "clickrandom", "clickchagemood"];

    function chooseRandomChallangeNow() {
        clickit = "no";
        let randomI = Math.floor(Math.random() * chooseChallange.length);
        let randomChallange = chooseChallange[randomI];
        let randomnumber = Math.floor(Math.random() * 25) + 1;
        let randomtimeinminutes = Math.floor(Math.random() * 2) + 1;
        let randomtimeinseconds = Math.floor(Math.random() * 59) + 1;
        manegeChallenges(randomChallange, 0, randomtimeinminutes, randomtimeinseconds, randomnumber);
    }
    let youfailedChallenge = "you failed the challenge try a new challenge in 5 minutes";
    let youpassedChallenge = "great you passed the challenge";
    let textsend = "send";
    let textmessages = "messages";
    let textpracticemath = "practice math";
    let textplayquiz = "play the quiz";
    let textpracticegerman = "practice german";

    let textclickrandom = "click the \"random\" button";
    let textclickchagemood = "click the \"light/dark\" button";

    let therandombuttonwasclicked = "no";
    let thedarklightthemebuttonwasclicked = "no";

    function addSingleClickListener(element, targetValue) {
      // Entferne vorherige Event Listener (falls vorhanden)
      element.removeEventListener('click', handleClick3);

      // Definiere die Click-Handler-Funktion
      function handleClick3() {
        // Setze die Variable auf true
        if (targetValue == "random"){
          therandombuttonwasclicked = "yes";
        }else if (targetValue == "darklight"){
          thedarklightthemebuttonwasclicked = "yes";
        }
        element.removeEventListener('click', handleClick3);
      }

      // Füge den neuen Event Listener hinzu
      element.addEventListener('click', handleClick3);
    }

    function updateNumber(mchallenge, number) {
      clickit = "no";
      if (mchallenge == "messages"){
        let totalmessages2 = totalmessages - oldtotalmessages;
        totalmessages2 = totalmessages2 / 2;
        totalmessages2 = Math.round(totalmessages2);
        let alertbtn = document.getElementById('alertmessagebtn');
        if (totalmessages2 < number){
          showalert(youfailedChallenge);
        }else {
          showalert(youpassedChallenge);
        }
        countdown2(0, 5, 0);
      }else if (mchallenge == "math"){
        let alertbtn = document.getElementById('alertmessagebtn');
        if (chalange == "math"){
          showalert(youpassedChallenge);
        }else if (chalange == "mathe"){
          showalert(youpassedChallenge);
        }else {
          showalert(youfailedChallenge);
        }
        countdown2(0, 5, 0);
      }else if (mchallenge == "quiz"){
        let alertbtn = document.getElementById('alertmessagebtn');
        if (chalange == "Equiz"){
          showalert(youpassedChallenge);
        }else if (chalange == "Gquiz"){
          showalert(youpassedChallenge);
        }else {
          showalert(youfailedChallenge);
        }
        countdown2(0, 5, 0);
      }else if (mchallenge == "german"){
        let alertbtn = document.getElementById('alertmessagebtn');
        if (chalange == "german"){
          showalert(youpassedChallenge);
        }else if (chalange == "englisch"){
          showalert(youpassedChallenge);
        }else {
          showalert(youfailedChallenge);
        }
        countdown2(0, 5, 0);
      }else if (mchallenge == "clickrandom"){
        let alertbtn = document.getElementById('alertmessagebtn');
        if (therandombuttonwasclicked == "yes"){
          showalert(youpassedChallenge);
        }else {
          showalert(youfailedChallenge);
        }
        countdown2(0, 5, 0);
      }else if (mchallenge == "clickchagemood"){
        let alertbtn = document.getElementById('alertmessagebtn');
        if (thedarklightthemebuttonwasclicked == "yes"){
          showalert(youpassedChallenge);
        }else {
          showalert(youfailedChallenge);
        }
        countdown2(0, 5, 0);
      }
    }

    function manegeChallenges(mchallenge, hours, minutes, seconds, number) {
      if (mchallenge == "messages"){
        showalert(`${textsend} ${number} ${textmessages}`);
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }else if (mchallenge == "math"){
        showalert(`${textpracticemath}`);
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }else if (mchallenge == "quiz"){
        showalert(`${textplayquiz}`);
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }else if (mchallenge == "german"){
        showalert(`${textpracticegerman}`);
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }else if (mchallenge == "clickrandom"){
        showalert(`${textclickrandom}`);
        let randombuttonelement = document.getElementById('circle3');
        document.querySelectorAll(".RandomQuestion").forEach(function(element) {
          addSingleClickListener(element, "random");
        });
        addSingleClickListener(randombuttonelement, "random");
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }else if (mchallenge == "clickchagemood"){
        showalert(`${textclickchagemood}`);
        let chagemoodelement = document.getElementById('circle4');
        addSingleClickListener(chagemoodelement, "darklight");
        let changethemeelement = document.getElementById('changethemebtn');
        addSingleClickListener(changethemeelement, "darklight");
        let bcftelement = document.querySelector('.bcft');
        addSingleClickListener(bcftelement, "darklight");
        let alertbtn = document.getElementById('alertmessagebtn');
        clickit = "yes";
        function countdowncomand() {
          countdown(hours, minutes, seconds, mchallenge, number);
        }
        alertbtn.addEventListener('click', handleAlertBtnClick);

        function handleAlertBtnClick() {
          if (clickit == "yes") {
            countdowncomand();
            clickit = "no";
            alertbtn.removeEventListener('click', handleAlertBtnClick); // Entferne den Listener nach dem ersten Klick
          }
        }
      }
    }

    setTimeout(function() {
      manegeChallenges("messages", 0, 0, 30, 2);
    }, 5500);

    function showalert(AlertText){
        let alertbtn = document.getElementById('alertmessagebtn');
        let alertmessage = document.getElementById('alertmessage');
        let alertelement = document.getElementById('alertElement');

        if (!alertbtn || !alertmessage || !alertelement) {
            console.error('Alert elements not found');
            return;
        }

        alertmessage.textContent = AlertText;
        alertmessage.style.display = "block";
        alertbtn.style.display = "block";
        alertelement.style.display = "flex";
        alertbtn.style.animation = "none";
        void alertbtn.offsetWidth; // Trigger reflow
        alertbtn.style.animation = "fadeIn 1s ease-in";
        alertmessage.style.animation = "none";
        void alertmessage.offsetWidth; // Trigger reflow
        alertmessage.style.animation = "fadeIn 1s ease-in";
        alertelement.style.animation = "none";
        void alertelement.offsetWidth; // Trigger reflow
        alertelement.style.animation = "fadeIn 1s ease-in";

        const hideAlert = () => {
            alertbtn.style.animation = "none";
            void alertbtn.offsetWidth; // Trigger reflow
            alertbtn.style.animation = "fadeOut 1s ease-out";
            alertmessage.style.animation = "none";
            void alertmessage.offsetWidth; // Trigger reflow
            alertmessage.style.animation = "fadeOut 1s ease-out";
            alertelement.style.animation = "none";
            void alertelement.offsetWidth; // Trigger reflow
            alertelement.style.animation = "fadeOut 1s ease-out";

            setTimeout(() => {
                alertmessage.style.display = "none";
                alertbtn.style.display = "none";
                alertelement.style.display = "none";
            }, 1000);
        };

        alertbtn.removeEventListener("click", hideAlert); // Ensure no duplicate listeners
        alertbtn.addEventListener("click", hideAlert);
    }
    let chat_bottom = document.getElementById("chat-bottom");
    function hideandshowsidebar() {
      if (sideclick == 1){
        let maincontainer = document.getElementById('sidebar');
        // (300px - 25vw) + 25vw
        let nvwvwnumber = 300 - (25 * window.innerWidth / 100) + 25 * window.innerWidth / 100;
        // check if nvwvwnumber > 25vw
        if (nvwvwnumber > (25 * window.innerWidth / 100)){
          maincontainer.style.marginLeft = `-${nvwvwnumber}px`;
        }else {
          maincontainer.style.marginLeft = `-25vw`;
        }
        if (window.innerWidth > 750){
          chat_bottom.style.width = `95vw`;
        }else{
          chat_bottom.style.width = `90vw`;
        }
        chat_container.style.width = "100%";
        side_before.style.background = "transparent";
        sideclick = 2;
      }else if (sideclick == 2){
        /* do that while the media is at min-width: 750px*/
        let maincontainer = document.getElementById('sidebar');
        maincontainer.style.marginLeft = "0";
        if (window.innerWidth > 750){
          chat_container.style.width = "75vw";
        }else {
          chat_container.style.width = "100%";
        }
        if (window.innerWidth > 750){
          chat_bottom.style.width = `70vw`;
        }else{
          chat_bottom.style.width = `90vw`;
        }
        side_before.style.background = "var(--primary-color)";
        sideclick = 1;
      }
    }
    sidebar.addEventListener("click", () => {
      hideandshowsidebar();
    });
    function handleResize() {
      user_profile.style.marginLeft = "0";
      chat_container.style.width = "100%";
      side_before.style.background = "var(--primary-color)";
      sideclick = 1;
      let maincontainer = document.getElementById('sidebar');
      maincontainer.style.marginLeft = "0";
      if (window.innerWidth > 750){
        chat_bottom.style.width = `70vw`;
      }else{
        chat_bottom.style.width = `90vw`;
      }
    }
    // Füge den Event-Listener für das resize-Event hinzu
    window.addEventListener("resize", handleResize);
    let iwtpteg = "i want to play the emoji game!";
    let iwtpg = "i want to practice german!";
    let iwtptq = "i want to play the quiz!";
    let iwtpm = "i want to practice math!";
    function checkvalueoc() {
      defaultchalange = chalange;
      helptext.textContent = "whats your problem?";
      helptext.textContent = "whats your problem?";
      hilfe.style.animation = "none";
      void hilfe.offsetWidth;
      hilfe.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        hilfe.style.display = "none";
      }, 200);
      if (chalange == "nothing" && isguessing == "no") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = iwtpteg;
        hilfeop2.textContent = iwtpg;
        hilfeop3.textContent = iwtptq;
        hilfeop4.textContent = iwtpm;
        if (afteropening == "yes"){
          showalert("you are back in the normal conversation now!");
        }
      } if (chalange == "nothing" && isguessing == "nein") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = iwtpteg;
        hilfeop2.textContent = iwtpg;
        hilfeop3.textContent = iwtptq;
        hilfeop4.textContent = iwtpm;
        if (afteropening == "yes"){
          showalert("you are back in the normal conversation now!");
        }
      } else if (chalange == "german") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "i want to go back to the normal conversation!";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        if (afteropening == "yes"){
          showalert("you're practicing german now!");
        }
      } else if (chalange == "englisch") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        hilfeop1.textContent = "ich möchte zurück in die normale konversation!";
        hilfeop2.textContent = "ich weiss die antwort nicht!";
        if (afteropening == "yes"){
          showalert("du übst nun englisch!");
        }
      } else if (chalange == "math") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "its to hard!";
        hilfeop3.textContent = "i want to go back to the normal conversation!";
        hilfeop4.textContent = "its to easy!";
        if (afteropening == "yes"){
          showalert("you're practicing math now!");
        }
      } else if (chalange == "mathe") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "ich weiss die antwort nicht!";
        hilfeop2.textContent = "es ist zu schwer!";
        hilfeop3.textContent = "ich möchte zurück in die normale conversation!";
        hilfeop4.textContent = "es ist zu leicht!";
        if (afteropening == "yes"){
          showalert("du übst nun mathe!");
        }
      } else if (chalange == "nothing" && isguessing == "yes") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "i want to go back to the normal conversation!";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        if (afteropening == "yes"){
          showalert("you are playing the emoji game now!");
        }
      } else if (chalange == "nothing" && isguessing == "ja") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        hilfeop1.textContent = "ich möchte zurück in die normale konversation!";
        hilfeop2.textContent = "ich weiss die antwort nicht!";
        if (afteropening == "yes"){
          showalert("du spielst jetzt das emoji spiel!");
        }
      }else if (chalange == "Equiz") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "i want to go back to the normal conversation!";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        if (afteropening == "yes"){
          showalert("you're playing the quiz now!");
        }
      } else if (chalange == "Gquiz") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        hilfeop1.textContent = "ich möchte zurück in die normale konversation!";
        hilfeop2.textContent = "ich weiss die antwort nicht!";
        if (afteropening == "yes"){
          showalert("du spielst nun das quiz!");
        }
      }
    }

    hilfeop1.addEventListener("click", () => {
      if (hilfeop1.textContent == "i want to play the emoji game!") {
        inputvaluefc.value = "i want to play the emoji game";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop1.textContent == "ich möchte das emoji spiel spielen!") {
        inputvaluefc.value = "ich möchte das emoji spiel spielen";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop1.textContent == "i dont know the answer!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop1.textContent == "ich weiss die antwort nicht!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop1.textContent == "ich möchte zurück in die normale conversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop1.textContent == "ich möchte zurück in die normale konversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop2.addEventListener("click", () => {
      if (hilfeop2.textContent == "i want to practice german!") {
        inputvaluefc.value = "i want to practice german";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop2.textContent == "ich möchte englisch üben!") {
        inputvaluefc.value = "ich möchte englisch üben";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop2.textContent == "i want to go back to the normal conversation!") {
        inputvaluefc.value = "i want to go back to the normal chat";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop2.textContent == "ich weiss die antwort nicht!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop2.textContent == "es ist zu schwer!") {
        leicht1 = "leicht";
        helptext.textContent = "du bist jetzt auf einfachen modus";
      } else if (hilfeop2.textContent == "its to hard!") {
        leicht2 = "easy";
        helptext.textContent = "its easy now!";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop3.addEventListener("click", () => {
      if (hilfeop3.textContent == "i want to play the quiz!") {
        inputvaluefc.value = "i want to play the quiz";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop3.textContent == "ich möchte das quiz spielen!") {
        inputvaluefc.value = "ich möchte das quiz spielen";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop3.textContent == "i want to go back to the normal conversation!") {
        inputvaluefc.value = "i want to go back to the normal chat";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop3.textContent == "ich möchte zurück in die normale conversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop4.addEventListener("click", () => {
      if (hilfeop4.textContent == "i want to practice math!") {
        inputvaluefc.value = "i want to practice math";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop4.textContent == "ich möchte mathe üben!") {
        inputvaluefc.value = "ich möchte mathe üben";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop4.textContent == "its to easy!") {
        leicht2 = "";
        helptext.textContent = "now its not in easy mode!";
      } else if (hilfeop4.textContent == "es ist zu leicht!") {
        leicht1 = "";
        helptext.textContent = "ich habe den einfachen modus deaktiviert!";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    function clean() {
      aotink = "0";
      asktg = "no";
      leicht1 = "";
      leicht2 = "";
      operator = "";
      num1 = "";
      num2 = "";
      theoldanswer = "";
      theoldanswer2 = "";
      thequestion2 = "nothing";
      theanswer2 = "nothing";
      theoldmathanswer = "";
      themathanswer = "";
      themathquestion = "";
      thequestion = "nothing";
      theanswer = "nothing";
      tasks = [];
      tasks2 = [];
      EquizV = [];
      GquizV = [];
      EquizIndex = [];
      GquizIndex = [];
      isaskingitc = "no";
      currentAnswer = '';
      afteropening = "yes";
      checkvalueoc();
    }
    up_cross.addEventListener("click", () => {
      up_container.style.animation = "none";
      void up_container.offsetWidth;
      up_container.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        up_container.style.display = "none";
      }, 200);
    });
    i_cross.addEventListener("click", () => {
      i_container.style.animation = "none";
      void i_container.offsetWidth;
      i_container.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        i_container.style.display = "none";
      }, 200);
    });
    inscructionlink.addEventListener("click", () => {
      i_container.style.display = "flex";
      i_container.style.animation = "none";
      void i_container.offsetWidth;
      i_container.style.animation = "fadeIn 0.2s ease-out";
    });
    hilfe_cross.addEventListener("click", () => {
      helptext.textContent = "whats your problem?";
      hilfe.style.animation = "none";
      void hilfe.offsetWidth;
      hilfe.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        hilfe.style.display = "none";
      }, 200);
    });
    bell.addEventListener("click", () => {
      up_container.style.display = "flex";
      up_container.style.animation = "none";
      void up_container.offsetWidth;
      up_container.style.animation = "fadeIn 0.2s ease-out";
      bell_ball.style.animation = "none";
      void bell_ball.offsetWidth;
      bell_ball.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        bell_ball.style.display = "none";
      }, 200);
    });
    hilfe_knopf.addEventListener("click", () => {
      hilfe.style.display = "block";
      hilfe.style.animation = "none";
      void hilfe.offsetWidth;
      hilfe.style.animation = "fadeIn 0.2s ease-out";
    });
    // Function to handle message element click
    const allEmojis1 = ["😀", "😁", "😂", "🤣", "😃", "😄", "😅", "😆", "😉", "😊", "😋", "😎", "😍", "😘", "😗", "😙", "😚", "☺️", "🙂", "🤗", "🤩", "🤔", "🤨", "😐", "😑", "😶", "🙄", "😏", "😣", "😥", "😮", "🤐", "😯", "😪", "😫", "😴", "😌", "😛", "😜", "😝", "🤤", "😒", "😓", "😔", "😕", "🙃", "🤑", "😲", "☹️", "🙁", "😖", "😞", "😟", "😤", "😢", "😭", "😦", "😧", "😨", "😩", "🤯", "😬", "😰", "😱", "🥵", "🥶", "😳", "🤪", "😵", "😡", "😠", "🤬", "😷", "🤒", "🤕", "🤢", "🤮", "🤧", "😇", "🥳", "🥺", "🤠", "🤡", "🤥", "🤫", "🤭", "🧐", "🤓", "😈", "👿", "👹", "👺", "💀", "☠️", "👻", "👽", "👾", "🤖", "😺", "😸", "😹", "😻", "😼", "😽", "🙀", "😿", "😾"];
    const allEmojis2 = ["😀", "😁", "😃", "😄", "😆"];
    const allEmojis3 = ["😈", "👿"];
    const allEmojis4 = ["💀", "☠️", "👻"];
    const allEmojis5 = ["😺", "😸", "😹", "😻", "😼", "😽", "🙀", "😿", "😾"];
    const allEmojis6 = ["😨", "😰", "😱"];
    const allEmojis7 = ["🤑", "🤢", "🤮"];
    const allEmojis8 = ["😊", "😗", "😙", "😚", "☺️", "🙂", "🤗", "😳"];
    const allEmojis9 = ["😌", "😔", "😉"];
    const allEmojis10 = ["❤️", "💔", "❤️‍🔥", "❤️‍🩹", "❣️", "🩷", "♥️"];
    const allEmojis11 = ["🕔", "🕚", "🕠", "🕦", "🕕", "🕛", "🕡", "🕧", "🕐", "🕖", "🕜", "🕣", "🕢", "🕑", "🕗", "🕝", "🕒", "🕘", "🕞", "🕤", "🕓", "🕙", "🕟", "🕥"];
    const allEmojis12 = ["🔐", "🔒", "🔓", "🔏"];
    const allEmojis13 = ["😍", "😘", "🥰", "☺️", "😚"];
    const allEmojis14 = ["😗", "😙", "😚"];
    const allEmojis15 = ["😋", "😛", "😜"];
    const allEmojis16 = ["📪", "📫", "📬", "📭"];
    const allEmojis17 = ["📥", "📤"];
    const allEmojis18 = ["🛏️", "🛌"];
    const allEmojis = [allEmojis2, allEmojis3, allEmojis4, allEmojis5, allEmojis6, allEmojis7, allEmojis8, allEmojis9, allEmojis10, allEmojis11, allEmojis12, allEmojis13, allEmojis14, allEmojis15, allEmojis16, allEmojis17, allEmojis18];

    let differentEmoji;
    let differentEmojiPosition;
    let theG;
    let otherEmojis;
    function getRandomEmoji() {
      checkvalueoc();
      let emojiG = allEmojis[Math.floor(Math.random() * allEmojis.length)];
      theG = emojiG;
      otherEmojis = emojiG[Math.floor(Math.random() * emojiG.length)];
      return otherEmojis;
    }
    function getRandomEmoji2() {
      return theG[Math.floor(Math.random() * theG.length)];
    }

    function generateEmojis() {
      const baseEmoji = getRandomEmoji();
      let returnobjekt = [];
      do {
        differentEmoji = getRandomEmoji2();
      } while (differentEmoji === baseEmoji);

      differentEmojiPosition = Math.floor(Math.random() * 40);
      for (let i = 0; i < 40; i++) {
        returnobjekt.push(i === differentEmojiPosition ? differentEmoji : baseEmoji);
      }
      return returnobjekt;
    }
    function checkGuess(input) {
      let returnthis = "";
      if (parseInt(input) - 1 === differentEmojiPosition) {
        returnthis = 'right';
      } else {
        returnthis = 'wrong';
      }
      return returnthis;
    }
    function handleEditMessage(event) {
        const clickedElement = event;
        const backgroundColor = window.getComputedStyle(clickedElement).getPropertyValue('background-color').toLowerCase();

        // Hide all sidebar buttons
        document.querySelectorAll('.sidebar-button').forEach(button => {
            button.style.display = 'none';
        });

        if (clickedElement.classList.contains('sent')) {
            toggleBorder(clickedElement);

            const messageContent = clickedElement.textContent;
            const messageID = clickedElement.dataset.id;
            const löschbtn = document.getElementById('Löschbtn');
            const editbtn = document.getElementById('Editbtn');
            const Breakbtn = document.getElementById('Breakbtn');
            const Copybtn = document.getElementById('Copybtn');

            // Show delete button and add delete event listener
            showButton(Copybtn, () => {
              document.querySelectorAll('.border-active').forEach(borderElement => {
                resetButtonsAndBorders(borderElement);
              });
              copyTextFromElement(clickedElement);
            });

            /*showButton(löschbtn, () => {
                if (clickedElement.classList.contains('border-active')) {
                    resetButtonsAndBorders(clickedElement);
                    clickedElement.remove();
                }
            });*/
            showButton(löschbtn, () => {
              document.querySelectorAll('.border-active').forEach(borderElement => {
                resetButtonsAndBorders(borderElement);
                borderElement.remove();
              });
            });

            // Show edit button and add edit event listener
            showButton(editbtn, () => {
                if (clickedElement.classList.contains('border-active')) {
                    handleEdit(clickedElement, messageContent);
                }
            });

            // Show break button to cancel operation
            showButton(Breakbtn, () => {
                //resetButtonsAndBorders(clickedElement);
                document.querySelectorAll('.border-active').forEach(borderElement => {
                  resetButtonsAndBorders(borderElement);
                });
                document.querySelectorAll('.sidebar-button').forEach(button => {
                  button.style.display = 'block';
                });
                document.getElementById('Löschbtn').style.display = 'none';
                document.getElementById('Editbtn').style.display = 'none';
                document.getElementById('Breakbtn').style.display = 'none';
                document.getElementById('Copybtn').style.display = 'none';
            });
        } else {
            // Toggle border for non-sent elements
            toggleBorder(clickedElement);

            const löschbtn = document.getElementById('Löschbtn');
            const Breakbtn = document.getElementById('Breakbtn');
            const Copybtn = document.getElementById('Copybtn');

            // Show delete button and add delete event listener
            showButton(Copybtn, () => {
              document.querySelectorAll('.border-active').forEach(borderElement => {
                resetButtonsAndBorders(borderElement);
              });
              copyTextFromElement(clickedElement);
            });

            // Show delete button for non-sent messages
            /*showButton(löschbtn, () => {
                if (clickedElement.classList.contains('border-active')) {
                    resetButtonsAndBorders(clickedElement);
                    clickedElement.remove();
                }
            });*/
            showButton(löschbtn, () => {
              document.querySelectorAll('.border-active').forEach(borderElement => {
                resetButtonsAndBorders(borderElement);
                borderElement.remove();
              });
            });
            

            // Show break button for non-sent messages
            showButton(Breakbtn, () => {
                //resetButtonsAndBorders(clickedElement);
                document.querySelectorAll('.border-active').forEach(borderElement => {
                  resetButtonsAndBorders(borderElement);
                });
                document.querySelectorAll('.sidebar-button').forEach(button => {
                  button.style.display = 'block';
                });
                document.getElementById('Löschbtn').style.display = 'none';
                document.getElementById('Editbtn').style.display = 'none';
                document.getElementById('Breakbtn').style.display = 'none';
                document.getElementById('Copybtn').style.display = 'none';
            });
        }
    }

    // Toggle border for the clicked element
    function toggleBorder(element) {
        if (element.classList.contains('border-active')) {
            element.style.border = 'none';
            element.classList.remove('border-active');
        } else {
            element.style.border = '2px solid #ff0077';
            /*element.style.borderImage = 'linear-gradient(90deg, #ff0077, #7700ff)';
            element.style.borderImageSlice = '1';
            element.style.borderRadius = '40px';*/
            element.classList.add('border-active');
            
        }
    }
    
    function copyTextFromElement(element) {
        // Erstelle ein Eingabefeld
        const ctfeinput = document.createElement('input');
        ctfeinput.type = 'text';
        ctfeinput.value = element.textContent;
        document.body.appendChild(ctfeinput);
        
        // Fokussiere und wähle den Text im Eingabefeld aus
        ctfeinput.select();
        document.execCommand('copy');
        
        // Lösche das Eingabefeld
        document.body.removeChild(ctfeinput);
    }
    
    // Show button and add event listener
    function showButton(button, callback) {
        button.style.display = 'block';
        button.onclick = callback;
    }

    // Reset all buttons and borders when cancelling
    function resetButtonsAndBorders(element) {
        document.querySelectorAll('.sidebar-button').forEach(button => {
            button.style.display = 'block';
        });
        document.getElementById('Löschbtn').style.display = 'none';
        document.getElementById('Editbtn').style.display = 'none';
        document.getElementById('Breakbtn').style.display = 'none';
        document.getElementById('Copybtn').style.display = 'none';
        element.style.border = 'none';
        element.classList.remove('border-active');
    }

    // Handle editing the message
    function handleEdit(element, originalContent) {
        const inputElement = document.createElement('input');
        inputElement.type = 'text';
        inputElement.value = originalContent;

        // Replace message with input for editing
        element.textContent = '';
        element.appendChild(inputElement);
        let theId = element.id;

        inputElement.focus();

        // Save the edited message on input blur
        inputElement.addEventListener('blur', function () {
            saveEditedMessage(element, inputElement);
        });

        // Reset all other elements
        document.querySelectorAll('.sidebar-button').forEach(button => {
            button.style.display = 'block';
        });
        //resetButtonsAndBorders(element);
        document.querySelectorAll('.border-active').forEach(borderElement => {
            resetButtonsAndBorders(borderElement);
        });

        // Remove elements with a higher ID
        document.querySelectorAll('.sent, .received').forEach(item => {
            if (parseInt(item.id) > parseInt(theId)) {
                item.remove();
            }
        });
    }

    function saveEditedMessage(messageElement, inputElement) {
      const editedMessage = inputElement.value;

      messageElement.textContent = editedMessage;
      if (editedMessage !== '') {
        // Simulierte Antwort vom Bot
        getBotResponse(editedMessage)
          .then(response => {

            setTimeout(addMessage, 500, response, 'received')
            document.getElementById('bot-response').textContent = response;
            // Hier wird der Wert des <h1>-Elements aktualisiert
            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));
      }
    }
    let tc1fe = 'if you click the speak button you can make the bot read the chat or not';
    let tc2fe = 'you can change the theme with this button';
    let tc3fe = 'click this button if you do not know how to start a conversation';
    let tc4fe = 'if you click the speak button you can make the bot read the chat or not';
    let tc5fe = 'you can change the theme with this button';
    let tc6fe = 'click this button if you do not know how to start a conversation';
    let tc7fe = 'your profile picture is here, if you uploaded one!';
    let tc8fe = 'your user-name is here, if you have one!';
    let tc9fe = 'by clicking this button the language changes to german';
    let idkanswer = 'sorry but i have no idea what to answer 😅';
    /*const messageElements = document.querySelectorAll('.message');
    messageElements.forEach(messageElement => {
      messageElement.addEventListener('click', () => {
        handleEditMessage();
      });
    });*/
    // real v
    function sendMassaga() {
      document.getElementById("remember").textContent = document.getElementById("user-input").value;
      document.getElementById("nmy").style.display = "none";
      let button1 = document.getElementById("sendbtn");
      button1.style.animation = "none";
      void button1.offsetWidth;
      button1.style.animation = "sendAnimation 1s ease-out";
      //say();


      setTimeout(sendMessage, 100);
    }

    function sendMessage() {
      var userInput = document.getElementById('user-input');
      var userMessage = userInput.value.trim();
      if (userMessage !== '') {
        addMessage(userMessage, 'sent');

        // Simulierte Antwort vom Bot
        getBotResponse(userMessage)
          .then(response => {

            setTimeout(addMessage, 500, response, 'received')
            document.getElementById('bot-response').textContent = response;
            // Hier wird der Wert des <h1>-Elements aktualisiert
            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));

        userInput.value = '';



      }
    }
    async function loadKnowledgeBase(filePath) {
      const response = await fetch(filePath);
      const data = await response.json();
      return data;
    }

    // Funktion zum Speichern der Wissensbasis in einer JSON-Datei (nicht im reinen Browser-JavaScript möglich)

    // Funktion zur besten Übereinstimmung
    function getHighestSimilarityPercentage(questions, input) {
        function similarity(str1, str2) {
            let longer = str1.length > str2.length ? str1 : str2;
            let shorter = str1.length > str2.length ? str2 : str1;
            let longerLength = longer.length;

            if (longerLength === 0) {
                return 1.0;
            }

            let editDistance = getEditDistance(longer, shorter);
            return (longerLength - editDistance) / parseFloat(longerLength);
        }

        function getEditDistance(str1, str2) {
            let costs = [];
            for (let i = 0; i <= str1.length; i++) {
                let lastValue = i;
                for (let j = 0; j <= str2.length; j++) {
                    if (i === 0) {
                        costs[j] = j;
                    } else {
                        if (j > 0) {
                            let newValue = costs[j - 1];
                            if (str1.charAt(i - 1) !== str2.charAt(j - 1)) {
                                newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                            }
                            costs[j - 1] = lastValue;
                            lastValue = newValue;
                        }
                    }
                }
                if (i > 0) {
                    costs[str2.length] = lastValue;
                }
            }
            return costs[str2.length];
        }

        let highestSimilarity = 0;

        for (let question of questions) {
            let similarityPercentage = similarity(question, input) * 100;
            if (similarityPercentage > highestSimilarity) {
                highestSimilarity = similarityPercentage;
            }
        }

        return highestSimilarity;
    }

    function findBestMatch(userQuestion, questions) {
        let bestMatch = null;
        let bestScore = 60; // Schwellenwert für die Ähnlichkeit in Prozent
        let bestSimilarity = 0;

        for (let question of questions) {
            let score = getHighestSimilarityPercentage([question], userQuestion);
            if (score > bestScore && score > bestSimilarity) {
                bestSimilarity = score;
                bestMatch = question;
            }
        }

        return bestMatch;
    }
    function findBestMatch2(userQuestion, questions) {
      // Simulierte Funktion für Übereinstimmungsvergleich
      let bestMatch = null;
      let bestScore = 0.7; // Beispielschwellenwert
      questions.forEach(question => {
        // similarity() muss implementiert werden
        // take "!?.," out of the user question
        let filterdUserQ = userQuestion.replace(/[.,!?]/g, "");

        if (question.includes(filterdUserQ)) {
          bestMatch = question;
        }
      });
      return bestMatch;
    }

    // Funktion zur Berechnung der Ähnlichkeit (eine einfache Implementierung)
    function similarity(str1, str2) {
      const words1 = str1.split(' ');
      const words2 = str2.split(' ');
      const commonWords = words1.filter(word => words2.includes(word));
      return commonWords.length / Math.max(words1.length, words2.length);
    }
    function similarity2(str1, str2) {
      const words1 = str1.split(' ');
      const words2 = str2.split(' ');
      const commonWords = words1.filter(word => words2.includes(word));
      return commonWords.length / Math.max(words1.length, words2.length);
    }
    // Funktion zum Abrufen der Antwort für eine Frage
    function getAnswerForQuestion(question, knowledgeBase) {
      for (let q of knowledgeBase.questions) {
        if (q.question === question) {
          if (q.answer && q.answer2 && !q.answer3){
            answers = [q.answer, q.answer2];
            return answers[Math.floor(Math.random() * answers.length)];
          }else if (q.answer && q.answer2 && q.answer3){
            answers = [q.answer, q.answer2, q.answer3];
            return answers[Math.floor(Math.random() * answers.length)];
          }else if (q.answer && !q.answer2 && !q.answer3){
            return q.answer;
          }
        }
      }
      return null;
    }
    let Mnamen = ["Mia", "Laura", "Lara", "Lina", "Lisa", "Jana", "Lena", "Selena", "Sophia", "Emma", "Maja", "Lea", "Tina", "Helena", "Anna", "Sarah", "Maria", "Anna", "Sophie", "Emily", "Maya", "Melina", "Alice", "Olivia", "Isabella", "Ava", "Charlotte", "Cristina", "Laura", "Anne", "Julia", "Klara", "Bella", "Theresia", "Andrea", "Sofia", "Elena", "Nina", "Nicole", "Amelie", "Leane", "Elia", "Nya", "Naya", "Nora", "Sabrina", "Sabine", "Angelika", "Vanda", "Melinda", "Viktoria", "Liv", "Livia", "Liviana", "Matilda", "Victoria", "Fransiska"];

    // Männliche Namen
    let Jnamen = ["Elias", "Jonas", "Jakob", "Johannes", "Johann", "Karl", "Kevin", "Linus", "Max", "Maximus", "Maximilian", "Moritz", "Moritz", "Moritz", "Moritz", "Paulo", "Paul", "Fritz", "Anton", "Franz", "Andre", "Andreas", "Peter", "Louis", "Leo", "Lukas", "Holger", "Jonathan", "Willi", "William", "Wilhelm", "Willy", "Viktor", "Victor", "Marcus", "Markus", "Marko", "Mark", "Michael", "Martin", "Kai", "Aleksander", "Alexander", "Alex", "Werner", "Otto", "Uwe", "Ulrich", "Uli", "Bernd", "Bernhard", "Igor", "Ivan", "Ivo", "Sven", "Stefan", "Hans", "Henrik", "Henry", "Herbert", "Herman", "Heinrich"];

    // Array mit beiden Namenstypen
    let Anamen = [Mnamen, Jnamen];
    let MMnamen = ["Mia", "laura", "Lara", "Lina", "Lisa", "Jenna", "Lena", "Selena", "Sophia", "Emma", "Skylor", "Lea", "Tina", "Dora", "Anna", "Sarah", "Maria", "Sophie", "Emily", "Melina", "Alice", "Olivia", "Isabella", "Ava", "Isabell", "Cristina", "Laura", "Julia", "Bella", "Theresa", "Andrea", "Sofia", "Elena", "Nina", "Nicole", "Elia", "Nya", "Naya", "Nora", "Sabrina", "Angelika", "Vanda", "Viktoria", "Liv", "Livia", "Liviana", "Matilda", "Victoria", "Carmen", "Fransiska"];

    // Männliche Namen
    let JJnamen = ["Elias", "Cole", "Kevin", "Zane", "Max", "Maximus", "Maximilian", "Paulo", "Paul", "Andre", "Peter", "Louis", "Leo", "Lukas", "Jonathan", "Willi", "William", "Willy", "Viktor", "Victor", "Marcus", "Markus", "Marko", "Mark", "Michael", "Martin", "Kai", "Aleksander", "Alexander", "Alex", "Igor", "Ivan", "Sven", "Henrik", "Henry", "Robert", "Jimmy", "Cris"];

    // Array mit beiden Namenstypen
    let AAnamen = [MMnamen, JJnamen];
    // Funktion zur Verarbeitung der Benutzereingabe
    function containsNumbers(strtc) {
      // Regulärer Ausdruck, um zu überprüfen, ob der String Zahlen enthält
      const regex = /\d/;
      return regex.test(strtc);
    }
    async function loadTasks() {
      try {
        const task1 = await fetch('tasks.json');
        if (!task1.ok) {
          throw new Error('Network response was not ok');
        }
        tasks = await task1.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }
    async function loadTasks2() {
      try {
        const task1 = await fetch('tasks2.json');
        if (!task1.ok) {
          throw new Error('Network response was not ok');
        }
        tasks2 = await task1.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }
    async function EQquiz() {
      try {
        const Equiz = await fetch('Equiz.json');
        if (!Equiz.ok) {
          throw new Error('Network response was not ok');
        }
        EquizV = await Equiz.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }
    async function GQquiz() {
      try {
        const Gquiz = await fetch('Gquiz.json');
        if (!Gquiz.ok) {
          throw new Error('Network response was not ok');
        }
        GquizV = await Gquiz.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }

    function loadRandomTask() {
      if (tasks.length === 0) {
        return 'No tasks available';
      }
      const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
      thequestion = randomTask.Frage;
      return thequestion;
      theanswer = randomTask.Antwort;
    }

    function checkAnswer(userMessage) {
      if (userMessage === theanswer) {
        return 'Richtig! Eine neue Aufgabe wird geladen.';
        loadRandomTask();
        document.getElementById('answer').value = '';
      } else {
        return 'Falsch! Versuchen Sie es erneut.';
      }
    }
    function kuerzeBenutzernamen(langerBenutzername) {
      var gekuerzterName;
      if (langerBenutzername.length > 8) {
        gekuerzterName = langerBenutzername.substring(0, 8) + "…";
      } else {
        gekuerzterName = langerBenutzername;
      }
      localStorage.setItem("username", gekuerzterName);
      document.getElementById("username-display").textContent = gekuerzterName;
    }
    let dyhfpttt = "did you have fun playing Tic Tac Toe?";
    let persons = {}
    let importantpeopleE = {"steve jobs": "steve jobs was the founder of apple", "bill gates": "bill gates was the founder of microsoft","mark zuckerberg": "mark zuckerberg was the founder of facebook", "elon musk": "elon musk was the founder of tesla", "jeff bezos": "jeff bezos was the founder of amazon"}
    let importantpeopleD = {"steve jobs": "steve jobs war der gründer von apple", "bill gates": "bill gates war der gründer von microsoft", "mark zuckerberg": "mark zuckerberg war der gründer von facebook", "elon musk": "elon musk war der gründer von tesla", "jeff bezos": "jeff bezos war der gründer von amazon"}
    async function getBotResponse(userMessage) {
      try {
        if (chalange == "nothing") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch = findBestMatch(userQuestion, questions);

          let response;
          if (userQuestion.includes('√')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 1) {
              return 'hm?';
            } else {
              let number = parseInt(zahlen[0]);
              let ergebnis = Math.sqrt(number);
              return `√${number} = ${ergebnis}.`;
            }
          }else if (userQuestion.includes("play") && userQuestion.includes("tile") && userQuestion.includes("tumble")) {
              startTileTumbleGame();
              let gamecontainercross4 = document.getElementById('gamecontainercross4');
              function gamecontainercross4click() {
                  gamecontainercross4.removeEventListener('click', gamecontainercross4click);
                  stopTileTumbleGame();
              }
              gamecontainercross4.addEventListener('click', gamecontainercross4click);
              return "did you have fun playing Tile Tumble?";
          }else if (userQuestion.includes("play") && userQuestion.includes("tic") && userQuestion.includes("tac") && userQuestion.includes("toe")) {
              startTicTacToeGame();
              let gamecontainercross3 = document.getElementById('gamecontainercross3');
              function gamecontainercross3click() {
                  gamecontainercross3.removeEventListener('click', gamecontainercross3click);
                  stopTicTacToeGame();
              }
              gamecontainercross3.addEventListener('click', gamecontainercross3click);
              return "did you have fun playing Tic Tac Toe?";
          }else if (userQuestion == "#") {
              startTicTacToeGame();
              let gamecontainercross3 = document.getElementById('gamecontainercross3');
              function gamecontainercross3click() {
                  gamecontainercross3.removeEventListener('click', gamecontainercross3click);
                  stopTicTacToeGame();
              }
              gamecontainercross3.addEventListener('click', gamecontainercross3click);
              return dyhfpttt;
          }else if (userQuestion == "♯") {
              startTicTacToeGame();
              let gamecontainercross3 = document.getElementById('gamecontainercross3');
              function gamecontainercross3click() {
                  gamecontainercross3.removeEventListener('click', gamecontainercross3click);
                  stopTicTacToeGame();
              }
              gamecontainercross3.addEventListener('click', gamecontainercross3click);
              return dyhfpttt;
          }else if (userQuestion.includes("play") && userQuestion.includes("memory")) {
              startMemoryGame();
              let gamecontainercross2 = document.getElementById('gamecontainercross2');
              function gamecontainercross2click() {
                  gamecontainercross2.removeEventListener('click', gamecontainercross2click);
                  stopMemoryGame();
              }
              gamecontainercross2.addEventListener('click', gamecontainercross2click);
              return "did you have fun playing Memory?";
          }else if (userQuestion.includes("play") && userQuestion.includes("card")) {
              startCardGame();
              let gamecontainercross1 = document.getElementById('gamecontainercross1');
              function gamecontainercross1click() {
                  gamecontainercross1.removeEventListener('click', gamecontainercross1click);
                  stopCardGame();
              }
              gamecontainercross1.addEventListener('click', gamecontainercross1click);
              return "did you have fun playing Cards?";
          }else if (userQuestion.includes("spiel") && userQuestion.includes("tile") && userQuestion.includes("tumble")) {
              startTileTumbleGame();
              let gamecontainercross4 = document.getElementById('gamecontainercross4');
              function gamecontainercross4click() {
                  gamecontainercross4.removeEventListener('click', gamecontainercross4click);
                  stopTileTumbleGame();
              }
              gamecontainercross4.addEventListener('click', gamecontainercross4click);
              return "Mochtest du Tile Tumble spielen?";
          }else if (userQuestion.includes("spiel") && userQuestion.includes("tic") && userQuestion.includes("tac") && userQuestion.includes("toe")) {
              startTicTacToeGame();
              let gamecontainercross3 = document.getElementById('gamecontainercross3');
              function gamecontainercross3click() {
                  gamecontainercross3.removeEventListener('click', gamecontainercross3click);
                  stopTicTacToeGame();
              }
              gamecontainercross3.addEventListener('click', gamecontainercross3click);
              return "Mochtest du Tic Tac Toe spielen?";
          }else if (userQuestion.includes("spiel") && userQuestion.includes("memory")) {
              startMemoryGame();
              let gamecontainercross2 = document.getElementById('gamecontainercross2');
              function gamecontainercross2click() {
                  gamecontainercross2.removeEventListener('click', gamecontainercross2click);
                  stopMemoryGame();
              }
              gamecontainercross2.addEventListener('click', gamecontainercross2click);
              return "Mochtest du Memory spielen?";
          }else if (userQuestion.includes("spiel") && userQuestion.includes("karten")) {
              startCardGame();
              let gamecontainercross1 = document.getElementById('gamecontainercross1');
              function gamecontainercross1click() {
                  gamecontainercross1.removeEventListener('click', gamecontainercross1click);
                  stopCardGame();
              }
              gamecontainercross1.addEventListener('click', gamecontainercross1click);
              return "Mochtest du karten spielen?";
          }else if (userQuestion.includes("mein") && userQuestion.includes("heisst") && !userQuestion.includes("?") && !userQuestion.includes("wie")){
            let personpart1 = userQuestion.split("mein")[1].trim();
            let person = personpart1.split("heisst")[0].trim();
            let name = userQuestion.split("heisst")[1].trim();
            if (person && name){
              // add name and person to list
              persons[name] = person;
            }
            return "ok, dein " + person + " heisst " + name;
          } else if (userQuestion.includes("mein") && userQuestion.includes("heißt") && !userQuestion.includes("?") && !userQuestion.includes("wie")){
            let personpart1 = userQuestion.split("mein")[1].trim();
            let person = personpart1.split("heißt")[0].trim();
            let name = userQuestion.split("heißt")[1].trim();
            if (person && name){
              // add name and person to list
              persons[name] = person;
            }
            return "ok, dein " + person + " heißt " + name;
          } else if (userQuestion.includes("wer ist ")){
            let name = userQuestion.split("ist")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]){
              return name + " ist dein " + persons[name];
            } else if (importantpeopleD[name]) {
              return importantpeopleD[name];
            } else {
              return "weiss ich nicht";
            }
          } else if (userQuestion.includes("wer heißt ")){
            let name = userQuestion.split("heißt")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]){
              return name + " ist dein " + persons[name];
            } else if (importantpeopleD[name]) {
              return importantpeopleD[name];
            } else {
              return "weiss ich nicht";
            }
          } else if (userQuestion.includes("wer heisst ")){
            let name = userQuestion.split("heisst")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]){
              return name + " ist dein " + persons[name];
            } else if (importantpeopleD[name]) {
              return importantpeopleD[name];
            } else {
              return "weiss ich nicht";
            }
          } else if (userQuestion.includes("my") && userQuestion.includes("is called")) {
            let personpart1 = userQuestion.split("my")[1].trim();
            let person = personpart1.split("is called")[0].trim();
            let name = userQuestion.split("is called ")[1].trim();
            if (person && name) {
              // add name and person to list
              persons[name] = person;
            }
            return "ok, your " + person + " is called " + name;
          } else if (userQuestion.includes("my ") && userQuestion.includes(" name is ")) {
            let personpart1 = userQuestion.split("my")[1].trim();
            let person = personpart1.split(" name is ")[0].trim();
            let name = userQuestion.split(" name is ")[1].trim();
            if (person && name) {
              // add name and person to list
              persons[name] = person;
            }
            return "ok, your " + person + " name is " + name;
          } else if (userQuestion.includes("who is ")) {
            let name = userQuestion.split("who is ")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]) {
              // check last letter
              if (persons[name].includes("'s")) {
                return name + " is your " + persons[name];
              } else if (persons[name][persons[name].length - 1] == "s") {
                return name + " is your " + persons[name] + " name";
              } else {
                return name + " is your " + persons[name] + "'s name";
              }
            } else if (importantpeopleE[name]) {
              return importantpeopleE[name];
            } else {
              return "i dont know";
            }
          } else if (userQuestion.includes("who's name is ")) {
            let name = userQuestion.split("who's name is ")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]) {
              // check last letter
              if (persons[name].includes("'s")) {
                return name + " is your " + persons[name];
              } else if (persons[name][persons[name].length - 1] == "s") {
                return name + " is your " + persons[name] + " name";
              } else {
                return name + " is your " + persons[name] + "'s name";
              }
            } else if (importantpeopleE[name]) {
              return importantpeopleE[name];
            } else {
              return "i dont know";
            }
          } else if (userQuestion.includes("whos name is ")) {
            let name = userQuestion.split("whos name is ")[1].trim();
            name = name.split("?")[0].trim();
            if (persons[name]) {
              // check last letter
              if (persons[name].includes("'s")) {
                return name + " is your " + persons[name];
              } else if (persons[name][persons[name].length - 1] == "s") {
                return name + " is your " + persons[name] + " name";
              } else {
                return name + " is your " + persons[name] + "'s name";
              }
            } else if (importantpeopleE[name]) {
              return importantpeopleE[name];
            } else {
              return "i dont know";
            }
          } else if (userQuestion.includes("von deutsch zu hyraphisch") && userQuestion.includes("übersetze")) {
              let userQuestion5 = userQuestion.split("von deutsch zu hyraphisch")[0];
              userQuestion5 = userQuestion5.split("übersetze")[1];

              let ersetzung_dict = {
                  'A': '=', 'a': '=', 'B': '&', 'b': '&', 'C': '%', 'c': '%', 'D': '_', 'd': '_', 'E': '€', 'e': '€',
                  'F': '|', 'f': '|', 'G': '(', 'g': '(', 'H': ')', 'h': ')', 'I': '!', 'i': '!', 'J': "'", 'j': "'",
                  'K': '^', 'k': '^', 'L': '#', 'l': '#', 'M': '„', 'm': '„', 'N': '•', 'n': '•', 'O': '0', 'o': '0',
                  'P': '~', 'p': '~', 'Q': '@', 'q': '@', 'R': '<', 'r': '<', 'S': '>', 's': '>', 'T': '+', 't': '+',
                  'U': '3', 'u': '3', 'V': '7', 'v': '7', 'W': '5', 'w': '5', 'X': '*', 'x': '*', 'Y': '¥', 'y': '¥',
                  'Z': '/', 'z': '/', 'Ä': '1', 'ä': '1', 'Ö': ';', 'ö': ';', 'Ü': '$', 'ü': '$', ' ': ' '
              };

              let ersetzer = new Map(Object.entries(ersetzung_dict));
              let neuer_text = userQuestion5.split('').map(char => ersetzer.get(char) || char).join('');
              neuer_text = neuer_text.toLowerCase();

              return `Der übersetzte Text: ${neuer_text}`;
          } else if (userQuestion.includes("von hyraphisch zu deutsch") && userQuestion.includes("übersetze")) {
              let userQuestion5 = userQuestion.split("von hyraphisch zu deutsch")[0];
              userQuestion5 = userQuestion5.split("übersetze")[1];
              let ersetzung_dict = {
                  '=': 'A', '&': 'B', '%': 'C', '_': 'D', '€': 'E', '|': 'F', '(': 'G', ')': 'H',
                  '!': 'I', "'": 'J', '^': 'K', '#': 'L', '„': 'M', '•': 'N', '0': 'O', '~': 'P',
                  '@': 'Q', '<': 'R', '>': 'S', '+': 'T', '3': 'U', '7': 'V', '5': 'W', '*': 'X',
                  '¥': 'Y', '/': 'Z', '1': 'Ä', ';': 'Ö', '$': 'Ü', ' ': ' '
              };

              let ersetzer = new Map(Object.entries(ersetzung_dict));
              let neuer_text = userQuestion5.split('').map(char => ersetzer.get(char) || char).join('');
              // meke the trxt lowercase
              neuer_text = neuer_text.toLowerCase();
              return `Der übersetzte Text: ${neuer_text}`;
          } else if (userQuestion.includes("von de zu hy") && userQuestion.includes("übersetze")) {
              let userQuestion5 = userQuestion.split("von deutsch zu hy")[0];
              userQuestion5 = userQuestion5.split("übersetze")[1];
              let ersetzung_dict = {
                  'A': '=', 'a': '=', 'B': '&', 'b': '&', 'C': '%', 'c': '%', 'D': '_', 'd': '_', 'E': '€', 'e': '€',
                  'F': '|', 'f': '|', 'G': '(', 'g': '(', 'H': ')', 'h': ')', 'I': '!', 'i': '!', 'J': "'", 'j': "'",
                  'K': '^', 'k': '^', 'L': '#', 'l': '#', 'M': '„', 'm': '„', 'N': '•', 'n': '•', 'O': '0', 'o': '0',
                  'P': '~', 'p': '~', 'Q': '@', 'q': '@', 'R': '<', 'r': '<', 'S': '>', 's': '>', 'T': '+', 't': '+',
                  'U': '3', 'u': '3', 'V': '7', 'v': '7', 'W': '5', 'w': '5', 'X': '*', 'x': '*', 'Y': '¥', 'y': '¥',
                  'Z': '/', 'z': '/', 'Ä': '1', 'ä': '1', 'Ö': ';', 'ö': ';', 'Ü': '$', 'ü': '$', ' ': ' '
              };

              let ersetzer = new Map(Object.entries(ersetzung_dict));
              let neuer_text = userQuestion5.split('').map(char => ersetzer.get(char) || char).join('');
              neuer_text = neuer_text.toLowerCase();

              return `Der übersetzte Text: ${neuer_text}`;
          } else if (userQuestion.includes("von hy zu de") && userQuestion.includes("übersetze")) {
              let userQuestion5 = userQuestion.split("von hy zu de")[0];
              userQuestion5 = userQuestion5.split("übersetze")[1];
              let ersetzung_dict = {
                  '=': 'A', '&': 'B', '%': 'C', '_': 'D', '€': 'E', '|': 'F', '(': 'G', ')': 'H',
                  '!': 'I', "'": 'J', '^': 'K', '#': 'L', '„': 'M', '•': 'N', '0': 'O', '~': 'P',
                  '@': 'Q', '<': 'R', '>': 'S', '+': 'T', '3': 'U', '7': 'V', '5': 'W', '*': 'X',
                  '¥': 'Y', '/': 'Z', '1': 'Ä', ';': 'Ö', '$': 'Ü', ' ': ' '
              };

              let ersetzer = new Map(Object.entries(ersetzung_dict));
              let neuer_text = userQuestion5.split('').map(char => ersetzer.get(char) || char).join('');
              // meke the trxt lowercase
              neuer_text = neuer_text.toLowerCase();
              return `Der übersetzte Text: ${neuer_text}`;
          } else if (userQuestion.includes("ich heisse")) {
            let name1 = userQuestion.split("ich heisse")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (userQuestion.includes("ich heiße")) {
            let name1 = userQuestion.split("ich heiße")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (userQuestion.includes("my name is ")) {
            let name1 = userQuestion.split("my name is ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("i am called ")) {
            let name1 = userQuestion.split("i am called ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("im called ")) {
            let name1 = userQuestion.split("im called ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("mein name ist ")) {
            let name1 = userQuestion.split("mein name ist ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (isguessing == "ja" && userQuestion.includes("emoji") && userQuestion.includes("spiel") && userQuestion.includes("spielen") && userQuestion.includes("nicht")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("game") && userQuestion.includes("not")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "ja" && userQuestion.includes("nicht") && userQuestion.includes("emoji") && userQuestion.includes("spielen")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("not") && userQuestion.includes("play")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "ja" && userQuestion.includes("zurück")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("zurück")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("don") && userQuestion.includes("t")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "yes" && userQuestion.includes("back")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "ja" && userQuestion.includes("back")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (userQuestion.includes("emoji") && userQuestion.includes("spiel") && userQuestion.includes("spielen") && !userQuestion.includes("nicht")) {
            isguessing = "ja";
            let returnthegame = generateEmojis();
            return "sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
          } else if (userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("game") && !userQuestion.includes("not")) {
            isguessing = "yes";
            let returnthegame = generateEmojis();
            return "tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
          } else if (isguessing == "ja" && !userQuestion.includes("idk")) {
            let userQuestionForCheckGuess = userQuestion.match(/\d+/g);
            let checkanswer = checkGuess(userQuestionForCheckGuess);
            if (checkanswer == "right") {
              let returnthegame = generateEmojis();
              return "super! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
            } else if (userQuestion.includes(differentEmoji) && !userQuestion.includes(otherEmojis)) {
              let returnthegame = generateEmojis();
              return "super! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
            } else {
              return "falsch versuche es nochmal";
            }
          } else if (isguessing == "yes" && !userQuestion.includes("idk")) {
            let userQuestionForCheckGuess = userQuestion.match(/\d+/g);
            let checkanswer = checkGuess(userQuestionForCheckGuess);
            if (checkanswer == "right") {
              let returnthegame = generateEmojis();
              return "great! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
            } else if (userQuestion.includes(differentEmoji) && !userQuestion.includes(otherEmojis)) {
              let returnthegame = generateEmojis();
              return "great! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
            } else {
              return "wrong, try again";
            }
          } else if (isguessing == "yes" && userQuestion.includes("idk")) {
            let rightanswerforgame1 = parseInt(differentEmojiPosition) + 1;
            let returnthegame = generateEmojis();
            return "the right answer is " + rightanswerforgame1 + "! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
          } else if (isguessing == "ja" && userQuestion.includes("idk")) {
            let rightanswerforgame1 = parseInt(differentEmojiPosition) + 1;
            let returnthegame = generateEmojis();
            return "die richtige antwort ist " + rightanswerforgame1 + "! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
          } else if (userQuestion.includes('=')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer} = True`;
              } else {
                return `${question} = ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('>')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer}`;
              } else if (ergebnis1 > ergebnis2) {
                return `${question} > ${answer} = True`;
              } else {
                return `${question} > ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('<')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer}`;
              } else if (ergebnis1 < ergebnis2) {
                return `${question} < ${answer} = True`;
              } else {
                return `${question} < ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('how can i spell')) {
            let [trashword, word] = userQuestion.split("how can i spell", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('how do i spell')) {
            let [trashword, word] = userQuestion.split("how do i spell", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('wie buchstabiere ich')) {
            let [trashword, word] = userQuestion.split("wie buchstabiere ich", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('wie buchstabiert man')) {
            let [trashword, word] = userQuestion.split("wie buchstabiert man", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('is ') && userQuestion.includes(' in ')) {
            let userR = userQuestion.trim();
            userR = userR.replace("?", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes(' in ')) {
              let [userS1, userS2] = userR.split("in", 2).map(str => str.trim());
              userS1 = userS1.trim();
              userS2 = userS2.trim();
              userS1 = userS1.replace(/“/g, '');
              userS1 = userS1.replace(/„/g, '');
              userS1 = userS1.replace('is ', '');
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              // Entferne das Wort aus userS1 aus userS2
              if (userS2.includes(userS1)) {
                return `yes, "${userS1}" is in "${userS2}"`;
              } else {
                return `no, "${userS1}" is not in "${userS2}"`;
              }
            }
          } else if (userQuestion.includes('ist ') && userQuestion.includes(' in ')) {
            let userR = userQuestion.trim();
            userR = userR.replace("?", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes(' in ')) {
              let [userS1, userS2] = userR.split("in", 2).map(str => str.trim());
              userS1 = userS1.trim();
              userS2 = userS2.trim();
              userS1 = userS1.replace(/“/g, '');
              userS1 = userS1.replace(/„/g, '');
              userS1 = userS1.replace('ist ', '');
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              // Entferne das Wort aus userS1 aus userS2
              if (userS2.includes(userS1)) {
                return `ja, "${userS1}" ist in "${userS2}"`;
              } else {
                return `nein, "${userS1}" ist nicht in "${userS2}"`;
              }
            }
          } else if (userQuestion.includes('take') && userQuestion.includes('out of')) {
            let userR = userQuestion.trim();
            if (userR.includes('out of')) {
              let [userS1, userS2] = userR.split("out of", 2).map(str => str.trim());
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              userS1 = userS1.replace(nimm_keyword, "").trim();
              let userRS = userS2.replace(userS1, "").trim(); // Entferne das Wort aus userS1 aus userS2
              return `Okay, "${userS1}" out of "${userS2}" is "${userRS}".`;
            } else {
              return 'sorry but i cant answer to that';
            }
          } else if (userQuestion.includes('nimm') && userQuestion.includes('aus')) {
            let userR = userQuestion.trim();
            userR = userR.replace("heraus", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes('aus')) {
              let [userS1, userS2] = userR.split("aus", 2).map(str => str.trim());
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              userS1 = userS1.replace(nimm_keyword, "").trim();
              let userRS = userS2.replace(userS1, "").trim(); // Entferne das Wort aus userS1 aus userS2
              return `Okay, "${userS1}" aus "${userS2}" ist "${userRS}".`;
            } else {
              return 'I dont know the answer. Please enter my answer to that question';
            }
          } else if (userQuestion.includes('count till')) {
            try {
              // Zahl extrahieren und in eine Ganzzahl konvertieren
              let number = parseInt(userQuestion.match(/\b\d+\b/)[0]);
              if (number > 0) {
                // Wenn die Zahl größer als 0 ist, Zahlen von 1 bis zur angegebenen Zahl aufzählen
                let count_list = Array.from({length: number}, (_, i) => i + 1).join(', ');
                return `i will count till: ${number}: ${count_list}`;
              } else {
                // Wenn die Zahl nicht größer als 0 ist, eine entsprechende Nachricht senden
                return 'please enter a positiv number.';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren der Zahl auftritt
              return 'please enter a valid number.';
            }
          } else if (userQuestion.includes('zähle bis')) {
            try {
              // Zahl extrahieren und in eine Ganzzahl konvertieren
              let number = parseInt(userQuestion.match(/\b\d+\b/)[0]);
              if (number > 0) {
                // Wenn die Zahl größer als 0 ist, Zahlen von 1 bis zur angegebenen Zahl aufzählen
                let count_list = Array.from({length: number}, (_, i) => i + 1).join(', ');
                return `Ich zähle bis ${number}: ${count_list}`;
              } else {
                // Wenn die Zahl nicht größer als 0 ist, eine entsprechende Nachricht senden
                return 'Bitte geben Sie eine positive Zahl an.';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren der Zahl auftritt
              return 'Bitte geben Sie eine gültige Zahl an.';
            }
          } else if (userQuestion.includes('ich bin ')) {
            try {
              // Alter extrahieren und in eine Ganzzahl konvertieren
              let userQuestionzwei = userQuestion.replace('jahre alt', '');
              let age1 = userQuestionzwei.split("ich bin ")[1];
              let max_human_age = "120"; // Maximales dokumentiertes Alter eines Menschen
              if (parseInt(age1) > parseInt(max_human_age)) {
                // Wenn das Alter das maximale Menschenausmaß übersteigt
                return 'So alt kann ein Mensch nicht werden.';
              } else {
                // Wenn das Alter innerhalb des menschlichen Bereichs liegt
                return 'Cool!';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren des Alters auftritt
              return 'okay';
            }
          } else if (userQuestion.includes('i am ')) {
            try {
              // Alter extrahieren und in eine Ganzzahl konvertieren
              let userQuestiontwo = userQuestion.replace('years old', '');
              let age1 = userQuestiontwo.split("i am ")[1];
              let max_human_age = "120"; // Maximales dokumentiertes Alter eines Menschen
              if (parseInt(age1) > parseInt(max_human_age)) {
                // Wenn das Alter das maximale Menschenausmaß übersteigt
                return 'its not possible to become that old.';
              } else {
                // Wenn das Alter innerhalb des menschlichen Bereichs liegt
                return 'Cool!';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren des Alters auftritt
              return 'okay';
            }
          } else if (userQuestion.includes('give me') && userQuestion.includes('password')) {
            // Zufällige Zahlen und Buchstaben generieren
            let random_number = Math.floor(Math.random() * 900000) + 100000;
            let random_index = Math.floor(Math.random() * 6);
            let random_letter = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_number2 = Math.floor(Math.random() * 900000) + 100000;
            let random_index2 = Math.floor(Math.random() * 6);
            let random_letter2 = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_lr = Array.from({length: 6}, () => String.fromCharCode(Math.floor(Math.random() * 26) + 97)).join('');
            let password_with_letter = random_number.toString().replace(random_number.toString().charAt(random_index), random_letter);
            let password_with_letter2 = random_number2.toString().replace(random_number2.toString().charAt(random_index2), random_number2.toString());
            let random_number3 = random_number.toString().replace(random_number2.toString().charAt(random_index2), random_number.toString());
            let random_letter3 = random_lr.replace(random_letter2, random_letter);

            // Passwort je nach Benutzeranfrage generieren
            if (userQuestion.includes('number')) {
              return `Please note that the password is randomly generated. Here is the password: ${password_with_letter2}`;
            } else if (userQuestion.includes('letter')) {
              return `Please note that the password is randomly generated. Here is the password: ${random_letter3}`;
            } else {
              return `Please note that the password is randomly generated. Here is the password: ${password_with_letter}`;
            }
          } else if (userQuestion.includes('gib mir') && userQuestion.includes('passwort')) {
            // Zufällige Zahlen und Buchstaben generieren
            let random_number = Math.floor(Math.random() * 900000) + 100000;
            let random_index = Math.floor(Math.random() * 6);
            let random_letter = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_number2 = Math.floor(Math.random() * 900000) + 100000;
            let random_index2 = Math.floor(Math.random() * 6);
            let random_letter2 = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_lr = Array.from({length: 6}, () => String.fromCharCode(Math.floor(Math.random() * 26) + 97)).join('');
            let password_with_letter = random_number.toString().replace(random_number.toString().charAt(random_index), random_letter);
            let password_with_letter2 = random_number2.toString().replace(random_number2.toString().charAt(random_index2), random_number2.toString());
            let random_number3 = random_number.toString().replace(random_number2.toString().charAt(random_index2), random_number.toString());
            let random_letter3 = random_lr.replace(random_letter2, random_letter);

            // Passwort je nach Benutzeranfrage generieren
            if (userQuestion.includes('nummer')) {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${password_with_letter2}`;
            } else if (userQuestion.includes('buchstabe')) {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${random_letter3}`;
            } else {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${password_with_letter}`;
            }
          } else if (userQuestion.includes('sag:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("sag:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes('sag mir:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("sag mir:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes('say:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("say:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes("how should") && userQuestion.includes("i") && userQuestion.includes("call")) {
            let word = userQuestion.split("call")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word = word.replace("my self", "you").replace("my ", "your ").replace("your ", "my ").replace("you", "me");
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("male") || userQuestion.includes("boy")) {
              return `I think a good name for ${word} could be: "${JJnamen[Math.floor(Math.random() * JJnamen.length)]}".`;
            } else if (userQuestion.includes("female") || userQuestion.includes("girl")) {
              return `I think a good name for ${word} could be: "${MMnamen[Math.floor(Math.random() * MMnamen.length)]}".`;
            } else {
              let allenamen = AAnamen[Math.floor(Math.random() * AAnamen.length)];
              return `I think a good name for ${word} could be: "${allenamen[Math.floor(Math.random() * allenamen.length)]}".`;
            }
          } else if (userQuestion.includes("what would be") && userQuestion.includes("a") && userQuestion.includes("name for")) {
            let word = userQuestion.split("name for")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word = word.replace("my self", "you").replace("my ", "your ").replace("your ", "my ").replace("you", "me");
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("male") || userQuestion.includes("boy")) {
              return `I think a good name for ${word} could be: "${JJnamen[Math.floor(Math.random() * JJnamen.length)]}".`;
            } else if (userQuestion.includes("female") || userQuestion.includes("girl")) {
              return `I think a good name for ${word} could be: "${MMnamen[Math.floor(Math.random() * MMnamen.length)]}".`;
            } else {
              let allenamen = AAnamen[Math.floor(Math.random() * AAnamen.length)];
              return `I think a good name for ${word} could be: "${allenamen[Math.floor(Math.random() * allenamen.length)]}".`;
            }
          } else if (userQuestion.includes("wie sollte") && userQuestion.includes("ich") && userQuestion.includes("nennen")) {
            let word1 = userQuestion.split("ich")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word1 = word1.replace("meine", "deine").replace("mein", "dein").replace("dein", "mein").replace("deine", "meine").replace("dich", "mich");
            let word = word1.replace("nennen", "").trim();
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Jnamen[Math.floor(Math.random() * Jnamen.length)]}" sein.`;
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Mnamen[Math.floor(Math.random() * Mnamen.length)]}" sein.`;
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return `Ich glaube ein guter Name für ${word} könnte: "${allenamen[Math.floor(Math.random() * allenamen.length)]}" sein.`;
            }
          } else if (userQuestion.includes("was wäre") && userQuestion.includes("ein") && userQuestion.includes("name für")) {
            let word1 = userQuestion.split("name für")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word1 = word1.replace("meine", "deine").replace("mein", "dein").replace("dein", "mein").replace("deine", "meine").replace("dich", "mich");
            let word = word1.trim();
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Jnamen[Math.floor(Math.random() * Jnamen.length)]}" sein.`;
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Mnamen[Math.floor(Math.random() * Mnamen.length)]}" sein.`;
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return `Ich glaube ein guter Name für ${word} könnte: "${allenamen[Math.floor(Math.random() * allenamen.length)]}" sein.`;
            }
          } else if (userQuestion.includes("ersetze") && userQuestion.includes("mit") && userQuestion.includes("in")) {
            // Zerlegen der Benutzereingabe, um die relevanten Teile zu extrahieren
            let teil2 = userQuestion.split("ersetze")[1];
            let teil4 = teil2.split("mit")[1];
            let teil3 = teil2.split("mit")[0];
            teil3 = teil3.trim().replace("mit", "");
            let teil6 = teil4.split("in")[1];
            let teil5 = teil4.split("in")[0];
            teil5 = teil5.trim().replace("in", "");

            // Überprüfen, ob der zu ersetzende Text im Zieltext enthalten ist
            if (teil6.includes(teil3)) {
              // Ersetzen des Textes und Erstellen der Antwort
              teil6 = teil6.replace(teil3, teil5);
              return 'Der bearbeitete Text: ' + teil6;
            } else {
              // Falls der zu ersetzende Text nicht im Zieltext enthalten ist
              return "Entschuldigung, aber '" + teil3 + "' ist nicht in '" + teil6 + "' enthalten.";
            }
          } else if (userQuestion.includes("replace") && userQuestion.includes("with") && userQuestion.includes("in")) {
            // Zerlegen der Benutzereingabe, um die relevanten Teile zu extrahieren
            let teil2 = userQuestion.split("replace")[1];
            let teil4 = teil2.split("with")[1];
            let teil3 = teil2.split("with")[0];
            teil3 = teil3.trim().replace("mit", "");
            let teil6 = teil4.split("in")[1];
            let teil5 = teil4.split("in")[0];
            teil5 = teil5.trim().replace("in", "");

            // Überprüfen, ob der zu ersetzende Text im Zieltext enthalten ist
            if (teil6.includes(teil3)) {
              // Ersetzen des Textes und Erstellen der Antwort
              teil6 = teil6.replace(teil3, teil5);
              return 'the edited Text: ' + teil6;
            } else {
              // Falls der zu ersetzende Text nicht im Zieltext enthalten ist
              return "sorry, but '" + teil3 + "' is not in '" + teil6 + "'.";
            }
          } else if (userQuestion.includes("wähle eine zahl") && userQuestion.includes("von") && userQuestion.includes("bis")) {
            // Zerlegen der Benutzereingabe, um den Bereich zu extrahieren
            let trash1 = userQuestion.split("von")[1];
            let word1 = trash1.split("bis")[0];
            let word2 = trash1.split("bis")[1];
            // Extrahieren der Zahlen aus den Textteilen
            let uword = word1.match(/\b\d+\b/);
            let uword2 = word2.match(/\b\d+\b/);
            uword = parseInt(uword[0]);
            uword2 = parseInt(uword2[0]);
            // Generieren einer Zufallszahl innerhalb des Bereichs
            let zahl;
            if (uword > uword2) {
              zahl = Math.floor(Math.random() * (uword - uword2 + 1)) + uword2;
            } else if (uword < uword2) {
              zahl = Math.floor(Math.random() * (uword2 - uword + 1)) + uword;
            } else {
              zahl = uword;
            }
            return `Ich wähle: ${zahl}`;
          } else if (userQuestion.includes("choose a number") && userQuestion.includes("from") && userQuestion.includes("to")) {
            // Zerlegen der Benutzereingabe, um den Bereich zu extrahieren
            let trash1 = userQuestion.split("from")[1];
            let word1 = trash1.split("to")[0];
            let word2 = trash1.split("to")[1];
            // Extrahieren der Zahlen aus den Textteilen
            let uword = word1.match(/\b\d+\b/);
            let uword2 = word2.match(/\b\d+\b/);
            uword = parseInt(uword[0]);
            uword2 = parseInt(uword2[0]);
            // Generieren einer Zufallszahl innerhalb des Bereichs
            let zahl;
            if (uword > uword2) {
              zahl = Math.floor(Math.random() * (uword - uword2 + 1)) + uword2;
            } else if (uword < uword2) {
              zahl = Math.floor(Math.random() * (uword2 - uword + 1)) + uword;
            } else {
              zahl = uword;
            }
            return `i choose: ${zahl}`;
          }else if (userQuestion.includes("gib mir") && userQuestion.includes("name")) {
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return 'Wie wäre es mit: ' + Jnamen[Math.floor(Math.random() * Jnamen.length)] + '.';
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return 'Wie wäre es mit: ' + Mnamen[Math.floor(Math.random() * Mnamen.length)] + '.';
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return 'Wie wäre es mit: ' + allenamen[Math.floor(Math.random() * allenamen.length)] + '.';
            }
          } else if (/[0-9\+\-\*\/]/.test(userQuestion)) {
            try {
              // Ausdruck berechnen und Ergebnis ausgeben
              let expression = userQuestion.replace(/[a-zA-Z\s]/g, '');

              // Alle Zahlen und mathematischen Operationen finden
              let numbers = userQuestion.match(/\d+/g);
              let operations = userQuestion.match(/[-+*/]/g);

              // Mathematische Operationen durchführen
              let result = parseInt(numbers[0]);
              let numIndex = 1;
              operations.forEach(op => {
                let num = parseInt(numbers[numIndex]);
                switch (op) {
                  case '+':
                    result += num;
                    break;
                  case '-':
                    result -= num;
                    break;
                  case '*':
                    result *= num;
                    break;
                  case '/':
                    result /= num;
                    break;
                }
                numIndex++;
              });

              return `${result}.`;
            } catch (error) {
              let answer = get_answer_for_question(best_match, knowledge_base);
              return `${answer}`;
            }
          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
            chalange = "mathe";
            clean();
            return "okay, du lernst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
            chalange = "mathe";
            clean();
            return "okay, du übst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to learn math now. if you don't know the answer, just say 'idk' and i'll give you the next question";
          } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to practice math now. if you don't know the answer, just say 'idk' and i'll give you the next question";
          } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
            chalange = "Equiz";
            clean();
            return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
          } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
            chalange = "Gquiz";
            clean();
            return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
          } else if (bestMatch) {
            const answer = getAnswerForQuestion(bestMatch, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }

          } else {
            if (userQuestion.includes("?") && !userQuestion.includes(" ?")) {
              let userQuestion2 = userQuestion.replace("?", " ?");
              const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
              const questions2 = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion2, questions2);
              if (bestMatch2) {
                const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                if (newanswer == "Sorry but i dont know your Name") {
                  let name = document.getElementById("username-display");
                  response = {message: `${name.textContent}`};
                } else if (newanswer.includes("(Username)")) {
                  let name = document.getElementById("username-display");
                  let text = newanswer.replace("(Username)", name.textContent);
                  response = {message: `${text}`};
                } else {
                  response = {message: `${newanswer}`};
                }
              } else {
                if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                  let word2 = userQuestion.split("ist")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `ich weiß nicht, was ${word2} ist`};
                } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                  let word2 = userQuestion.split("is")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `i dont know what ${word2} is`};
                } else {
                  let userQuestion3 = userQuestion.replace(" ?", "?");
                  const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                  const questions3 = knowledgeBase.questions.map(q => q.question);
                  const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                  if (bestMatch3) {
                    const newanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                    if (newanswer == "Sorry but i dont know your Name") {
                      let name = document.getElementById("username-display");
                      response = {message: `${name.textContent}`};
                    } else if (newanswer.includes("(Username)")) {
                      let name = document.getElementById("username-display");
                      let text = newanswer.replace("(Username)", name.textContent);
                      response = {message: `${text}`};
                    } else {
                      response = {message: `${newanswer}`};
                    }
                  } else {
                    response = {message: `${idkanswer}`};
                  }
                }
              }
            } else if (userQuestion.includes(" ?") && !userQuestion.includes("?")) {
              let userQuestion2 = userQuestion.replace(" ?", "?");
              const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
              const questions2 = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion2, questions2);
              if (bestMatch2) {
                const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                if (newanswer == "Sorry but i dont know your Name") {
                  let name = document.getElementById("username-display");
                  response = {message: `${name.textContent}`};
                } else if (newanswer.includes("(Username)")) {
                  let name = document.getElementById("username-display");
                  let text = newanswer.replace("(Username)", name.textContent);
                  response = {message: `${text}`};
                } else {
                  response = {message: `${newanswer}`};
                }
              } else {
                if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                  let word2 = userQuestion.split("ist")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `ich weiß nicht, was ${word2} ist`};
                } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                  let word2 = userQuestion.split("is")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `i dont know what ${word2} is`};
                } else {
                  let userQuestion3 = userQuestion.replace(" ?", "?");
                  const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                  const questions3 = knowledgeBase.questions.map(q => q.question);
                  const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                  if (bestMatch3) {
                    const newanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                    if (newanswer == "Sorry but i dont know your Name") {
                      let name = document.getElementById("username-display");
                      response = {message: `${name.textContent}`};
                    } else if (newanswer.includes("(Username)")) {
                      let name = document.getElementById("username-display");
                      let text = newanswer.replace("(Username)", name.textContent);
                      response = {message: `${text}`};
                    } else {
                      response = {message: `${newanswer}`};
                    }
                  } else {
                    response = {message: `${idkanswer}`};
                  }
                }
              }
            } else {
              if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                let word2 = userQuestion.split("ist")[1];
                if (word2.includes("?")) {
                  word2 = word2.replace("?", "");
                }
                response = {message: `ich weiß nicht, was ${word2} ist`};
              } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                let word2 = userQuestion.split("is")[1];
                if (word2.includes("?")) {
                  word2 = word2.replace("?", "");
                }
                response = {message: `i dont know what ${word2} is`};
              } else {
                let userQuestion2 = userQuestion.replace(" ?", "?");
                const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
                const questions2 = knowledgeBase.questions.map(q => q.question);
                const bestMatch2 = findBestMatch2(userQuestion2, questions2);
                if (bestMatch2) {
                  const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                  if (newanswer == "Sorry but i dont know your Name") {
                    let name = document.getElementById("username-display");
                    response = {message: `${name.textContent}`};
                  } else if (newanswer.includes("(Username)")) {
                    let name = document.getElementById("username-display");
                    let text = newanswer.replace("(Username)", name.textContent);
                    response = {message: `${text}`};
                  } else {
                    response = {message: `${newanswer}`};
                  }
                } else {
                  response = {message: `${idkanswer}`};
                }
              }
            }
          }

          return response.message;
        } else if (chalange == "englisch") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (thequestion == "nothing") {
            await loadTasks();
            if (tasks.length === 0) {
              return 'No tasks available';
            }
            const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
            thequestion = randomTask.Frage;
            theanswer = randomTask.Antwort;
            return thequestion;

          } else {
            if (userQuestion === theanswer) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theanswer = randomTask.Antwort;
              return 'Richtig! hier ist die neue aufgabe. ' + thequestion;
            } else if (userQuestion.includes("idk")) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theoldanswer = theanswer;
              theanswer = randomTask.Antwort;
              return 'die richtige antwort ist: ' + theoldanswer + ' hier ist die neue aufgabe ' + thequestion;
            } else if (userQuestion.includes("nächste aufgabe")) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theoldanswer = theanswer;
              theanswer = randomTask.Antwort;
              return 'die richtige antwort ist: ' + theoldanswer + ' hier ist die neue aufgabe ' + thequestion;
            } else if (userQuestion.includes('zurück') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, du bist zurück im normalen gespräch";
            } else if (userQuestion.includes('gespräch') && userQuestion.includes('zurück')) {
              chalange = "nothing";
              clean();
              return "okay, du bist nun wieder im normalen gespräch";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
              chalange = "mathe";
              clean();
              return "okay, du lernst jetzt mathe";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
              chalange = "mathe";
              clean();
              return "okay, du übst jetzt mathe";
            } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
              chalange = "german";
              clean();
              return "okay, you're going to learn german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
            } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
              chalange = "german";
              clean();
              return "okay, you are going to practice german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
            } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to learn math now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to practice math now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
              chalange = "Equiz";
              clean();
              return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
              chalange = "Gquiz";
              clean();
              return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
            } else if (userQuestion.includes("ja") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "nothing";
              clean();
              return "okay, du bist zurück im normalen gespräch";
            } else if (userQuestion.includes("nein") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "englisch";
              return "okay, du bist nicht zurück im normalen gespräch";
            } else if (bestMatch2) {
              const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
              if (answer == "Sorry but i dont know your Name") {
                let name = document.getElementById("username-display");
                response = {message: `${name.textContent}`};
              } else if (answer.includes("(Username)")) {
                let name = document.getElementById("username-display");
                let text = answer.replace("(Username)", name.textContent);
                response = {message: `${text}`};
              } else {
                response = {message: `${answer}`};
              }

              if (parseInt(aotink) + 1 == 7) {
                asktg = "yes";
                return "möchtest du die aufgaben ignorieren und in das normale gespräch zurück?";
              } else {
                aotink = parseInt(aotink) + 1;
                return response.message;
              }
            } else {
              let userQuestion3 = userQuestion.replace(" ?", "?");
              const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
              const questions3 = knowledgeBase.questions.map(q => q.question);
              const bestMatch3 = findBestMatch2(userQuestion3, questions3);
              if (bestMatch3) {
                const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                response = {message: `${rnewanswer}`};
              } else {
                response = {message: 'Noch nicht richtig! Versuche es erneut.'};
              }
              return response.message;

            }
          }

        } else if (chalange == "german") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (thequestion2 == "nothing") {
            await loadTasks2();
            if (tasks2.length === 0) {
              return 'No tasks available';
            }
            const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
            thequestion2 = randomTask2.Frage;
            theanswer2 = randomTask2.Antwort;
            return thequestion2;

          } else {
            if (userQuestion == theanswer2) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theanswer2 = randomTask2.Antwort;
              return 'correct! here you have a new question: ' + thequestion2;
            } else if (userQuestion.includes("idk")) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theoldanswer2 = theanswer2;
              theanswer2 = randomTask2.Antwort;
              return 'the correct answer is: ' + theoldanswer2 + ' here you have a new question ' + thequestion2;
            } else if (userQuestion.includes("next question")) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theoldanswer2 = theanswer2;
              theanswer2 = randomTask2.Antwort;
              return 'the correct answer is: ' + theoldanswer2 + ' here you have a new question ' + thequestion2;
            } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
              chalange = "englisch";
              clean();
              return "okay, du lernst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
            } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
              chalange = "englisch";
              clean();
              return "okay, du übst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
              chalange = "mathe";
              clean();
              return "okay, du lernst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächte aufgabe geben";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
              chalange = "mathe";
              clean();
              return "okay, du übst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächte aufgabe geben";
            } else if (userQuestion.includes('back') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, you're back in the normal chat";
            } else if (userQuestion.includes('normal') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, you are back in the normal chat";
            } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to learn math now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to practice math now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
              chalange = "Equiz";
              clean();
              return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
            } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
              chalange = "Gquiz";
              clean();
              return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
            } else if (userQuestion.includes("yes") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "nothing";
              clean();
              return "okay, you are back in the normal chat";
            } else if (userQuestion.includes("no") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "german";
              return "okay, you are not back in the normal chat";
            } else if (bestMatch2) {
              const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
              if (answer == "Sorry but i dont know your Name") {
                let name = document.getElementById("username-display");
                response = {message: `${name.textContent}`};
              } else if (answer.includes("(Username)")) {
                let name = document.getElementById("username-display");
                let text = answer.replace("(Username)", name.textContent);
                response = {message: `${text}`};
              } else {
                response = {message: `${answer}`};
              }
              if (parseInt(aotink) + 1 == 7) {
                asktg = "yes";
                return "do you want to ignore the tasks and go back to the normal chat?";
              } else {
                aotink = parseInt(aotink) + 1;
                return response.message;
              }
            } else {
              let userQuestion3 = userQuestion.replace(" ?", "?");
              const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
              const questions3 = knowledgeBase.questions.map(q => q.question);
              const bestMatch3 = findBestMatch2(userQuestion3, questions3);
              if (bestMatch3) {
                const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                response = {message: `${rnewanswer}`};
              } else {
                response = {message: 'Not right yet! try again.'};
              }
              /*return response.message;*/
              return response.message;
            }
          }

        } else if (chalange == "mathe") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (themathquestion == "" && userQuestion.includes("leicht")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            leicht1 = "leicht";
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (themathquestion == "" && !userQuestion.includes("leicht")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (userQuestion == themathanswer && leicht1 != "leicht") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'Richtig! hier hast du die nächste aufgabe ' + themathquestion;
          } else if (userQuestion == themathanswer && leicht1 == "leicht") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'Richtig! hier hast du die nächste aufgabe ' + themathquestion;
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht1 != "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            //the oldmathanswer to string
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht1 == "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("nächste aufgabe") && leicht1 != "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            //the oldmathanswer to string
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("nächste aufgabe") && leicht1 == "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('zu') && userQuestion.includes('gespräch')) {
            chalange = "nothing";
            clean();
            return "okay, du bist nun wieder im normalen gespräch";
          } else if (userQuestion.includes('zurück') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, du bist zurück im normalen chat";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to learn math now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
          } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to practice math now. if you don't know the answer, just say 'idk' and i'll give you the next question";
          } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
            chalange = "Equiz";
            clean();
            return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
          } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
            chalange = "Gquiz";
            clean();
            return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
          } else if (userQuestion.includes("ja") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "nothing";
            clean();
            return "okay, du bist zurück im normalen gespräch";
          } else if (userQuestion.includes("nein") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "mathe";
            return "okay, du bist nicht zurück im normalen gespräch";
          } else if (bestMatch2) {
            const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }
            /*return response.message;*/
            if (parseInt(aotink) + 1 == 7) {
              asktg = "yes";
              return "möchtest du die aufgaben ignorieren und wieder ins normale gespräch?";
            } else {
              aotink = parseInt(aotink) + 1;
              return response.message;
            }
          } else {
            let userQuestion3 = userQuestion.replace(" ?", "?");
            const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
            const questions3 = knowledgeBase.questions.map(q => q.question);
            const bestMatch3 = findBestMatch2(userQuestion3, questions3);
            if (bestMatch3) {
              const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
              response = {message: `${rnewanswer}`};
            } else {
              response = {message: 'Noch nicht richtig! Versuchen es erneut.'};
            }
            return response.message;
          }
        } else if (chalange == "math") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (themathquestion == "" && !userQuestion.includes("easy")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (themathquestion == "" && userQuestion.includes("easy")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            leicht2 = "easy";
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (userQuestion == themathanswer && leicht2 != "easy") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'correct! there you have the next question: ' + themathquestion;
          } else if (userQuestion == themathanswer && leicht2 == "easy") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'correct! there you have the next question: ' + themathquestion;
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht2 != "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht2 == "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }

          } else if (themathquestion != "" && userQuestion.includes("next question") && leicht2 != "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("question") && leicht2 == "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            let operator2;
            if (operator == "/"){
              operator2 = "÷";
            }else if (operator == "*"){
              operator2 = "×";
            }else {
              operator2 = operator;
            }
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator2} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }

          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächste aufgabe geben. versuche bei der übersetzung der wörter keine leerzeichen zu anfang und ende der wörter zu haben und versuche keine zeichen wie: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, ', zu benutzen";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
            chalange = "mathe";
            clean();
            return "okay, du lernst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächte aufgabe geben";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
            chalange = "mathe";
            clean();
            return "okay, du übst jetzt mathe. wenn du die antwort zur frage nicht weißt, schreibe 'idk' und ich werde dir die nächte aufgabe geben";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now. if you don't know the answer, just say 'idk' and i'll give you the next question. when answering please try avoiding any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
          } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
            chalange = "Equiz";
            clean();
            return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
          } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
            chalange = "Gquiz";
            clean();
            return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
          } else if (userQuestion.includes('back') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, you are back in the normal chat now";
          } else if (userQuestion.includes('normal') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, you're in the normal chat now";
          } else if (userQuestion.includes("yes") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "nothing";
            clean();
            return "okay, you're back in the normal chat now";
          } else if (userQuestion.includes("no") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "math";
            return "okay, you are not back in the normal chat";
          } else if (bestMatch2) {
            const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }
            if (parseInt(aotink) + 1 == 7) {
              asktg = "yes";
              return "do you want to ignore the tasks and go back to the normal chat?";
            } else {
              aotink = parseInt(aotink) + 1;
              return response.message;
            }
          } else {
            let userQuestion3 = userQuestion.replace(" ?", "?");
            const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
            const questions3 = knowledgeBase.questions.map(q => q.question);
            const bestMatch3 = findBestMatch2(userQuestion3, questions3);
            if (bestMatch3) {
              const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
              response = {message: `${rnewanswer}`};
            } else {
              response = {message: 'Not right yet! try again.'};
            }
            return response.message;
          }
        } else if (chalange === "Equiz") {
              const userQuestion = userMessage.toLowerCase();
              const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
              const questions = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion, questions);

              const getRandomQuestion = () => {
                  let randomQQ;
                  do {
                      randomQQ = EquizV[Math.floor(Math.random() * EquizV.length)];
                  } while (EquizIndex.includes(randomQQ.Frage) && EquizIndex.length < EquizV.length);
                  return randomQQ;
              };

              const generateNewQuestion = () => {
                  if (EquizV.length === 0) return 'No tasks available';
                  if (EquizIndex.length >= EquizV.length) {
                      isaskingitc = "yes";
                      return 'Do you want to repeat the quiz?';
                  }
                  const randomQQ = getRandomQuestion();
                  thequestion = randomQQ.Frage;
                  theanswer = randomQQ.Antwort;
                  EquizIndex.push(thequestion);
                  return thequestion;
              };

              if (thequestion === "nothing") {
                  await EQquiz();
                  return generateNewQuestion();
              } else {
                  if (isaskingitc != "no" && userQuestion.includes('yes')) {
                    isaskingitc = "no";
                    EquizIndex = [];
                    await EQquiz();
                    if (EquizIndex.length === 0){
                      const randomQQ = getRandomQuestion();
                      thequestion = randomQQ.Frage;
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      EquizIndex.push(thequestion);
                      return 'Okay, you\'re going to repeat the quiz now! Here is the new question: ' + thequestion;
                    }
                  } else if (isaskingitc != "no" && userQuestion.includes('no')) {
                    chalange = "nothing";
                    isaskingitc = "no";
                    clean();
                    EquizIndex = [];
                    return "Okay, you're not going to repeat the quiz now! You are back in the normal chat.";
                  } else if (userQuestion === theanswer) {
                      return 'great 🎉! Here is the next question: ' + generateNewQuestion();
                  } else if (userQuestion.includes("idk")) {
                      if (EquizV.length === 0) return 'No tasks available';
                      const randomQQ = getRandomQuestion();
                      let saythefollowing = randomQQ.Frage;
                      if (EquizIndex.length >= EquizV.length) {
                          isaskingitc = "yes";
                          saythefollowing = 'Do you want to repeat the quiz?';
                      }
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      EquizIndex.push(thequestion);
                      return 'The correct answer is: ' + theoldanswer + '. Here is the next question: ' + saythefollowing;
                  } else if (userQuestion.includes("next question")) {
                      if (EquizV.length === 0) return 'No tasks available';
                      const randomQQ = getRandomQuestion();
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      EquizIndex.push(thequestion);
                      return 'okay, here is the next answer: ' + theoldanswer + '. here is the next question: ' + randomQQ.Frage;
                  } else if (userQuestion.includes('back') && userQuestion.includes('chat')) {
                      chalange = "nothing";
                      clean();
                      return "Okay, you are back in the normal chat now.";
                  } else if (userQuestion.includes('back') && userQuestion.includes('conversation')) {
                      chalange = "nothing";
                      clean();
                      return "Okay, you are back in the normal conversation.";
                  } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
                      chalange = "mathe";
                      clean();
                      return "Okay, du lernst jetzt Mathe.";
                  } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
                      chalange = "mathe";
                      clean();
                      return "Okay, du übst jetzt Mathe.";
                  } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
                      chalange = "german";
                      clean();
                      return "Okay, you're going to learn German now. If you don't know the answer, just say 'idk' and I'll give you the next question. When answering, please avoid any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
                  } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
                      chalange = "german";
                      clean();
                      return "Okay, you are going to practice German now. If you don't know the answer, just say 'idk' and I'll give you the next question. When answering, please avoid any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
                  } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
                      chalange = "math";
                      clean();
                      return "Okay, you are going to learn math now. If you don't know the answer, just say 'idk' and I'll give you the next question.";
                  } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
                      chalange = "math";
                      clean();
                      return "Okay, you are going to practice math now. If you don't know the answer, just say 'idk' and I'll give you the next question.";
                  } else if (userQuestion.includes('spielen') && userQuestion.includes('quiz')) {
                    chalange = "Gquiz";
                    clean();
                    return "okay, du wirst nun ein quiz spielen. wenn du die antwort nicht kennst, sag einfach 'idk' und dann frage ich dir die nöchste frage.";
                  } else if (userQuestion.includes("yes") && asktg === "yes") {
                      aotink = "0";
                      asktg = "no";
                      chalange = "nothing";
                      clean();
                      return "Okay, you are back in the normal conversation.";
                  } else if (userQuestion.includes("no") && asktg === "yes") {
                      aotink = "0";
                      asktg = "no";
                      chalange = "englisch";
                      return "Okay, you are not back in the normal conversation.";
                  } else if (bestMatch2) {
                      const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
                      if (answer === "Sorry but I don't know your name") {
                          let name = document.getElementById("username-display");
                          response = { message: `${name.textContent}` };
                      } else if (answer.includes("(Username)")) {
                          let name = document.getElementById("username-display");
                          let text = answer.replace("(Username)", name.textContent);
                          response = { message: `${text}` };
                      } else {
                          response = { message: `${answer}` };
                      }

                      if (parseInt(aotink) + 1 === 7) {
                          asktg = "yes";
                          return "do you want to ignore the question and go back to the normal conversation?";
                      } else {
                          aotink = parseInt(aotink) + 1;
                          return response.message;
                      }
                  } else {
                      let userQuestion3 = userQuestion.replace(" ?", "?");
                      const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                      const questions3 = knowledgeBase3.questions.map(q => q.question);
                      const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                      if (bestMatch3) {
                          const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                          return `${rnewanswer}`;
                      } else {
                          return 'Not right yet! Try again.';
                      }
                  }
              }
        } else if (chalange === "Gquiz") {
              const userQuestion = userMessage.toLowerCase();
              const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
              const questions = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion, questions);

              const getRandomQuestion = () => {
                  let randomQQ;
                  do {
                      randomQQ = GquizV[Math.floor(Math.random() * GquizV.length)];
                  } while (GquizIndex.includes(randomQQ.Frage) && GquizIndex.length < GquizV.length);
                  return randomQQ;
              };

              const generateNewQuestion = () => {
                  if (GquizV.length === 0) return 'keine aufgaben verfügbar';
                  if (GquizIndex.length >= GquizV.length) {
                      isaskingitc = "yes";
                      return 'möchtest du das quiz wiederholen?';
                  }
                  const randomQQ = getRandomQuestion();
                  thequestion = randomQQ.Frage;
                  theanswer = randomQQ.Antwort;
                  GquizIndex.push(thequestion);
                  return thequestion;
              };

              if (thequestion === "nothing") {
                  await GQquiz();
                  return generateNewQuestion();
              } else {
                  if (isaskingitc != "no" && userQuestion.includes('ja')) {
                    isaskingitc = "no";
                    GquizIndex = [];
                    await GQquiz();
                    if (GquizIndex.length === 0){
                      const randomQQ = getRandomQuestion();
                      thequestion = randomQQ.Frage;
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      GquizIndex.push(thequestion);
                      return 'Okay, du wiederholst nun das quiz! hier ist die erste aufgabe: ' + thequestion;
                    }
                  } else if (isaskingitc != "no" && userQuestion.includes('nein')) {
                    chalange = "nothing";
                    isaskingitc = "no";
                    clean();
                    GquizIndex= [];
                    return "Okay, du wirst das quiz nicht wiederholen! du bist nun zurück im normalen chat.";
                  } else if (userQuestion === theanswer) {
                      return 'super 🎉! hier ist die nächste frage: ' + generateNewQuestion();
                  } else if (userQuestion.includes("idk")) {
                      if (GquizV.length === 0) return 'keine fragen verfügbar';
                      const randomQQ = getRandomQuestion();
                      let saythefollowing = randomQQ.Frage;
                      if (GquizIndex.length >= GquizV.length) {
                          isaskingitc = "yes";
                          saythefollowing = 'möchtest du das quiz wiederholen?';
                      }
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      GquizIndex.push(thequestion);
                      return 'die richtige antwort ist: ' + theoldanswer + '. hier ist die nächste aufgabe: ' + saythefollowing;
                  } else if (userQuestion.includes("nächste aufgabe")) {
                      if (GquizV.length === 0) return 'keine fragen verfügbar';
                      const randomQQ = getRandomQuestion();
                      const theoldanswer = theanswer;
                      theanswer = randomQQ.Antwort;
                      GquizIndex.push(thequestion);
                      return 'Die richtige Antwort ist: ' + theoldanswer + '. Hier ist die neue Aufgabe: ' + randomQQ.Frage;
                  } else if (userQuestion.includes('zurück') && userQuestion.includes('chat')) {
                      chalange = "nothing";
                      clean();
                      return "Okay, du bist zurück im normalen Gespräch.";
                  } else if (userQuestion.includes('gespräch') && userQuestion.includes('zurück')) {
                      chalange = "nothing";
                      clean();
                      return "Okay, du bist nun wieder im normalen Gespräch.";
                  } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
                      chalange = "mathe";
                      clean();
                      return "Okay, du lernst jetzt Mathe.";
                  } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
                      chalange = "mathe";
                      clean();
                      return "Okay, du übst jetzt Mathe.";
                  } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
                      chalange = "german";
                      clean();
                      return "Okay, you're going to learn German now. If you don't know the answer, just say 'idk' and I'll give you the next question. When answering, please avoid any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
                  } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
                      chalange = "german";
                      clean();
                      return "Okay, you are going to practice German now. If you don't know the answer, just say 'idk' and I'll give you the next question. When answering, please avoid any spaces at the beginning and end of the word and try not to use any symbols like: !, ?, $, %, &, (, ), [, ], {, }, ;, :, <, >, /, ,, ., -, +, =, *, ^, #, @, °, °, °, �, '";
                  } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
                      chalange = "math";
                      clean();
                      return "Okay, you are going to learn math now. If you don't know the answer, just say 'idk' and I'll give you the next question.";
                  } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
                      chalange = "math";
                      clean();
                      return "Okay, you are going to practice math now. If you don't know the answer, just say 'idk' and I'll give you the next question.";
                  } else if (userQuestion.includes('play') && userQuestion.includes('quiz')) {
                    chalange = "Equiz";
                    clean();
                    return "okay, you are going to play a quiz now. if you don't know the answer, just say 'idk' and i'll give you the next question.";
                  } else if (userQuestion.includes("ja") && asktg === "yes") {
                      aotink = "0";
                      asktg = "no";
                      chalange = "nothing";
                      clean();
                      return "Okay, du bist zurück im normalen Gespräch.";
                  } else if (userQuestion.includes("nein") && asktg === "yes") {
                      aotink = "0";
                      asktg = "no";
                      chalange = "englisch";
                      return "Okay, du bist nicht zurück im normalen Gespräch.";
                  } else if (bestMatch2) {
                      const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
                      if (answer === "Sorry but I don't know your name") {
                          let name = document.getElementById("username-display");
                          response = { message: `${name.textContent}` };
                      } else if (answer.includes("(Username)")) {
                          let name = document.getElementById("username-display");
                          let text = answer.replace("(Username)", name.textContent);
                          response = { message: `${text}` };
                      } else {
                          response = { message: `${answer}` };
                      }

                      if (parseInt(aotink) + 1 === 7) {
                          asktg = "yes";
                          return "Möchtest du die Aufgaben ignorieren und in das normale Gespräch zurück?";
                      } else {
                          aotink = parseInt(aotink) + 1;
                          return response.message;
                      }
                  } else {
                      let userQuestion3 = userQuestion.replace(" ?", "?");
                      const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                      const questions3 = knowledgeBase3.questions.map(q => q.question);
                      const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                      if (bestMatch3) {
                          const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                          return `${rnewanswer}`;
                      } else {
                          return 'Noch nicht richtig! versuche es nochmal.';
                      }
                  }
              }
        }



      } catch (error) {
        return 'there was an error';
      }
    }


    function newknowledge() {
      var userInput = document.getElementById('user-input');
      var userMessage2 = userInput.value.trim();
      if (userMessage2 !== '') {
        addMessage(userMessage2, 'sent');


        // Simulierte Antwort vom Bot
        getBotResponse2(userMessage2)
          .then(response => {
            setTimeout(addMessage(response, 'received'), 1000);

            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));

        userInput.value = '';
      }
    }

    function getBotResponse2(userMessage2) {
      // Daten für die POST-Anfrage vorbereiten
      learnnonewthing();
      var data = {user_input: userMessage2, new_question: document.getElementById("remember").textContent};

      // AJAX-Anfrage senden
      return fetch('/new_knowledge', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          console.log(data); // Ausgabe der Antwort vom Server
          // Hier können Sie weitere Aktionen basierend auf der Serverantwort durchführen
          return data.message;
        })
        .catch(error => console.error('Error fetching bot response:', error));
    }

    function learnnewthing() {
      document.getElementById("user-input").placeholder = "Enter the Answer to that question here...";
    }
    function learnnonewthing() {
      document.getElementById("user-input").placeholder = "Type your message...";
    }
    var font2 = 'h3';
    function addMessage(text, type) {
      totalmessages = totalmessages + 1;
      var chatMessages = document.getElementById('chat-messages');
      var messageElement = document.createElement(font2);
      messageElement.classList.add('message', type);
      messageElement.id = parseInt(idnum) + 1;
      let idnumv = parseInt(idnum) + 1;
      /* make the id num a string */
      idnum = idnumv.toString();
      let thetexttoadd = text;
      messageElement.textContent = thetexttoadd;
      chatMessages.appendChild(messageElement);
      say2(thetexttoadd);
      const messageElements = document.querySelectorAll('.message');
      messageElement.addEventListener('click', () => {
        handleEditMessage(messageElement);
      });
    }

    function change_mood() {
      document.body.classList.toggle("dark-theme");
      if (document.body.classList.contains("dark-theme")) {
        document.getElementById("changethemebtn").textContent = light2;
      } else {
        document.getElementById("changethemebtn").textContent = dark2;
      }
    }
    function font1() {
      font2 = 'h1';
    }
    function font3() {
      font2 = 'h3';
    }
    let randri = ['Hi', 'Hello', 'How are you?', 'i want to play Memory', 'i want to play Tic Tac Toe', 'i want to play Tile Tumble', 'i want to practice german', 'i want to practice math', 'hi AIlury'];
    function setinputvalue() {
      const randq = randri[Math.floor(Math.random() * randri.length)];
      const input = document.getElementById('user-input');
      input.value = randq;
    }
    function helpbtn() {
      document.getElementById("btn3").textContent = "this function does not exist";
      setTimeout(function () {
        document.getElementById("btn3").textContent = "Help";
      }, 5000);
    }
    function isDarkMode() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            changeFavicon('AIlurylogo2.ico');
            return true;
        } else {
            changeFavicon('AIlurylogo.ico');
            return false;
        }
    }

    function changeFavicon(faviconurl) {
        let favilink = document.getElementById("faviconico");

        if (favilink) {
            favilink.href = faviconurl;
        } else {
            // Fallback, falls das Element nicht existiert
            favilink = document.createElement('link');
            favilink.id = 'faviconico';
            favilink.rel = 'icon';
            favilink.href = faviconurl;
            favilink.type = 'image/x-icon';
            document.head.appendChild(favilink);
        }
    }

    // Funktion zur Aktualisierung des Modus
    function updateModeInfo() {
        var modeInfo2 = document.getElementById("changethemebtn");
        if (isDarkMode()) {
            modeInfo2.textContent = light2;
            change_mood();
        } else {
            modeInfo2.textContent = dark2;
        }
    }

    // Initiale Aufruf der Funktion
    updateModeInfo();

    // Änderungen im Modusvorlieben überwachen
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateModeInfo);

    let speech = new SpeechSynthesisUtterance();  // Sicherstellen, dass keine Fehler aufgrund dieses Objekts auftreten

    let voices = [];
    let speakon = document.getElementById("speakbtn");

    window.speechSynthesis.onvoiceschanged = () => {
      voices = window.speechSynthesis.getVoices();
      speech.voice = voices[0];

      voices.forEach((voice, i) => (voiceSelect.options[i] = new Option(voice.name, i)));
    }
    let sayit = "yes";
    function say2(textfs) {
      sayit = "yes";
      let element = document.getElementById('speakbtn');
      if (element.textContent == "♩ spre...: an") {
        if (sayit == "yes"){
          speech.text = textfs;
          window.speechSynthesis.speak(speech);
          sayit = "no";
        }
      }else if (element.textContent == "♩ speak: on") {
        if (sayit == "yes"){
          speech.text = textfs;
          window.speechSynthesis.speak(speech);
          sayit = "no";
        }
      }
    }
    /*speakon.addEventListener("click", () => {
      speakonoff();
    });*/
    speakon.addEventListener('click', function () {
      if (speakon.textContent == "♩ speak: on") {
        speakon.textContent = "♩ speak: off";
      } else if (speakon.textContent == "♩ spre...: an") {
        speakon.textContent = "♩ spre...: ab";
      } else if (speakon.textContent == "♩ spre...: ab") {
        speakon.textContent = "♩ spre...: an";
      }else {
        speakon.textContent = "♩ speak: on";
      }
      // Ändert den Textinhalt des geklickten Elements
    });
    function speakonoff() {
      if (speakon.textContent == "♩ speak: on") {
        speakon.textContent = "♩ speak: off";
      } else {
        speakon.textContent = "♩ speak: on";
      }
    }
    /*speakon.addEventListener("click", function() {
      var speech1 = true;
      window.SpeechRecognition = window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.interimResults = true;

      recognition.addEventListener('result', (e) => {
        const transcript = Array.from(e.results)
        .map(result =>result[0])
        .map(result => result.transcript)
        document.getElementById("user-input").value = transcript;
      });
      if (speech1 == true){
        recognition.start();
      }
    });*/
    /*function say() {
      speech.text = document.getElementById("remember").textContent;
      window.speechSynthesis.speak(speech);
    }*/
    const translations = {
        en: {
            instructions: `<strong>Instructions:</strong><br><br>

- <strong>Buttons:</strong><br><br>

  - <strong>Notifications:</strong> Clicking the notification button will display information about the latest update.<br><br>

  - <strong>Help:</strong> Clicking the help button opens a small window with up to four buttons. If you have a problem, click the button corresponding to your question. The text under the buttons will change to guide you in solving your issue or inform you about the steps taken to address it.<br><br>

  - <strong>Log Out:</strong> Clicking the log out button will take you to your profile page, where you can upload a profile picture or change your name. To return to the chat, click the "Start" button, which also signifies your agreement to the user guidelines and Privacy Policy.<br><br>

  - <strong>Speak:</strong> Clicking the speak button will cause the chat to be read aloud. Click it again to stop the reading.<br><br>

  - <strong>Theme:</strong> Clicking the light/dark theme button will toggle the website between light and dark modes, depending on the current setting.<br><br>

  - <strong>Messages:</strong> You can delete or edit any message you’ve written by clicking on it.<br><br>

  - <strong>Random:</strong> Clicking the random button will generate a random question or sentence in the input field.<br><br>

  - <strong>Background:</strong> Clicking the Background button allows you to upload a background image for the chat. If a background image is already set, it will be removed.<br><br>

  - <strong>Profile Pic:</strong> Clicking the Profile Pic button allows you to upload a profile picture.<br><br>

  - <strong>German:</strong> Clicking the German button will translate the website into German.<br><br><br>

- <strong>Functions:</strong><br>
  To play an emoji game, type: "I want to play the emoji game." AIlury will give you a list of emojis. Count the emojis from left to right to find the different one and send AIlury the number, or send the different emoji itself.<br>

  To practice German, type: "I want to practice German," and AIlury will provide words for translation.<br>

  For math practice, type: "I want to practice math," and AIlury will give you math exercises.<br>

  To play a quiz, type: "I want to play a quiz," and AIlury will ask you questions.<br>

  For Tic Tac Toe, type: "I want to play Tic Tac Toe," and AIlury will open the game on the screen.<br>

  To play Memory, type: "I want to play Memory," and AIlury will open the game on the screen.<br>

  For Tile Tumble, type: "I want to play Tile Tumble," and AIlury will open the game on the screen.<br>

  If you don’t know how to answer a text function, simply type: "idk."<br><br>

- <strong>Text Filters and Keywords:</strong><br>
  AIlury offers many functions. You can use AIlury to replace text, for example, "replace I with you in I eat." You can also check if a text is within another, such as "is hello in hello how are you?" or remove text from another, like "take hello out of hello how are you?" You can ask AIlury to say something by typing, for example, "say: hello." AIlury can also solve basic math problems or compare numbers, such as "is 20 > 21?" or "is 20 = 20?" Additionally, AIlury can provide random names for people or general use, e.g., "what would be a good name for my dog?" or "give me a female name." You can ask AIlury to choose a number between two specified numbers by typing, "choose a number from 10 to 20." AIlury can also count to a desired number by typing, "count till 100." These are just some of the functions AIlury offers and are continually being improved.<br><br>

I hope this gives you a good overview of what AIlury can do!`,
          logout: `← Logout`,
          speak: `♩ speak: off`,
          random: `↔ Random`,
          language: `⚑ German`,
          placeholder: `Write AIlury…`,
          username: `Guest`,
          tc1fev: 'if you click the speak button you can make the bot read the chat or not',
          tc2fev: 'you can change the theme with this button',
          tc3fev: 'click this button if you do not know how to start a conversation',
          tc4fev: 'if you click the speak button you can make the bot read the chat or not',
          tc5fev: 'you can change the theme with this button',
          tc6fev: 'click this button if you do not know how to start a conversation',
          tc7fev: 'your profile picture is here, if you uploaded one!',
          tc8fev: 'your user-name is here, if you have one!',
          tc9fev: 'Durch Klicken auf diese Taste wird die Sprache auf Deutsch geändert',
          idkanswerv: `sorry but i have no idea what to answer 😅`,
          youfailedChallengev: "you failed the challenge try a new challenge in 5 minutes",
          youpassedChallengev: "great you passed the challenge",
          textsendv: "send",
          textmessagesv: "messages",
          textpracticemathv: "practice math",
          textplayquizv: "play the quiz",
          textpracticegermanv: "practice german",
          textclickrandomv: "click the \"random\" button",
          textclickchagemoodv: "click the \"light/dark\" button",
          nmyv: `no messages yet<a id="inscructionlink" onclick="instructionlinkclick()">instructions</a>`,
          memorygameh1v: `Memory Game`,
          memorygamepv: `Player Score: `,
          memorygamepcv: ` AIlury Score: `,
          draw_pilev: `Draw`,
          cardgameresetbtnv: `reset`,
          tuctactoegamesetting1v: `you vs AIlury`,
          tuctactoegamesetting2v: `Two players`,
          tictactoerestartbtnv: `Restart`,
          leftv: `←`,
          rotatev: `rotate`,
          rightv: `→`,
          downv: `↓`,
          resetbtntwov: `reset`,
          tiletumblescorecontainerv: `score `,
          youwonplayertextv: `you won!`,
          youwoncomputertextv: `AIlury won!`,
          winstextv: `wins`,
          drawtextv: `Draw`,
          memorygameyouwoncongratsv: `Congratulations! You won!`,
          memorygameyoulostbetterlucknexttimev: `You lost! Better luck next time!`,
          löschbtnv: `⊗ Trash`,
          breakbtnv: `⚠ Stop`,
          editbtnv: `✎ Edit`,
          copybtnv: `● Copy`,
          profilebtnv: `○ Profile pic`,
          instructionbtnv: `? Instruction`,
          dyhfptttv: `did you have fun playing Tic Tac Toe?`,
          iwtptegv: "i want to play the emoji game!",
          iwtpgv: "i want to practice german!",
          iwtptqv: "i want to play the quiz!",
          iwtpmv: "i want to practice math!",
          randriv: ['Hi', 'Hello', 'How are you?', 'i want to play Memory', 'i want to play Tic Tac Toe', 'i want to play Tile Tumble', 'i want to practice german', 'i want to practice math', 'hi AIlury'],
          notificationstext: `<strong>Update 2.1.2: Introducing the 2nd Update in the Heli Update series</strong><br><br>
      We are thrilled to unveil Update 2.1.2, the latest release in the Heli Update series, designed to enhance your user experience with a modern interface.<br><br>

      <strong>Key Features:</strong><br><br>

      1. <strong>New Website Layout</strong>:<br>
      - <em>Streamlined Interface</em>: All editing buttons are now conveniently located on the left sidebar, making navigation easier and more intuitive.<br><br>

      2. <strong>Optimized Button Design</strong>:<br>
      - <em>Sleeker Look</em>: Button icons have been resized to be smaller, creating a cleaner and more organized appearance.<br><br>

      3. <strong>Compact Input Field</strong>:<br>
      - <em>Efficient Space Use</em>: The input field has been reduced in size, allowing for more content to be displayed on the screen.<br><br>

      4. <strong>Smaller Profile Picture</strong>:<br>
      - <em>Refined Aesthetics</em>: The profile picture has been made smaller, contributing to a more minimalist and focused design.<br><br>

      5. <strong>Removed Unnecessary Buttons</strong>:<br>
      - <em>Decluttered Interface</em>: Redundant buttons have been removed, simplifying the user experience.<br><br>

      6. <strong>New Customization Options</strong>:<br>
      - <em>Enhanced Customization</em>: Additional buttons have been added to allow for more personalization of the chat and profile settings.<br><br>

      7. <strong>Improved Response Accuracy</strong>:<br>
      - <em>Smarter Interactions</em>: Responses have been refined to provide more accurate and relevant answers to your queries.<br><br>
      Stay tuned for more exciting updates in the Heli Update Series!`,
        },
        de: {
            instructions: `<strong>Anleitungen:</strong><br><br>

- <strong>knöpfe:</strong><br><br>

  - <strong>Benachrichtigungen:</strong> Durch Klicken auf die Benachrichtigungsschaltfläche werden Informationen über das neueste Update angezeigt.<br><br>

  - <strong>Hilfe:</strong> Ein Klick auf die Hilfeschaltfläche öffnet ein kleines Fenster mit bis zu vier Schaltflächen. Wenn Sie ein Problem haben, klicken Sie auf die Schaltfläche, die Ihrer Frage entspricht. Der Text unter den Schaltflächen wird sich ändern, um Ihnen bei der Lösung Ihres Problems zu helfen oder Sie über die Maßnahmen zu informieren, die ergriffen wurden.<br><br>

  - <strong>Abmelden:</strong> Durchs Klicken auf den Abmelde knopf gelangen Sie zu Ihrer Profilseite, auf der Sie ein Profilbild hochladen oder Ihren Namen ändern können. Um zum Chat zurückzukehren, klicken Sie auf die "Start"-Schaltfläche, was auch Ihre Zustimmung zu den Nutzungsrichtlinien und der Datenschutzrichtlinie bedeutet.<br><br>

  - <strong>Sprachsynthese:</strong> Durchs Klicken auf den Sprachsynthese knopf wird der Chat laut vorgelesen. Klicken Sie erneut, um das Vorlesen zu stoppen.<br><br>

  - <strong>Design:</strong> Durchs Klicken auf den knopf für den Hellmodus/Dunkelmodus wird die Website zwischen hellen und dunklen Modi umgeschaltet, je nach aktuellem Setting.<br><br>

  - <strong>Nachrichten:</strong> Sie können jede von Ihnen geschriebene Nachricht löschen oder bearbeiten, indem Sie darauf klicken.<br><br>

  - <strong>Zufall:</strong> Durchs Klicken auf den Zufalls-knopf wird eine zufällige Frage oder ein Satz im Eingabefeld generiert.<br><br>

  - <strong>Hintergrund:</strong> Durchs Klicken auf den Hintergrund-knopf können Sie ein Hintergrundbild für den Chat hochladen. Wenn bereits ein Hintergrundbild vorhanden ist, wird es entfernt.<br><br>

  - <strong>Profilbild:</strong> Durchs Klicken auf den Profilbild-knopf können Sie ein Profilbild hochladen.<br><br>

  - <strong>Englisch:</strong> Durchs Klicken auf den Englisch-knopf wird die Website auf Deutsch übersetzt.<br><br><br>

- <strong>Funktionen:</strong><br>
  Um ein Emoji-Spiel zu spielen, geben Sie ein: "Ich möchte das Emoji-Spiel spielen." AIlury gibt Ihnen eine Liste von Emojis. Zählen Sie die Emojis von links nach rechts, bis Sie das unterschiedliche Emoji finden, und senden Sie AIlury die Zahl oder das unterschiedliche Emoji selbst.<br>

  Um Deutsch zu üben, geben Sie ein: "Ich möchte Deutsch üben," und AIlury wird Ihnen Wörter zum Übersetzen geben.<br>

  Für Mathematikübungen geben Sie ein: "Ich möchte Mathematik üben," und AIlury wird Ihnen Mathematikaufgaben geben.<br>

  Um ein Quiz zu spielen, geben Sie ein: "Ich möchte ein Quiz spielen," und AIlury wird Ihnen Fragen stellen.<br>

  Für Tic Tac Toe geben Sie ein: "Ich möchte Tic Tac Toe spielen," und AIlury öffnet das Spiel auf dem Bildschirm.<br>

  Um Memory zu spielen, geben Sie ein: "Ich möchte Memory spielen," und AIlury öffnet das Spiel auf dem Bildschirm.<br>

  Für Tile Tumble geben Sie ein: "Ich möchte Tile Tumble spielen," und AIlury öffnet das Spiel auf dem Bildschirm.<br>

  Wenn Sie nicht wissen, wie Sie eine Textfunktion beantworten sollen, geben Sie einfach "idk" ein.<br><br>

- <strong>Textfilter und Schlüsselwörter:</strong><br>
  AIlury bietet viele Funktionen. Sie können AIlury verwenden, um Text zu ersetzen, zum Beispiel "ersetze ich durch dich in Ich esse." Sie können auch überprüfen, ob ein Text in einem anderen Text enthalten ist, z.B. "ist hello in hello how are you?" oder Text aus einem anderen entfernen, wie "nehme hello aus hello how are you?" Sie können AIlury bitten, etwas zu sagen, indem Sie zum Beispiel "sage: hello" eingeben. AIlury kann auch grundlegende mathematische Probleme lösen oder Zahlen vergleichen, wie "ist 20 > 21?" oder "ist 20 = 20?" Zusätzlich kann AIlury zufällige Namen für Personen oder allgemeine Zwecke liefern, z.B. "Was wäre ein guter Name für meinen Hund?" oder "Gib mir einen weiblichen Namen." Sie können AIlury auch bitten, eine Zahl zwischen zwei angegebenen Zahlen auszuwählen, indem Sie "wähle eine Zahl von 10 bis 20" eingeben. AIlury kann auch bis zu einer gewünschten Zahl zählen, indem Sie "zähle bis 100" eingeben. Dies sind nur einige der Funktionen, die AIlury bietet und die kontinuierlich verbessert werden.<br><br>

Ich hoffe, dies gibt Ihnen einen guten Überblick darüber, was AIlury kann!`,
          logout: `← Ausloggen`,
          speak: `♩ spre...: ab`,
          random: `↔ zufällig`,
          language: `⚑ Englisch`,
          placeholder: `Schreibe AIlury…`,
          username: `Gast`,
          tc1fev: 'Wenn du auf die Sprechen-Taste klickst, kannst du den Bot den Chat lesen lassen oder nicht',
          tc2fev: 'Mit dieser Taste kannst du das Thema ändern',
          tc3fev: 'Klicke auf diese Taste, wenn du nicht weißt, wie du ein Gespräch beginnen sollst',
          tc4fev: 'Wenn du auf die Sprechen-Taste klickst, kannst du den Bot den Chat lesen lassen oder nicht',
          tc5fev: 'Mit dieser Taste kannst du das Thema ändern',
          tc6fev: 'Klicke auf diese Taste, wenn du nicht weißt, wie du ein Gespräch beginnen sollst',
          tc7fev: 'Dein Profilbild ist hier, wenn du eines hochgeladen hast!',
          tc8fev: 'Dein Benutzername ist hier, wenn du einen hast!',
          tc9fev: 'by clicking this button the language changes to german',
          idkanswerv: `sorry aber ich habe keine ahnung was ich sagen soll 😅`,
          youfailedChallengev: "du hast die Herausforderung nicht bestanden",
          youpassedChallengev: "super gemacht, du hast die Herausforderung bestanden",
          textsendv: "sende",
          textmessagesv: "nachrichten",
          textpracticemathv: "übe mathe",
          textplayquizv: "spiele das quiz",
          textpracticegermanv: "übe englisch",
          textclickrandomv: "klicke den \"random\" knopf",
          textclickchagemoodv: "klicke den \"hell/dunkel\" knopf",
          nmyv: `noch keine nachrichten<a id="inscructionlink" onclick="instructionlinkclick()">anleitung</a>`,
          memorygameh1v: `Memory Spiel`,
          memorygamepv: `Spieler Punktstand: `,
          memorygamepcv: ` AIlury Punktstand: `,
          draw_pilev: `Ziehe`,
          cardgameresetbtnv: `Zurücksetzen`,
          tuctactoegamesetting1v: `du vs AIlury`,
          tuctactoegamesetting2v: `Zwei Spieler`,
          tictactoerestartbtnv: `Zurücksetzen`,
          leftv: `←`,
          rotatev: `drehen`,
          rightv: `→`,
          downv: `↓`,
          resetbtntwov: `Zurücksetzen`,
          tiletumblescorecontainerv: `Punktestand `,
          youwonplayertextv: `du hast gewonnen!`,
          youwoncomputertextv: `AIlury hat gewonnen!`,
          winstextv: `gewinnt`,
          drawtextv: `gleichstand`,
          memorygameyouwoncongratsv: `glückwunsch! du hast gewonnen!`,
          memorygameyoulostbetterlucknexttimev: `du hast verloren! mehr glück nächstes mal`,
          löschbtnv: `⊗ Löschen`,
          breakbtnv: `⚠ Stopp`,
          copybtnv: `● Kopieren`,
          editbtnv: `✎ Bearbeiten`,
          profilebtnv: `○ Profil bild`,
          instructionbtnv: `? Anleitung`,
          dyhfptttv: `mochtest du Tic Tac Toe Spielen?`,
          iwtptegv: "ich möchte das emoji spiel spielen!",
          iwtpgv: "ich möchte englisch üben!",
          iwtptqv: "ich möchte das quiz spielen!",
          iwtpmv: "ich möchte mathe üben!",
          randriv: ['hallo', 'wie gehts?', 'wie geht es dir?', 'ich möchte mathe üben', 'ich möchte Tic Tac Toe spielen', 'ich möchte Tile Tumble spielen', 'ich möchte Memory spielen', 'ich möchte englisch üben', 'hallo AIlury'],
          notificationstext: `<strong>Update 2.1.2: Das zweite update in der Heli update Serie</strong><br><br>
Wir freuen uns, das Update 2.1.2 vorzustellen, das neuste update in der Heli-Update-Serie, die darauf abzielt, Ihre Benutzererfahrung mit einer modernen Oberfläche zu verbessern.<br><br>

<strong>Hauptfunktionen:</strong><br><br>

1. <strong>Neues Website-Layout</strong>:<br>
- <em>Optimierte Oberfläche</em>: Alle Bearbeitungsknöpfe befinden sich nun bequem auf der linken Seitenleiste, was die Navigation einfacher und intuitiver macht.<br><br>

2. <strong>Optimiertes Knopfdesign</strong>:<br>
- <em>Schlankeres Aussehen</em>: Die Knopfsymbole wurden verkleinert, was zu einem aufgeräumteren und organisierten Erscheinungsbild beiträgt.<br><br>

3. <strong>Kompakteres Eingabefeld</strong>:<br>
- <em>Effiziente Raumnutzung</em>: Das Eingabefeld wurde verkleinert, sodass mehr Inhalte auf dem Bildschirm angezeigt werden können.<br><br>

4. <strong>Kleineres Profilbild</strong>:<br>
- <em>Verfeinerte Ästhetik</em>: Das Profilbild wurde verkleinert, um ein minimalistischeres und fokussierteres Design zu ermöglichen.<br><br>

5. <strong>Entfernung unnötiger Knöpfe</strong>:<br>
- <em>Entschlackte Oberfläche</em>: Überflüssige Knöpfe wurden entfernt, um die Benutzererfahrung zu vereinfachen.<br><br>

6. <strong>Neue Anpassungsoptionen</strong>:<br>
- <em>Erweiterte Personalisierung</em>: Zusätzliche Knöpfe wurden hinzugefügt, um mehr Personalisierungsmöglichkeiten für Chat- und Profileinstellungen zu bieten.<br><br>

7. <strong>Verbesserte Antwortgenauigkeit</strong>:<br>
- <em>Intelligentere Interaktionen</em>: Antworten wurden verfeinert, um präzisere und relevantere Antworten auf Ihre Anfragen zu geben.<br><br>

Bleiben Sie gespannt auf weitere aufregende Updates in der Heli-Update-Serie!`,
        }
    };
    let nmyelement = document.getElementById("nmy");

    let memorygameh1 = document.getElementById("memorygameh1");
    let memorygamep = document.getElementById("memorygamep");
    let memorygamepc = document.getElementById("memorygamepc");
    let draw_pile = document.getElementById("draw-pile");
    let cardgameresetbtn = document.querySelector(".cardgameresetbtn");
    let tuctactoegamesetting1 = document.getElementById("tuctactoegamesetting1");
    let tuctactoegamesetting2 = document.getElementById("tuctactoegamesetting2");
    let tictactoerestartbtn = document.querySelector(".tictactoerestartbtn");
    let variableleft = document.getElementById("left");
    let variablerotate = document.getElementById("rotate");
    let variableright = document.getElementById("right");
    let variabledown = document.getElementById("down");
    let variableresetbtntwo = document.getElementById("resetbtntwo");
    let tiletumblescorecontainer = document.getElementById("tiletumblescorecontainer");
    tc1fe = translations['en'].tc1fev;
    tc2fe = translations['en'].tc2fev;
    tc3fe = translations['en'].tc3fev;
    tc4fe = translations['en'].tc4fev;
    tc5fe = translations['en'].tc5fev;
    tc6fe = translations['en'].tc6fev;
    tc7fe = translations['en'].tc7fev;
    tc8fe = translations['en'].tc8fev;
    tc9fe = translations['en'].tc9fev;
    youwonplayertext = translations['en'].youwonplayertextv;
    youwoncomputertext = translations['en'].youwoncomputertextv;
    winstext = translations['en'].winstextv;
    drawtext = translations['en'].drawtextv;
    textpracticemath = translations['en'].textpracticemathv;
    textplayquiz = translations['en'].textplayquizv;
    textpracticegerman = translations['en'].textpracticegermanv;
    youfailedChallenge = translations['en'].youfailedChallengev;
    youpassedChallenge = translations['en'].youpassedChallengev;
    textsend = translations['en'].textsendv;
    textmessages = translations['en'].textmessagesv;
    idkanswer = translations['en'].idkanswerv;

    dyhfpttt = translations['en'].dyhfptttv;

    iwtpteg = translations['en'].iwtptegv;
    iwtpg = translations['en'].iwtpgv;
    iwtptq = translations['en'].iwtptqv;
    iwtpm = translations['en'].iwtpmv;

    memorygameyouwoncongrats = translations['en'].memorygameyouwoncongratsv;
    memorygameyoulostbetterlucknexttime = translations['en'].memorygameyoulostbetterlucknexttimev;

    memorygameh1.innerHTML = translations['en'].memorygameh1v;
    memorygamep.innerHTML = translations['en'].memorygamepv;
    memorygamepc.innerHTML = translations['en'].memorygamepcv;
    draw_pile.innerHTML = translations['en'].draw_pilev;
    cardgameresetbtn.innerHTML = translations['en'].cardgameresetbtnv;
    tuctactoegamesetting1.innerHTML = translations['en'].tuctactoegamesetting1v;
    tuctactoegamesetting2.innerHTML = translations['en'].tuctactoegamesetting2v;
    tictactoerestartbtn.innerHTML = translations['en'].tictactoerestartbtnv;
    variableleft.innerHTML = translations['en'].leftv;
    variablerotate.innerHTML = translations['en'].rotatev;
    variableright.innerHTML = translations['en'].rightv;
    variabledown.innerHTML = translations['en'].downv;
    variableresetbtntwo.innerHTML = translations['en'].resetbtntwov;
    tiletumblescorecontainer.innerHTML = translations['en'].tiletumblescorecontainerv;

    textclickrandom = translations['en'].textclickrandomv;
    textclickchagemood = translations['en'].textclickchagemoodv;

    randri = translations['en'].randriv;

    nmyelement.innerHTML = translations['en'].nmyv;
    function instructionlinkclick() {
      i_container.style.display = "flex";
      i_container.style.animation = "none";
      void i_container.offsetWidth;
      i_container.style.animation = "fadeIn 0.2s ease-in";
    }
    // Setzen Sie die Anfangssprache auf Englisch
    document.documentElement.lang = 'en';
    document.querySelector('.h22').innerHTML = translations['en'].instructions;
    document.getElementById('logoutbtn').textContent = translations['en'].logout;
    document.getElementById('speakbtn').textContent = translations['en'].speak;
    document.getElementById('randombtn').textContent = translations['en'].random;
    document.querySelector('.user-input').placeholder = translations['en'].placeholder;
    document.getElementById('Löschbtn').textContent = translations['en'].löschbtnv;
    document.getElementById('Breakbtn').textContent = translations['en'].breakbtnv;
    document.getElementById('Editbtn').textContent = translations['en'].editbtnv;
    document.getElementById('Copybtn').textContent = translations['en'].copybtnv;
    document.getElementById('profilebtn').textContent = translations['en'].profilebtnv;
    document.getElementById('instructionbtn').textContent = translations['en'].instructionbtnv;
    // local storage user name
    if (document.querySelector('.username-display').textContent == "Guest" || document.querySelector('.username-display').textContent == "Gast"){
      document.querySelector('.username-display').textContent = translations['en'].username;
    }
    let themeDS = document.getElementById('changethemebtn');
    themeDS.textContent = light2;
    document.querySelector('.h21').innerHTML = translations['en'].notificationstext;
    function change_language() {
      const currentLang = document.documentElement.lang;
      const newLang = currentLang === 'en' ? 'de' : 'en';
      document.documentElement.lang = newLang;

      // Holen Sie sich das h2-Element und aktualisieren Sie dessen Inhalt
      const instructionsElement = document.querySelector('.h22');
      instructionsElement.innerHTML = translations[newLang].instructions;
      const NotificationElement = document.querySelector('.h21');
      NotificationElement.innerHTML = translations[newLang].notificationstext;
      document.getElementById('logoutbtn').textContent = translations[newLang].logout;
      document.getElementById('speakbtn').textContent = translations[newLang].speak;
      document.getElementById('randombtn').textContent = translations[newLang].random;
      document.getElementById('languagebtn').textContent = translations[newLang].language;
      document.querySelector('.user-input').placeholder = translations[newLang].placeholder;
      if (document.querySelector('.username-display').textContent == "Guest" || document.querySelector('.username-display').textContent == "Gast"){
        document.querySelector('.username-display').textContent = translations[newLang].username;
      }
      idkanswer = translations[newLang].idkanswerv;
      tc1fe = translations[newLang].tc1fev;
      tc2fe = translations[newLang].tc2fev;
      tc3fe = translations[newLang].tc3fev;
      tc4fe = translations[newLang].tc4fev;
      tc5fe = translations[newLang].tc5fev;
      tc6fe = translations[newLang].tc6fev;
      tc7fe = translations[newLang].tc7fev;
      tc8fe = translations[newLang].tc8fev;
      tc9fe = translations[newLang].tc9fev;

      memorygameh1.innerHTML = translations[newLang].memorygameh1v;
      memorygamep.innerHTML = translations[newLang].memorygamepv;
      memorygamepc.innerHTML = translations[newLang].memorygamepcv;
      draw_pile.innerHTML = translations[newLang].draw_pilev;
      cardgameresetbtn.innerHTML = translations[newLang].cardgameresetbtnv;
      tuctactoegamesetting1.innerHTML = translations[newLang].tuctactoegamesetting1v;
      tuctactoegamesetting2.innerHTML = translations[newLang].tuctactoegamesetting2v;
      tictactoerestartbtn.innerHTML = translations[newLang].tictactoerestartbtnv;
      variableleft.innerHTML = translations[newLang].leftv;
      variablerotate.innerHTML = translations[newLang].rotatev;
      variableright.innerHTML = translations[newLang].rightv;
      variabledown.innerHTML = translations[newLang].downv;
      variableresetbtntwo.innerHTML = translations[newLang].resetbtntwov;
      tiletumblescorecontainer.innerHTML = translations[newLang].tiletumblescorecontainerv;

      memorygameyouwoncongrats = translations[newLang].memorygameyouwoncongratsv;
      memorygameyoulostbetterlucknexttime = translations[newLang].memorygameyoulostbetterlucknexttimev;

      youwonplayertext = translations[newLang].youwonplayertextv;
      youwoncomputertext = translations[newLang].youwoncomputertextv;
      winstext = translations[newLang].winstextv;
      drawtext = translations[newLang].drawtextv;

      youfailedChallenge = translations[newLang].youfailedChallengev;
      youpassedChallenge = translations[newLang].youpassedChallengev;
      textsend = translations[newLang].textsendv;
      textmessages = translations[newLang].textmessagesv;

      textpracticemath = translations[newLang].textpracticemathv;
      textplayquiz = translations[newLang].textplayquizv;
      textpracticegerman = translations[newLang].textpracticegermanv;

      textclickrandom = translations[newLang].textclickrandomv;
      textclickchagemood = translations[newLang].textclickchagemoodv;

      nmyelement.innerHTML = translations[newLang].nmyv;

      dyhfpttt = translations[newLang].dyhfptttv;

      iwtpteg = translations[newLang].iwtptegv;
      iwtpg = translations[newLang].iwtpgv;
      iwtptq = translations[newLang].iwtptqv;
      iwtpm = translations[newLang].iwtpmv;

      randri = translations[newLang].randriv;

      document.getElementById('Löschbtn').textContent = translations[newLang].löschbtnv;
      document.getElementById('Breakbtn').textContent = translations[newLang].breakbtnv;
      document.getElementById('Editbtn').textContent = translations[newLang].editbtnv;
      document.getElementById('Copybtn').textContent = translations[newLang].copybtnv;
      document.getElementById('profilebtn').textContent = translations[newLang].profilebtnv;
      document.getElementById('instructionbtn').textContent = translations[newLang].instructionbtnv;
      if (themeDS.textContent == "☾ Dark Theme"){
        themeDS.textContent = "☾ Dunkel Modus";
        dark2 = "☾ Dunkel Modus";
        light2 = "☼ Hell Modus";
      }else if (themeDS.textContent == "☾ Dunkel Modus"){
        themeDS.textContent = "☾ Dark Theme";
        dark2 = "☾ Dark Theme";
        light2 = "☼ Light Theme";
      }else if (themeDS.textContent == "☼ Light Theme"){
        themeDS.textContent = "☼ Hell Modus";
        dark2 = "☾ Dunkel Modus";
        light2 = "☼ Hell Modus";
      }else if (themeDS.textContent == "☼ Hell Modus"){
        themeDS.textContent = "☼ Light Theme";
        dark2 = "☾ Dark Theme";
        light2 = "☼ Light Theme";
      }
      if (isguessing == "no"){
        isguessing = "nein";
      }else if (isguessing == "yes"){
        isguessing = "ja";
      }else if (isguessing == "nein"){
        isguessing = "no";
      }else if (isguessing == "ja"){
        isguessing = "yes";
      }

      checkvalueoc();

    }
  </script>
</body>
</html>
